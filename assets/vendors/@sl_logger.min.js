!function(){"use strict";let t;var o,n,r,e,i,p,a=function(){return(a=Object.assign||function(t){for(var o,n=1,r=arguments.length;n<r;n++)for(var e in o=arguments[n])Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e]);return t}).apply(this,arguments)};function s(t,o,n,r){var e,i=arguments.length,p=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(t,o,n,r);else for(var a=t.length-1;a>=0;a--)(e=t[a])&&(p=(i<3?e(p):i>3?e(o,n,p):e(o,n))||p);return i>3&&p&&Object.defineProperty(o,n,p),p}function u(t,o,n){if(n||2==arguments.length)for(var r,e=0,i=o.length;e<i;e++)!r&&e in o||(r||(r=Array.prototype.slice.call(o,0,e)),r[e]=o[e]);return t.concat(r||Array.prototype.slice.call(o))}(o=e||(e={})).P0="P0",o.P1="P1",o.P2="P2",(n=i||(i={})).Start="Start",n.Success="Success",n.Failure="Failure",(r=p||(p={})).Info="info",r.Log="log",r.Warn="warn",r.Error="error";var c=function(t){return function(o,n,r){var e=r.value;r.value=function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];try{return e.apply(this,o)}catch(o){return console.error("logger: ".concat(n,"方法执行出错"),o),t}}}},l=function(t){return t.reduce(function(t,o){var n={};try{n=o()}catch(t){console.error("计算列表结果出错",t)}return a(a({},t),n)},{})};Object.defineProperty(new(function(){function t(t){var o=this;this.options={owner:"",action:"",tags:{},getTagsFn:[],data:{},getDataFn:[],transports:[]},this.report=function(t,n,r){var e,i=l(o.options.getTagsFn),p=l(o.options.getDataFn),s=a(a({level:t,owner:o.options.owner,action:o.options.action},r),{tags:a(a({},o.options.tags),i),data:a(a({},o.options.data),p),message:n});e=null==r?void 0:r.data,"[object Object]"===Object.prototype.toString.call(e)?s.data=a(a({},s.data),null==r?void 0:r.data):s.data=a(a({},s.data),{custom_data:null==r?void 0:r.data}),(null==r?void 0:r.tags)&&(s.tags=a(a({},s.tags),r.tags)),function(t,o){var n=t;o.forEach(function(t){var o=t(n);o&&(n=o)})}(s,o.options.transports)},this.options=a(a({},this.options),t)}return t.prototype.withOwner=function(o){return new t(a(a({},this.options),{owner:o}))},t.prototype.pipeOwner=function(o){if(!o)return this;var n="";return n=this.options.owner?"".concat(this.options.owner,".").concat(o):o,new t(a(a({},this.options),{owner:n}))},t.prototype.withAction=function(o){return new t(a(a({},this.options),{action:o}))},t.prototype.pipeTags=function(o){return o?new t(a(a({},this.options),"function"==typeof o?{getTagsFn:u(u([],this.options.getTagsFn,!0),[o],!1)}:{tags:a(a({},this.options.tags),o)})):this},t.prototype.pipeData=function(o){return o?new t(a(a({},this.options),"function"==typeof o?{getDataFn:u(u([],this.options.getDataFn,!0),[o],!1)}:{data:a(a({},this.options.data),o)})):this},t.prototype.pipeTransport=function(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];var r=this.options.transports.concat(o);return new t(a(a({},this.options),{transports:r}))},t.prototype.info=function(t,o){this.report(p.Info,t,o)},t.prototype.log=function(t,o){this.report(p.Log,t,o)},t.prototype.warn=function(t,o){this.report(p.Warn,t,o)},t.prototype.error=function(t,o){this.report(p.Error,t,o)},s([c(new t)],t.prototype,"withOwner",null),s([c(new t)],t.prototype,"pipeOwner",null),s([c(new t)],t.prototype,"withAction",null),s([c(new t)],t.prototype,"pipeTags",null),s([c(new t)],t.prototype,"pipeData",null),s([c(new t)],t.prototype,"pipeTransport",null),s([c(new t)],t.prototype,"info",null),s([c(new t)],t.prototype,"log",null),s([c(new t)],t.prototype,"warn",null),s([c(new t)],t.prototype,"error",null),t}()),"options",{writable:!1,configurable:!1});let f=new Uint8Array(16),h=[];for(let t=0;t<256;++t)h.push((t+256).toString(16).slice(1));var d={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function g(o,n,r){if(d.randomUUID&&!n&&!o)return d.randomUUID();let e=(o=o||{}).random||(o.rng||function(){if(!t&&!(t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(f)})();if(e[6]=15&e[6]|64,e[8]=63&e[8]|128,n){r=r||0;for(let t=0;t<16;++t)n[r+t]=e[t];return n}return function(t,o=0){return(h[t[o+0]]+h[t[o+1]]+h[t[o+2]]+h[t[o+3]]+"-"+h[t[o+4]]+h[t[o+5]]+"-"+h[t[o+6]]+h[t[o+7]]+"-"+h[t[o+8]]+h[t[o+9]]+"-"+h[t[o+10]]+h[t[o+11]]+h[t[o+12]]+h[t[o+13]]+h[t[o+14]]+h[t[o+15]]).toLowerCase()}(e)}var y=new(function(){function t(){this.fnList=[],this.get()}return t.prototype.get=function(){var t,o,n,r=sessionStorage.getItem("SL_LOGGER_SESSION_ID"),e=(t="log_session_id",o=document.cookie.split("; "),n={},o.forEach(function(t){var o=t.split("="),r=o[0],e=o[1];r&&(n[r]=e||"")}),n[t]||"");if(r)return r!==e&&this.updateId(r),r;var i=g();return this.updateId(i),i},t.prototype.set=function(t){return!!t&&(this.updateId(t),this.fnList.forEach(function(o){return o(t)}),!0)},t.prototype.refresh=function(){var t=g();return this.updateId(t),this.fnList.forEach(function(o){return o(t)}),!0},t.prototype.onChange=function(t){this.fnList.push(t)},t.prototype.updateId=function(t){var o,n;sessionStorage.setItem("SL_LOGGER_SESSION_ID",t),void 0===o&&(o="/"),n="".concat("log_session_id","=").concat(t),o&&(n+="; path=".concat(o)),document.cookie=n},s([c("")],t.prototype,"get",null),s([c(!1)],t.prototype,"set",null),s([c(!1)],t.prototype,"refresh",null),s([c()],t.prototype,"onChange",null),s([c()],t.prototype,"updateId",null),t}());window["@sl/logger"]={sessionId:y}}();
