!function(){"use strict";let e,t,n,r;let o=e=>({[`Init${e}`]:`init${e}`,[`Take${e}`]:`take${e}`,[`Edit${e}`]:`edit${e}`,[`CallingInterface${e}`]:`callingInterface${e}`,[`CalculatePrice${e}`]:`calculatePrice${e}`,[`Report${e}`]:`report${e}`}),i={...o("Cart"),OpenCart:"openCart",Add2Cart:"add2Cart",DeleteCart:"deleteCart",ClearCart:"clearCart",EditCoupon:"editCoupon"},a={...o("Checkout"),EditCoupon:"editCoupon",ChangePage:"changePage",CompleteOrder:"CompleteOrder"},c={...i,...a,...o("ExpressCallback"),...o("Processing"),...o("Thankyou"),...o("Order"),...o("Error")};var s,u,l,d,p,f,h,y,m,v,g,b,_,w,C,O,S,x,k,P,E,I,T,A,D="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function L(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var j={},N={};Object.defineProperty(N,"__esModule",{value:!0}),N.default={errNilEntry:"FA_LOGGER_NIL_ENTRY",errNilFieldKey:"FA_LOGGER_NIL_FIELD_KEY",errNilFieldValue:"FA_LOGGER_NIL_FIELD_VALUE"};var B={},F=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(B,"__esModule",{value:!0});var R=F(N);function M(e){return(null==e?void 0:e.key)==null?"":String(e.key)}function U(e){return null==e?void 0:e.value}B.default={getFieldKey:M,getFieldValue:U,marshalFieldList:function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],o=0;o<t.length;++o)!function(n){var o=t[n];o&&("string"==typeof o?(n+=1)>=t.length?r.push({key:o,value:R.default.errNilFieldValue}):r.push({key:o,value:t[n]}):function(e){if("object"==typeof e&&null!==e){if("function"==typeof Object.getPrototypeOf){var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}return"[object Object]"==Object.prototype.toString.call(e)}return!1}(o)?Object.keys(o).forEach(function(e){r.push({key:e,value:o[e]})}):r.push({key:"",value:o})),e=n}(o),o=e;return r},mergeFieldList:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(function(e,t){return Array.isArray(t)?e.concat(t||[]):e},[])},mapFieldList:function(e){var t={},n=[];return(e||[]).forEach(function(e){var r=M(e),o=U(e);r?t[r]=o:n.push(o)}),n.length>0&&Object.assign(t,{__extra__:n}),t}};var H={};Object.defineProperty(H,"__esModule",{value:!0}),H.LevelEnum=void 0,(ti=to=H.LevelEnum||(H.LevelEnum={}))[ti.fatal=0]="fatal",ti[ti.error=1]="error",ti[ti.info=2]="info",ti[ti.debug=3]="debug",H.default={LevelEnum:to};var Y={},q={},V=D&&D.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};function W(){return{owner:"",transportList:[]}}Object.defineProperty(q,"__esModule",{value:!0}),q.default={newNopLoggerConfig:W,withLoggerConfig:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e||(e=W());for(var r=0;r<t.length;++r){var o=t[r];if("function"==typeof o){var i=o(e);i&&(e=i)}}return e},pipeOwner:function(e){return function(t){e&&(t.owner=[t.owner,e].join("."))}},withOwner:function(e){return function(t){e&&(t.owner=""+e)}},pipeTransport:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){t.transportList=V(V([],t.transportList||[]),e.filter(function(e){return e}))}}};var G={};function z(e,t,n){if(e&&Array.isArray(n)&&t){for(var r=0;r<n.length;++r){var o=n[r];if(o){var i=void 0;if("function"==typeof(i="function"!=typeof o?o.capture:o)){var a=i(e,t);if(Array.isArray(a))e=a[0],t=a[1];else if(!1===a)return!1}}}return[e,t]}}function K(e,t,n){if(e&&Array.isArray(n)&&t){for(var r=n.length-1;r>=0;--r){var o=n[r];if(o){var i=void 0;if("function"!=typeof o&&(i=o.bubble),"function"==typeof i){var a=i(e,t);if(Array.isArray(a))e=a[0],t=a[1];else if(!1===a)return!1}}}return[e,t]}}Object.defineProperty(G,"__esModule",{value:!0}),G.default={traverseTransportWalkerList:function(e,t,n){if(e&&Array.isArray(n)&&t){for(var r=0;r<n.length;++r){var o=n[r];if("function"==typeof o){var i=o(e,t);if(Array.isArray(i))e=i[0],t=i[1];else if(!1===i)return!1}}return[e,t]}},traverseTransportList:function(e,t,n){if(!e||!Array.isArray(n)||!t)return t;var r=z(e,t,n);if(!1!==r){Array.isArray(r)&&(e=r[0],t=r[1]);var o=K(e,t,n);if(!1!==o)return Array.isArray(o)&&(e=o[0],t=o[1]),t}},traverseCapturedTransportList:z,traverseBubbledTransportList:K};var J={},X={},Z={},Q=D&&D.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((r=r.apply(e,t||[])).next())})},ee=D&&D.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(Z,"__esModule",{value:!0});var et=new Promise(function(e){});Z.default={zombie:et,resolvable:function(){var e,t=!1;return[new Promise(function(n){t?n():e=n}),function(){t=!0,"function"==typeof e&&e()}]},resolveAfterEventBubbled:function(e,t){return Q(this,void 0,void 0,function(){return ee(this,function(n){return[2,new Promise(function(n){var r=function(o){e.removeEventListener(t,r),n(o)};e.addEventListener(t,r)})]})})},resolveAfterSeconds:function(e){return Q(this,void 0,void 0,function(){return ee(this,function(t){return e<=0?[2,Promise.resolve()]:[2,new Promise(function(t){setTimeout(function(){t()},1e3*e)})]})})},resolveAfterDuration:function(e){return Q(this,void 0,void 0,function(){return ee(this,function(t){return e<=0?[2,Promise.resolve()]:[2,new Promise(function(t){setTimeout(function(){t()},e)})]})})}};var en={};Object.defineProperty(en,"__esModule",{value:!0});var er=function(){function e(e){this.v=e}return Object.defineProperty(e.prototype,"timestamp",{get:function(){return this.v},enumerable:!1,configurable:!0}),e.prototype.add=function(t){return new e(this.v+t)},e.prototype.sub=function(t){return new e(this.v-t)},e.prototype.duration=function(e){return this.v-e.timestamp},e}();function eo(e){return new er(e)}function ei(){return eo(Date.now())}en.default={time:eo,now:ei,later:function(e){return ei().add(e)},former:function(e){return ei().sub(e)},Millisecond:1,Second:1e3,Minute:6e4,Hour:36e5,Day:864e5,Week:6048e5};var ea={};Object.defineProperty(ea,"__esModule",{value:!0}),ea.default={errCanceled:"context done with cancellation",errTimeout:"context done with timeout",errDeadline:"context done with deadline",errNotNullableValuer:"valuer is not nullable"};var ec=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(X,"__esModule",{value:!0});var es=ec(Z),eu=ec(en),el=ec(ea);function ed(){return{deadline:function(){return null},done:function(){return es.default.zombie},err:function(){return null},value:function(e){return e?e.defaultGetter():null}}}function ep(e){return e||(e=eh),{deadline:function(){return e.deadline()},done:function(){return e.done()},err:function(){return e.err()},value:function(t){return e.value(t)}}}function ef(e){var t=es.default.resolvable(),n=t[0],r=t[1],o=null;return[{deadline:function(){return e.deadline()},done:function(){return Promise.race([e.done().then(function(){return e.err()}),n.then(function(){return Error(el.default.errCanceled)})]).then(function(e){o=e})},err:function(){return o},value:function(t){return e.value(t)}},r]}X.default={background:function(){return ep(eh)},todo:function(){return ep(ey)},withValue:function(e,t,n){return{deadline:function(){return e.deadline()},done:function(){return e.done()},err:function(){return e.err()},value:function(r){return t===r?n:e.value(r)}}},withCancel:function(e){return ef(e)},withTimeout:function(e,t){var n,r,o;return ef((r=eu.default.later(t),o=es.default.resolveAfterDuration(t),{deadline:function(){return r},done:function(){return Promise.race([e.done().then(function(){return e.err()}),o.then(function(){return Error(el.default.errTimeout)})]).then(function(e){n=e})},err:function(){return n},value:function(t){return e.value(t)}}))},withDeadline:function(e,t){var n,r;return ef((n=null,r=es.default.resolveAfterDuration(t.duration(eu.default.now())),{deadline:function(){return t},done:function(){return Promise.race([e.done().then(function(){return e.err()}),r.then(function(){return Error(el.default.errDeadline)})]).then(function(e){n=e})},err:function(){return n},value:function(t){return e.value(t)}}))}};var eh=ed(),ey=ed(),em={},ev=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(em,"__esModule",{value:!0});var eg=ev(ea);function eb(e){return Object.defineProperty({},"defaultGetter",{value:e,writable:!1,configurable:!1})}em.default={newValuer:function(e){return eb(void 0===e?function(){throw Error(eg.default.errNotNullableValuer)}:function(){return e})},newValuerWithGetter:function(e){return"function"!=typeof e&&(e=function(){throw Error(eg.default.errNotNullableValuer)}),eb(e)}},ta=D&&D.__assign||function(){return(ta=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},tc=D&&D.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),ts=D&&D.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||tc(t,e,n)},tu=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Object.defineProperty(J,"__esModule",{value:!0}),tl=tu(X),td=tu(ea),tp=tu(em),ts(X,J),ts(em,J),J.default=ta(ta(ta({},td.default),tl.default),tp.default);var e_=D&&D.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},ew=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Y,"__esModule",{value:!0});var eC=ew(q),eO=ew(H),eS=ew(B),ex=ew(G),ek=ew(J);function eP(){return eI(eC.default.newNopLoggerConfig())}var eE=eP();function eI(e){var t=e.owner,n=e.transportList;function r(e){return eS.default.marshalFieldList.apply(eS.default,e)}function o(e){try{ex.default.traverseTransportList(ek.default.background(),e,n)}catch(t){console.error("failed to log entry","entry",e,"error",t)}}return{get owner(){return t},get transportList(){return n},debug:function(e){var n={owner:t,level:eO.default.LevelEnum.debug,message:e,fields:r(Array.from(arguments).slice(1))};o(n)},info:function(e){var n={owner:t,level:eO.default.LevelEnum.info,message:e,fields:r(Array.from(arguments).slice(1))};o(n)},error:function(e){var n={owner:t,level:eO.default.LevelEnum.error,message:e,fields:r(Array.from(arguments).slice(1))};o(n)}}}Y.default={withLogger:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return eI(eC.default.withLoggerConfig.apply(eC.default,e_([e?{owner:e.owner,transportList:e.transportList}:eC.default.newNopLoggerConfig()],t)))},newNopLogger:eP,takeGlobalLogger:function(){return eE},withGlobalLogger:function(e){eE=e}};var eT={};Object.defineProperty(eT,"__esModule",{value:!0});var eA={};Object.defineProperty(eA,"__esModule",{value:!0}),tf=D&&D.__assign||function(){return(tf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},th=D&&D.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),ty=D&&D.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||th(t,e,n)},tm=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Object.defineProperty(j,"__esModule",{value:!0}),tv=tm(N),tg=tm(B),tb=tm(H),t_=tm(Y),tw=tm(q),tC=tm(G),ty(eT,j),ty(N,j),ty(B,j),ty(eA,j),ty(H,j),ty(Y,j),ty(q,j),ty(G,j),j.default=tf(tf(tf(tf(tf(tf({},tv.default),tg.default),tb.default),tw.default),t_.default),tC.default);var eD=L(j),eL={},ej={},eN=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ej,"__esModule",{value:!0});var eB=eN(B);ej.default={withFields:function(e){return function(t,n){n.fields=eB.default.mergeFieldList(n.fields,e)}}};var eF={},eR=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(eF,"__esModule",{value:!0});var eM=eR(H);function eU(e){return{capture:function(t,n){if(n&&n.level>e)return!1}}}eF.default={withLevel:eU,withDebugLevel:function(){return eU(eM.default.LevelEnum.debug)},withInfoLevel:function(){return eU(eM.default.LevelEnum.info)}};var eH={},eY=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(eH,"__esModule",{value:!0});var eq=eY(H),e$=eY(B);eH.default={withStdout:function(){return{bubble:function(e,t){var n=t.owner,r=t.level,o=t.message,i=t.fields,a=o+" ["+n+"] "+JSON.stringify(e$.default.mapFieldList(i),null,2);switch(r){case eq.default.LevelEnum.error:case eq.default.LevelEnum.fatal:console.error(a);break;case eq.default.LevelEnum.info:console.info(a);break;default:case eq.default.LevelEnum.debug:console.debug(a)}}}}};var eV={},eW=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(eV,"__esModule",{value:!0});var eG=eW(G);function ez(e,t){return{capture:function(n,r){if(e(n,r)&&null!=t)return eG.default.traverseCapturedTransportList(n,r,[t])},bubble:function(n,r){if(e(n,r)&&null!=t)return eG.default.traverseBubbledTransportList(n,r,[t])}}}eV.default={withExpect:ez,withTruth:function(e,t){return ez(e,t)},withFalsy:function(e,t){return ez(function(t,n){return!e(t,n)},t)}};var eK={},eJ=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(eK,"__esModule",{value:!0});var eX=eJ(G);eK.default={withSplit:function(e,t,n){return{capture:function(r,o){var i=!!e(r,o);return i&&null!=t?eX.default.traverseCapturedTransportList(r,o,[t]):i||null==n?void 0:eX.default.traverseCapturedTransportList(r,o,[n])},bubble:function(r,o){var i=!!e(r,o);return i&&null!=t?eX.default.traverseBubbledTransportList(r,o,[t]):i||null==n?void 0:eX.default.traverseBubbledTransportList(r,o,[n])}}}};var eZ={},eQ=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(eZ,"__esModule",{value:!0});var e0=eQ(G);eZ.default={withConcat:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{capture:function(t,n){return e0.default.traverseCapturedTransportList(t,n,e)},bubble:function(t,n){return e0.default.traverseBubbledTransportList(t,n,e)}}}};var e1=D&&D.__assign||function(){return(e1=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},e3=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(eL,"__esModule",{value:!0});var e2=e3(ej),e4=e3(eF),e5=e3(eH),e6=e3(eV),e9=e3(eK),e8=e3(eZ),e7=eL.default=e1(e1(e1(e1(e1(e1({},e2.default),e4.default),e5.default),e6.default),e9.default),e8.default);function te(e){let t=window.__ENV__||{};return e?t[e]:t}function tt(){var e;return e="APP_ENV",te()[e]||""}var tn={appEnvInDevelop:function(){return"develop"===tt()},appEnvInStaging:function(){return"staging"===tt()}};let tr=function(){return n||(n=eD.withLogger(null,eD.pipeTransport(...function(){let e=[],t=t=>{e.push(t)},n=e=>e.map(e=>{let{category:t,message:n,eventId:r}=e;return{type:t,message:n,eventId:r}});return[{bubble:(r,o)=>{let{owner:i,level:a,fields:c}=o,s=`${o.message}`,u=eD.mapFieldList(c),l={};switch(a){case eD.LevelEnum.error:case eD.LevelEnum.fatal:l={message:s,breadCrumbs:n(e),owner:i,extra:u},window.__SL_Track__.error(i,l),e.length=0;break;case eD.LevelEnum.info:l={message:s,breadCrumbs:n(e),owner:i,extra:u},window.__SL_Track__.info(i,l),e.length=0;break;case eD.LevelEnum.debug:default:t({message:`${s} ${Object.keys(u).length?JSON.stringify(u):""}`,category:"debug",eventId:Date.now()})}}}]}(),...[],...tn.appEnvInDevelop()||tn.appEnvInStaging()?[e7.withStdout()]:[])),eD.withGlobalLogger(n)),n};var to,ti,ta,tc,ts,tu,tl,td,tp,tf,th,ty,tm,tv,tg,tb,t_,tw,tC,tO,tS,tx,tk={get logger(){return tr()},pipeOwner(e){if("object"!=typeof e){console.warn("[logger.pipeOwner]The input parameter must be an object.");return}let{owner:t,base:n=tr(),onTag:r}=e;return eD.withLogger(n,eD.pipeOwner(t))}},tP=function(){return(tP=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function tE(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function tI(e,t,n){if(n||2==arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}(tz=tO||(tO={})).P0="P0",tz.P1="P1",tz.P2="P2",(tK=tS||(tS={})).Start="Start",tK.Success="Success",tK.Failure="Failure",(tJ=tx||(tx={})).Info="info",tJ.Log="log",tJ.Warn="warn",tJ.Error="error";var tT=function(e){return function(t,n,r){var o=r.value;r.value=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{return o.apply(this,t)}catch(t){return console.error("logger: ".concat(n,"方法执行出错"),t),e}}}},tA=function(e){return e.reduce(function(e,t){var n={};try{n=t()}catch(e){console.error("计算列表结果出错",e)}return tP(tP({},e),n)},{})},tD=new(function(){function e(e){var t=this;this.options={owner:"",action:"",tags:{},getTagsFn:[],data:{},getDataFn:[],transports:[]},this.report=function(e,n,r){var o,i=tA(t.options.getTagsFn),a=tA(t.options.getDataFn),c=(null==r?void 0:r.errorLevel)&&r.errorLevel||null,s=tP(tP({level:e,owner:t.options.owner,action:t.options.action},r),{tags:tP(tP(tP({},t.options.tags),i),{errorLevel:c}),data:tP(tP({},t.options.data),a),message:n});o=null==r?void 0:r.data,"[object Object]"===Object.prototype.toString.call(o)?s.data=tP(tP({},s.data),null==r?void 0:r.data):s.data=tP(tP({},s.data),{custom_data:null==r?void 0:r.data}),(null==r?void 0:r.tags)&&(s.tags=tP(tP({},s.tags),r.tags)),function(e,t){var n=e;t.forEach(function(e){var t=e(n);t&&(n=t)})}(s,t.options.transports)},this.options=tP(tP({},this.options),e)}return e.prototype.withOwner=function(t){return new e(tP(tP({},this.options),{owner:t}))},e.prototype.pipeOwner=function(t){if(!t)return this;var n="";return n=this.options.owner?"".concat(this.options.owner,".").concat(t):t,new e(tP(tP({},this.options),{owner:n}))},e.prototype.withAction=function(t){return new e(tP(tP({},this.options),{action:t}))},e.prototype.pipeTags=function(t){return t?new e(tP(tP({},this.options),"function"==typeof t?{getTagsFn:tI(tI([],this.options.getTagsFn,!0),[t],!1)}:{tags:tP(tP({},this.options.tags),t)})):this},e.prototype.pipeData=function(t){return t?new e(tP(tP({},this.options),"function"==typeof t?{getDataFn:tI(tI([],this.options.getDataFn,!0),[t],!1)}:{data:tP(tP({},this.options.data),t)})):this},e.prototype.pipeTransport=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.options.transports.concat(t);return new e(tP(tP({},this.options),{transports:r}))},e.prototype.info=function(e,t){this.report(tx.Info,e,t)},e.prototype.log=function(e,t){this.report(tx.Log,e,t)},e.prototype.warn=function(e,t){this.report(tx.Warn,e,t)},e.prototype.error=function(e,t){this.report(tx.Error,e,t)},tE([tT(new e)],e.prototype,"withOwner",null),tE([tT(new e)],e.prototype,"pipeOwner",null),tE([tT(new e)],e.prototype,"withAction",null),tE([tT(new e)],e.prototype,"pipeTags",null),tE([tT(new e)],e.prototype,"pipeData",null),tE([tT(new e)],e.prototype,"pipeTransport",null),tE([tT(new e)],e.prototype,"info",null),tE([tT(new e)],e.prototype,"log",null),tE([tT(new e)],e.prototype,"warn",null),tE([tT(new e)],e.prototype,"error",null),e}());Object.defineProperty(tD,"options",{writable:!1,configurable:!1});let tL=new Uint8Array(16),tj=[];for(let e=0;e<256;++e)tj.push((e+256).toString(16).slice(1));var tN={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function tB(t,n,r){if(tN.randomUUID&&!n&&!t)return tN.randomUUID();let o=(t=t||{}).random||(t.rng||function(){if(!e&&!(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(tL)})();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n){r=r||0;for(let e=0;e<16;++e)n[r+e]=o[e];return n}return function(e,t=0){return(tj[e[t+0]]+tj[e[t+1]]+tj[e[t+2]]+tj[e[t+3]]+"-"+tj[e[t+4]]+tj[e[t+5]]+"-"+tj[e[t+6]]+tj[e[t+7]]+"-"+tj[e[t+8]]+tj[e[t+9]]+"-"+tj[e[t+10]]+tj[e[t+11]]+tj[e[t+12]]+tj[e[t+13]]+tj[e[t+14]]+tj[e[t+15]]).toLowerCase()}(o)}var tF=new(function(){function e(){this.fnList=[],this.get()}return e.prototype.get=function(){var e,t,n,r=sessionStorage.getItem("SL_LOGGER_SESSION_ID"),o=(e="log_session_id",t=document.cookie.split("; "),n={},t.forEach(function(e){var t=e.split("="),r=t[0],o=t[1];r&&(n[r]=o||"")}),n[e]||"");if(r)return r!==o&&this.updateId(r),r;var i=tB();return this.updateId(i),i},e.prototype.set=function(e){return!!e&&(this.updateId(e),this.fnList.forEach(function(t){return t(e)}),!0)},e.prototype.refresh=function(){var e=tB();return this.updateId(e),this.fnList.forEach(function(t){return t(e)}),!0},e.prototype.onChange=function(e){this.fnList.push(e)},e.prototype.updateId=function(e){var t,n;sessionStorage.setItem("SL_LOGGER_SESSION_ID",e),void 0===t&&(t="/"),n="".concat("log_session_id","=").concat(e),t&&(n+="; path=".concat(t)),document.cookie=n},tE([tT("")],e.prototype,"get",null),tE([tT(!1)],e.prototype,"set",null),tE([tT(!1)],e.prototype,"refresh",null),tE([tT()],e.prototype,"onChange",null),tE([tT()],e.prototype,"updateId",null),e}()),tR=function(e,t){return(tR=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},tM=function(){return(tM=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function tU(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(arguments[t]));return e}function tH(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}var tY={};function tq(){return tH()?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:tY}function t$(e,t,n){var r=n||tq(),o=r.__SENTRY__=r.__SENTRY__||{};return o[e]||(o[e]=t())}var tV=Object.prototype.toString;function tW(e){return"[object Object]"===tV.call(e)}function tG(e){return!!(e&&e.then&&"function"==typeof e.then)}var tz,tK,tJ,tX,tZ="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,tQ=tq(),t0=["debug","info","warn","error","log","assert"];function t1(e){var t=tq();if(!("console"in t))return e();var n=t.console,r={};t0.forEach(function(e){var o=n[e]&&n[e].__sentry_original__;e in t.console&&o&&(r[e]=n[e],n[e]=o)});try{return e()}finally{Object.keys(r).forEach(function(e){n[e]=r[e]})}}function t3(){var e=!1,t={enable:function(){e=!0},disable:function(){e=!1}};return tZ?t0.forEach(function(n){t[n]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e&&t1(function(){var e;(e=tQ.console)[n].apply(e,tU(["Sentry Logger ["+n+"]:"],t))})}}):t0.forEach(function(e){t[e]=function(){}}),t}function t2(){var e=tq(),t=e.crypto||e.msCrypto;if(void 0!==t&&t.getRandomValues){var n=new Uint16Array(8);t.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var r=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}tX=tZ?t$("logger",t3):t3();var t4,t5=function(){function e(e){var t=this;this._state=0,this._handlers=[],this._resolve=function(e){t._setResult(1,e)},this._reject=function(e){t._setResult(2,e)},this._setResult=function(e,n){0===t._state&&(tG(n)?n.then(t._resolve,t._reject):(t._state=e,t._value=n,t._executeHandlers()))},this._executeHandlers=function(){if(0!==t._state){var e=t._handlers.slice();t._handlers=[],e.forEach(function(e){e[0]||(1===t._state&&e[1](t._value),2===t._state&&e[2](t._value),e[0]=!0)})}};try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}return e.prototype.then=function(t,n){var r=this;return new e(function(e,o){r._handlers.push([!1,function(n){if(t)try{e(t(n))}catch(e){o(e)}else e(n)},function(t){if(n)try{e(n(t))}catch(e){o(e)}else o(t)}]),r._executeHandlers()})},e.prototype.catch=function(e){return this.then(function(e){return e},e)},e.prototype.finally=function(t){var n=this;return new e(function(e,r){var o,i;return n.then(function(e){i=!1,o=e,t&&t()},function(e){i=!0,o=e,t&&t()}).then(function(){i?r(o):e(o)})})},e}();(iT=t4||(t4={})).Fatal="fatal",iT.Error="error",iT.Warning="warning",iT.Log="log",iT.Info="info",iT.Debug="debug",iT.Critical="critical";var t6={nowSeconds:function(){return Date.now()/1e3}},t9=tH()?function(){var e,t;try{return(e=module,t="perf_hooks",e.require(t)).performance}catch(e){return}}():function(){var e=tq().performance;if(e&&e.now)return{now:function(){return e.now()},timeOrigin:Date.now()-e.now()}}(),t8=void 0===t9?t6:{nowSeconds:function(){return(t9.timeOrigin+t9.now())/1e3}},t7=t6.nowSeconds.bind(t6),ne=t8.nowSeconds.bind(t8);!function(){var e=tq().performance;if(e&&e.now){var t=e.now(),n=Date.now(),r=e.timeOrigin?Math.abs(e.timeOrigin+t-n):36e5,o=e.timing&&e.timing.navigationStart,i="number"==typeof o?Math.abs(o+t-n):36e5;(r<36e5||i<36e5)&&r<=i&&e.timeOrigin}}();var nt=function(){function e(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}return e.clone=function(t){var n=new e;return t&&(n._breadcrumbs=tU(t._breadcrumbs),n._tags=tM({},t._tags),n._extra=tM({},t._extra),n._contexts=tM({},t._contexts),n._user=t._user,n._level=t._level,n._span=t._span,n._session=t._session,n._transactionName=t._transactionName,n._fingerprint=t._fingerprint,n._eventProcessors=tU(t._eventProcessors),n._requestSession=t._requestSession),n},e.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},e.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},e.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},e.prototype.getUser=function(){return this._user},e.prototype.getRequestSession=function(){return this._requestSession},e.prototype.setRequestSession=function(e){return this._requestSession=e,this},e.prototype.setTags=function(e){return this._tags=tM(tM({},this._tags),e),this._notifyScopeListeners(),this},e.prototype.setTag=function(e,t){var n;return this._tags=tM(tM({},this._tags),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setExtras=function(e){return this._extra=tM(tM({},this._extra),e),this._notifyScopeListeners(),this},e.prototype.setExtra=function(e,t){var n;return this._extra=tM(tM({},this._extra),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},e.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},e.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},e.prototype.setTransaction=function(e){return this.setTransactionName(e)},e.prototype.setContext=function(e,t){var n;return null===t?delete this._contexts[e]:this._contexts=tM(tM({},this._contexts),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},e.prototype.getSpan=function(){return this._span},e.prototype.getTransaction=function(){var e=this.getSpan();return e&&e.transaction},e.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},e.prototype.getSession=function(){return this._session},e.prototype.update=function(t){if(!t)return this;if("function"==typeof t){var n=t(this);return n instanceof e?n:this}return t instanceof e?(this._tags=tM(tM({},this._tags),t._tags),this._extra=tM(tM({},this._extra),t._extra),this._contexts=tM(tM({},this._contexts),t._contexts),t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession)):tW(t)&&(this._tags=tM(tM({},this._tags),t.tags),this._extra=tM(tM({},this._extra),t.extra),this._contexts=tM(tM({},this._contexts),t.contexts),t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession)),this},e.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},e.prototype.addBreadcrumb=function(e,t){var n="number"==typeof t?Math.min(t,100):100;if(n<=0)return this;var r=tM({timestamp:t7()},e);return this._breadcrumbs=tU(this._breadcrumbs,[r]).slice(-n),this._notifyScopeListeners(),this},e.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},e.prototype.applyToEvent=function(e,t){if(this._extra&&Object.keys(this._extra).length&&(e.extra=tM(tM({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=tM(tM({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=tM(tM({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=tM(tM({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=tM({trace:this._span.getTraceContext()},e.contexts);var n=this._span.transaction&&this._span.transaction.name;n&&(e.tags=tM({transaction:n},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=tU(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata=this._sdkProcessingMetadata,this._notifyEventProcessors(tU(t$("globalEventProcessors",function(){return[]}),this._eventProcessors),e,t)},e.prototype.setSDKProcessingMetadata=function(e){return this._sdkProcessingMetadata=tM(tM({},this._sdkProcessingMetadata),e),this},e.prototype._notifyEventProcessors=function(e,t,n,r){var o=this;return void 0===r&&(r=0),new t5(function(i,a){var c=e[r];if(null===t||"function"!=typeof c)i(t);else{var s=c(tM({},t),n);tG(s)?s.then(function(t){return o._notifyEventProcessors(e,t,n,r+1).then(i)}).then(null,a):o._notifyEventProcessors(e,s,n,r+1).then(i).then(null,a)}})},e.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(function(t){t(e)}),this._notifyingListeners=!1)},e.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},e}(),nn=function(){function e(e){this.errors=0,this.sid=t2(),this.duration=0,this.status="ok",this.init=!0,this.ignoreDuration=!1;var t=ne();this.timestamp=t,this.started=t,e&&this.update(e)}return e.prototype.update=function(e){if(void 0===e&&(e={}),e.user&&(!this.ipAddress&&e.user.ip_address&&(this.ipAddress=e.user.ip_address),this.did||e.did||(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||ne(),e.ignoreDuration&&(this.ignoreDuration=e.ignoreDuration),e.sid&&(this.sid=32===e.sid.length?e.sid:t2()),void 0!==e.init&&(this.init=e.init),!this.did&&e.did&&(this.did=""+e.did),"number"==typeof e.started&&(this.started=e.started),this.ignoreDuration)this.duration=void 0;else if("number"==typeof e.duration)this.duration=e.duration;else{var t=this.timestamp-this.started;this.duration=t>=0?t:0}e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),!this.ipAddress&&e.ipAddress&&(this.ipAddress=e.ipAddress),!this.userAgent&&e.userAgent&&(this.userAgent=e.userAgent),"number"==typeof e.errors&&(this.errors=e.errors),e.status&&(this.status=e.status)},e.prototype.close=function(e){e?this.update({status:e}):"ok"===this.status?this.update({status:"exited"}):this.update()},e.prototype.toJSON=function(){return function e(t){var n,r;if(tW(t)){var o={};try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.keys(t)),a=i.next();!a.done;a=i.next()){var c=a.value;void 0!==t[c]&&(o[c]=e(t[c]))}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o}return Array.isArray(t)?t.map(e):t}({sid:""+this.sid,init:this.init,started:new Date(1e3*this.started).toISOString(),timestamp:new Date(1e3*this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:{release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent}})},e}(),nr="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,no=function(){function e(e,t,n){void 0===t&&(t=new nt),void 0===n&&(n=4),this._version=n,this._stack=[{}],this.getStackTop().scope=t,e&&this.bindClient(e)}return e.prototype.isOlderThan=function(e){return this._version<e},e.prototype.bindClient=function(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()},e.prototype.pushScope=function(){var e=nt.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},e.prototype.popScope=function(){return!(this.getStack().length<=1)&&!!this.getStack().pop()},e.prototype.withScope=function(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}},e.prototype.getClient=function(){return this.getStackTop().client},e.prototype.getScope=function(){return this.getStackTop().scope},e.prototype.getStack=function(){return this._stack},e.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},e.prototype.captureException=function(e,t){var n=this._lastEventId=t&&t.event_id?t.event_id:t2(),r=t;if(!t){var o=void 0;try{throw Error("Sentry syntheticException")}catch(e){o=e}r={originalException:e,syntheticException:o}}return this._invokeClient("captureException",e,tM(tM({},r),{event_id:n})),n},e.prototype.captureMessage=function(e,t,n){var r=this._lastEventId=n&&n.event_id?n.event_id:t2(),o=n;if(!n){var i=void 0;try{throw Error(e)}catch(e){i=e}o={originalException:e,syntheticException:i}}return this._invokeClient("captureMessage",e,t,tM(tM({},o),{event_id:r})),r},e.prototype.captureEvent=function(e,t){var n=t&&t.event_id?t.event_id:t2();return"transaction"!==e.type&&(this._lastEventId=n),this._invokeClient("captureEvent",e,tM(tM({},t),{event_id:n})),n},e.prototype.lastEventId=function(){return this._lastEventId},e.prototype.addBreadcrumb=function(e,t){var n=this.getStackTop(),r=n.scope,o=n.client;if(r&&o){var i=o.getOptions&&o.getOptions()||{},a=i.beforeBreadcrumb,c=void 0===a?null:a,s=i.maxBreadcrumbs,u=void 0===s?100:s;if(!(u<=0)){var l=t7(),d=tM({timestamp:l},e),p=c?t1(function(){return c(d,t)}):d;null!==p&&r.addBreadcrumb(p,u)}}},e.prototype.setUser=function(e){var t=this.getScope();t&&t.setUser(e)},e.prototype.setTags=function(e){var t=this.getScope();t&&t.setTags(e)},e.prototype.setExtras=function(e){var t=this.getScope();t&&t.setExtras(e)},e.prototype.setTag=function(e,t){var n=this.getScope();n&&n.setTag(e,t)},e.prototype.setExtra=function(e,t){var n=this.getScope();n&&n.setExtra(e,t)},e.prototype.setContext=function(e,t){var n=this.getScope();n&&n.setContext(e,t)},e.prototype.configureScope=function(e){var t=this.getStackTop(),n=t.scope,r=t.client;n&&r&&e(n)},e.prototype.run=function(e){var t=na(this);try{e(this)}finally{na(t)}},e.prototype.getIntegration=function(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return nr&&tX.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},e.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},e.prototype.startTransaction=function(e,t){return this._callExtensionMethod("startTransaction",e,t)},e.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},e.prototype.captureSession=function(e){if(void 0===e&&(e=!1),e)return this.endSession();this._sendSessionUpdate()},e.prototype.endSession=function(){var e=this.getStackTop(),t=e&&e.scope,n=t&&t.getSession();n&&n.close(),this._sendSessionUpdate(),t&&t.setSession()},e.prototype.startSession=function(e){var t=this.getStackTop(),n=t.scope,r=t.client,o=r&&r.getOptions()||{},i=o.release,a=o.environment,c=(tq().navigator||{}).userAgent,s=new nn(tM(tM(tM({release:i,environment:a},n&&{user:n.getUser()}),c&&{userAgent:c}),e));if(n){var u=n.getSession&&n.getSession();u&&"ok"===u.status&&u.update({status:"exited"}),this.endSession(),n.setSession(s)}return s},e.prototype._sendSessionUpdate=function(){var e=this.getStackTop(),t=e.scope,n=e.client;if(t){var r=t.getSession&&t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}},e.prototype._invokeClient=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.getStackTop(),o=r.scope,i=r.client;i&&i[e]&&i[e].apply(i,tU(t,[o]))},e.prototype._callExtensionMethod=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=ni().__SENTRY__;if(r&&r.extensions&&"function"==typeof r.extensions[e])return r.extensions[e].apply(this,t);nr&&tX.warn("Extension method "+e+" couldn't be found, doing nothing.")},e}();function ni(){var e=tq();return e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:void 0},e}function na(e){var t=ni(),n=ns(t);return nu(t,e),n}function nc(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function ns(e){return t$("hub",function(){return new no},e)}function nu(e,t){return!!e&&((e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0)}function nl(e,t){!function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=(nc(t=ni())&&!ns(t).isOlderThan(4)||nu(t,new no),tH()?function(e){try{var t=ni().__SENTRY__,n=t&&t.extensions&&t.extensions.domain&&t.extensions.domain.active;if(!n)return ns(e);if(!nc(n)||ns(n).isOlderThan(4)){var r=ns(e).getStackTop();nu(n,new no(r.client,nt.clone(r.scope)))}return ns(n)}catch(t){return ns(e)}}(t):ns(t));if(o&&o[e])return o[e].apply(o,tU(n));throw Error("No hub defined or "+e+" was not found on the hub, please open a bug report.")}("setTag",e,t)}!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}tR(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(function(){var e=null!==iA&&iA.apply(this,arguments)||this;return e.name="Logger Error",e},iA=Error);try{nl("sessionId",tF.get()),tF.onChange(function(e){nl("sessionId",e)});var nd=(null===(iB=window.Shopline)||void 0===iB?void 0:iB.handle)||(null===(iM=null===(iR=null===(iF=window.__APP_DATA)||void 0===iF?void 0:iF.INITIAL_STATE)||void 0===iR?void 0:iR.stores)||void 0===iM?void 0:iM.domainHandle);nd&&"string"==typeof nd&&nl("handle",nd)}catch(e){console.error("@sl/logger 补充上报tag出错: ",e)}var np=function(){return(np=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function nf(e){return(e||"@sl/logger").replace(RegExp(" ","g"),"")}let nh=[];(tn.appEnvInDevelop()||tn.appEnvInStaging())&&nh.push(function(e){var t,n=e.level,r=e.message,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["level","message"]);console.log("%c[@sl/logger] ".concat(r),((t={})[tx.Info]="#6e6e6e",t[tx.Log]="#2a53cd",t[tx.Warn]="#faad14",t[tx.Error]="#ff4d4f","color: #fff; background-color: ".concat(t[n],"; padding: 4px 8px; border-radius: 4px;")),o)}),nh.push(function(e){var t,n,r,o,i=e.level,a=e.message,c=e.tags,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["level","message","tags"]),u=np(np({},s),{message:a,tags:np(np({},c),{sessionId:tF.get()})});switch(i){case tx.Info:case tx.Log:case tx.Warn:null===(n=null===(t=window.__SL_Track__)||void 0===t?void 0:t.info)||void 0===n||n.call(t,nf(s.owner),u);break;case tx.Error:null===(o=null===(r=window.__SL_Track__)||void 0===r?void 0:r.error)||void 0===o||o.call(r,nf(s.owner),u);break;default:console.error("不是期望的上报类型",i,a,s)}});let ny=tD.pipeTransport(...nh);var nm=e=>ny.pipeOwner("developer-api").pipeOwner(e);let nv="DataReport::AddToCart",ng="DataReport::ViewContent",nb="DataReport::ThirdPart",n_="DataReport::Hiido";var nw=Object.freeze({__proto__:null,ADD_TO_CART:nv,COMPLETE_ORDER:"DataReport::CompleteOrder",HiidoReport:n_,INITIATE_CHECKOUT:"DataReport::InitiateCheckout",PURCHASE:"DataReport::Purchase",ThirdPartReport:nb,VIEW_CONTENT:ng});let nC=nm(`${ng} - EMIT`),nO=window.Shopline&&window.Shopline.event,nS=e=>{if(nO)return nC.info(`${ng} emit`,{data:e}),nO.emit(ng,{data:e,onSuccess:e=>{nC.info("success",{data:{result:e}})},onError:e=>{nC.error("error",{error:e})}})};nS.apiName=ng;let nx=nm(`${nv} - EMIT`),nk=window&&window.Shopline.event,nP=e=>(nx.info(`${nv} emit`,{data:e}),nk.emit(nv,{data:e,interior:nv,onSuccess:e=>{nx.info("success",{data:{result:e}})},onError:e=>{nx.error("error",{error:e})}}));nP.apiName=nv;let nE=!1;function nI(e){let t=window&&window.SL_EventBus;if(!t){console.error(`failed to init ${nb} listener: window?.SL_EventBus not found`);return}t.emit("global:thirdPartReport",{...e||{}})}var nT=function(){let e=window&&window.Shopline.event,t=window&&window.SL_EventBus;if(!e){console.error(`failed to init ${nb} listener: window?.Shopline.event not found`);return}if(!t){console.error(`failed to init ${nb} listener: window?.SL_EventBus not found`);return}nE||(e.on(nb,nI),nE=!0)};let nA=!1;function nD(e){if(!e||!e.event_id){console.error("failed to report to hiido without data and event_id");return}let{event_id:t,...n}=e;window.HdSdk&&window.HdSdk.shopTracker.report(t,n)}var nL=function(){let e=window&&window.Shopline.event;if(!e){console.error(`failed to init ${n_} listener: window?.Shopline.event not found`);return}nA||(e.on(n_,nD),nA=!0)},nj={};!function(e){var t=function(e,n){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,n)};function n(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function o(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((r=r.apply(e,t||[])).next())})}function i(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}let a=new Set(["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","animation","audio","canvas","circle","clipPath","color-profile","cursor","defs","desc","discard","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","handler","hkern","iframe","image","line","linearGradient","listener","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","prefetch","radialGradient","rect","script","set","solidColor","stop","style","svg","switch","symbol","tbreak","text","textArea","textPath","title","tref","tspan","unknown","use","video","view","vkern"]);a.delete("a"),a.delete("audio"),a.delete("canvas"),a.delete("iframe"),a.delete("script"),a.delete("video");let c=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,s=(e,t)=>{for(let[n,r]of Object.entries(t))n.startsWith("-")?e.style.setProperty(n,r):"number"!=typeof r||c.test(n)?e.style[n]=r:e.style[n]=r+"px"},u=e=>"string"==typeof e?a.has(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e):e===DocumentFragment?document.createDocumentFragment():e(e.defaultProps),l=(e,t,n)=>{null!=n&&(/^xlink[AHRST]/.test(t)?e.setAttributeNS("http://www.w3.org/1999/xlink",t.replace("xlink","xlink:").toLowerCase(),n):e.setAttribute(t,n))},d=(e,t)=>{for(let n of t)n instanceof Node?e.appendChild(n):Array.isArray(n)?d(e,n):"boolean"!=typeof n&&null!=n&&e.appendChild(document.createTextNode(n))},p=(e,t,...n)=>{var r;let o=u(e);if(d(o,n),o instanceof DocumentFragment||!t)return o;for(let[e,n]of Object.entries(t))if("htmlFor"===e&&(e="for"),"class"===e||"className"===e){let e=null!==(r=o.getAttribute("class"))&&void 0!==r?r:"";l(o,"class",(e+" "+String(n)).trim())}else if("style"===e)s(o,n);else if(e.startsWith("on")){let t=e.slice(2).toLowerCase().replace(/^-/,"");o.addEventListener(t,n)}else"dangerouslySetInnerHTML"===e&&"__html"in n?o.innerHTML=n.__html:"key"!==e&&!1!==n&&l(o,e,!0===n?"":n);return o};var f=function(){function e(){}return e.prototype.renderToDom=function(e,t){t.length>0&&document.querySelector("#"+t)?(console.log("将挂载到 DOM id 为 "+t+" 的节点上"),document.querySelector("#"+t).appendChild(e)):(console.log("domId 无效，将挂载到 body "),document.querySelector("body").append(e))},e}();function h(e,t){return e(t={exports:{}},t.exports),t.exports}var y=h(function(e,t){e.exports=function(){var e=function(){},t={},n={},r={};function o(e,t){if(e){var o=r[e];if(n[e]=t,o)for(;o.length;)o[0](e,t),o.splice(0,1)}}function i(t,n){t.call&&(t={success:t}),n.length?(t.error||e)(n):(t.success||e)(t)}function a(n,r,a){var c,s;if(r&&r.trim&&(c=r),s=(c?a:r)||{},c){if(c in t)throw"LoadJS";t[c]=!0}function u(t,r){!function(t,n,r){var o,i,a=(t=t.push?t:[t]).length,c=a,s=[];for(o=function(e,t,r){if("e"==t&&s.push(e),"b"==t){if(!r)return;s.push(e)}--a||n(s)},i=0;i<c;i++)!function t(n,r,o,i){var a,c,s=document,u=o.async,l=(o.numRetries||0)+1,d=o.before||e,p=n.replace(/[\?|#].*$/,""),f=n.replace(/^(css|img)!/,"");i=i||0,/(^css!|\.css$)/.test(p)?((c=s.createElement("link")).rel="stylesheet",c.href=f,(a="hideFocus"in c)&&c.relList&&(a=0,c.rel="preload",c.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(p)?(c=s.createElement("img")).src=f:((c=s.createElement("script")).src=n,c.async=void 0===u||u),c.onload=c.onerror=c.onbeforeload=function(e){var s=e.type[0];if(a)try{c.sheet.cssText.length||(s="e")}catch(e){18!=e.code&&(s="e")}if("e"==s){if((i+=1)<l)return t(n,r,o,i)}else if("preload"==c.rel&&"style"==c.as)return c.rel="stylesheet";r(n,s,e.defaultPrevented)},!1!==d(n,c)&&s.head.appendChild(c)}(t[i],o,r)}(n,function(e){i(s,e),t&&i({success:t,error:r},e),o(c,e)},s)}if(s.returnPromise)return new Promise(u);u()}return a.ready=function(e,t){return function(e,t){e=e.push?e:[e];var o,i,a,c=[],s=e.length,u=s;for(o=function(e,n){n.length&&c.push(e),--u||t(c)};s--;)(a=n[i=e[s]])?o(i,a):(r[i]=r[i]||[]).push(o)}(e,function(e){i(t,e)}),a},a.done=function(e){o(e,[])},a.reset=function(){t={},n={},r={}},a.isDefined=function(e){return e in t},a}()}),m=function(e){function t(t,n){var r,a,c=e.call(this)||this;console.log("publicKey",t,"initialData",n),c.publicKey=t,c.initialData=n;var s=(new Date).getTime();c.renderHtml(),y(["https://2pay-js.2checkout.com/v1/2pay.js"],function(){var e,r,a,s,u,l;console.log("--------2checkout.js loaded-------"),c.jsPaymentClient=new TwoPayClient(t.key),n.language&&c.jsPaymentClient.setup.setLanguage(n.language),c.component=c.jsPaymentClient.components.create("card",(r=null==(e=n.styleOption)?void 0:e.commonStyle,s=null==(a=null==e?void 0:e.componentStyle)?void 0:a.cardInputStyle,u=null==a?void 0:a.expirationInputStyle,l=null==a?void 0:a.cvvInputStyle,{margin:0,fontFamily:(null==r?void 0:r.fontFamily)||"Helvetica, sans-serif",fontSize:(null==r?void 0:r.fontSize)||"1rem",fontWeight:(null==r?void 0:r.fontWeight)||"400",color:(null==r?void 0:r.color)||"#212529",textAlign:(null==r?void 0:r.textAlign)||"left",backgroundColor:(null==r?void 0:r.backgroundColor)||"#ffffff","*":{boxSizing:(null==r?void 0:r.boxSizing)||"border-box"},".card-number .control-label":(null==s?void 0:s.labelStyle)||{},".card-number .input-wrapper":(null==s?void 0:s.inputWrapperStyle)||{},".card-number .form-control":(null==s?void 0:s.inputStyle)||{},".card-number .validation-message":(null==s?void 0:s.messageStyle)||{},".card-expiration-date .control-label":(null==u?void 0:u.labelStyle)||{},".card-expiration-date .input-wrapper":(null==u?void 0:u.inputWrapperStyle)||{},".card-expiration-date .form-control":(null==u?void 0:u.inputStyle)||{},".card-expiration-date .validation-message":(null==u?void 0:u.messageStyle)||{},".card-security-code .control-label":(null==l?void 0:l.labelStyle)||{},".card-security-code .input-wrapper":(null==l?void 0:l.inputWrapperStyle)||{},".card-security-code .form-control":(null==l?void 0:l.inputStyle)||{},".card-security-code .validation-message":(null==l?void 0:l.messageStyle)||{},".no-gutters":{marginRight:0,marginLeft:0},".row":{display:"flex",flexWrap:"wrap"},".col":{flexBasis:"0",flexGrow:"1",maxWidth:"100%",padding:"0",position:"relative",width:"100%"},div:{display:"block"},".field-container":{paddingBottom:"14px"},".field-wrapper":{paddingRight:"25px"},".input-wrapper":{position:"relative"},label:{display:"inline-block",marginBottom:"9px",color:"#313131",fontWeight:"300",fontSize:"14px",lineHeight:"17px"},input:{outline:"none",position:"absolute",overflow:"visible",margin:0,fontFamily:"inherit",display:"block",width:"100%",height:"42px",padding:"10px 12px",fontSize:"18px",fontWeight:"400",lineHeight:"22px",color:"#313131",backgroundColor:"#fff",backgroundClip:"padding-box",border:"1px solid #CBCBCB",borderRadius:"3px",transition:"border-color .15s ease-in-out,box-shadow .15s ease-in-out",ontline:"0"},".form-control":{position:"relative"},"input:focus":{border:"1px solid #5D5D5D",backgroundColor:"#FFFDF2"},".is-error input":{border:"1px solid #D9534F"},".is-error input:focus":{backgroundColor:"#D9534F0B"},".is-valid input":{border:"1px solid #1BB43F"},".is-valid input:focus":{backgroundColor:"#1BB43F0B"},".validation-message":{color:"#D9534F",fontSize:"10px",fontStyle:"italic",marginTop:"6px",marginBottom:"-5px",display:"block",lineHeight:"1"},".card-expiration-date":{paddingRight:".5rem"},".is-empty input":{color:"#EBEBEB"},".lock-icon":{top:"calc(50% - 7px)",right:"10px"},".valid-icon":{top:"calc(50% - 8px)",right:"-25px"},".error-icon":{top:"calc(50% - 8px)",right:" -25px"},".card-icon":{top:"calc(50% - 10px)",left:"10px",display:"none"},".is-empty .card-icon":{display:"block"},".is-focused .card-icon":{display:"none"},".card-type-icon":{right:"30px",display:"block"},".card-type-icon.visa":{top:"calc(50% - 14px)"},".card-type-icon.mastercard":{top:"calc(50% - 14.5px)"},".card-type-icon.amex":{top:"calc(50% - 14px)"},".card-type-icon.discover":{top:"calc(50% - 14px)"},".card-type-icon.jcb":{top:"calc(50% - 14px)"},".card-type-icon.dankort":{top:"calc(50% - 14px)"},".card-type-icon.cartebleue":{top:"calc(50% - 14px)"},".card-type-icon.diners":{top:"calc(50% - 14px)"},".card-type-icon.elo":{top:"calc(50% - 14px)"}})),c.component.mount("#card-element"),c.initialData.btnText&&document.getElementById("payment-form").addEventListener("submit",function(e){return o(c,void 0,void 0,function(){var t,n,r,o;return i(this,function(i){switch(i.label){case 0:return e.preventDefault(),t=(null===(o=null===(r=this.initialData)||void 0===r?void 0:r.fieldData)||void 0===o?void 0:o.userName)||document.querySelector("#name").value,[4,this.generateToken(this.jsPaymentClient,this.component,t)];case 1:return n=i.sent(),this.initialData.createToken&&this.initialData.createToken(n),[2]}})})})});var u=(new Date).getTime()-s;return null===(a=null===(r=c.initialData)||void 0===r?void 0:r.reportSDKLoading)||void 0===a||a.call(r,{time:u}),c}return n(t,e),t.prototype.generateToken=function(e,t,n){return o(this,void 0,void 0,function(){var r;return i(this,function(o){switch(o.label){case 0:this.nameOnblur(),r={name:n},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,e.tokens.generate(t,r)];case 2:return[2,o.sent()];case 3:return[2,{error:o.sent().toString().trim().split("\n")[0]}];case 4:return[2]}})})},t.prototype.getToken=function(e){return o(this,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return t=e||document.querySelector("#name").value,[4,this.generateToken(this.jsPaymentClient,this.component,t)];case 1:return[2,n.sent()]}})})},t.prototype.nameOnblur=function(){var e=document.querySelector("#name-field-wrapper"),t=document.querySelector("#name").value,n=document.querySelector("#name-message");t?(n.style.display="none",e.setAttribute("class","name-field-wrapper is-valid")):(n.style.display="inline-block",e.setAttribute("class","name-field-wrapper is-error"))},t.prototype.renderHtml=function(){var e,t,n,o,i,a,c,s,u,l,d,f,h,y,m,v,g,b,_,w={common:(null==(e=null===(f=this.initialData)||void 0===f?void 0:f.styleOption)?void 0:e.commonStyle)||{},form:r({fontFamily:"Helvetica, sans-serif"},(null===(t=null==e?void 0:e.componentStyle)||void 0===t?void 0:t.formStyle)||{}),name:{wrapper:r({paddingBottom:"14px",paddingRight:"25px"},(null===(o=null===(n=null==e?void 0:e.componentStyle)||void 0===n?void 0:n.nameInputStyle)||void 0===o?void 0:o.inputWrapperStyle)||{}),label:r({display:"inline-block",marginBottom:"9px",color:"#313131",fontSize:"14px",fontWeight:"300",lineHeight:"17px"},(null===(a=null===(i=null==e?void 0:e.componentStyle)||void 0===i?void 0:i.nameInputStyle)||void 0===a?void 0:a.labelStyle)||{}),input:r({padding:"10px 12px",outline:"none",margin:0,fontFamily:"inherit",display:"block",width:"100%",height:"42px",fontSize:"18px",fontWeight:"400",lineHeight:"22px",color:"#313131",backgroundClip:"padding-box",borderRadius:"3px",transition:"border-color .15s ease-in-out,box-shadow .15s ease-in-out",ontline:"0"},(null===(s=null===(c=null==e?void 0:e.componentStyle)||void 0===c?void 0:c.nameInputStyle)||void 0===s?void 0:s.inputStyle)||{}),message:r({display:"none",color:"#D9534F",fontSize:"10px",fontStyle:"italic",marginTop:"6px",marginBottom:"-5px",lineHeight:"1"},(null===(l=null===(u=null==e?void 0:e.componentStyle)||void 0===u?void 0:u.nameInputStyle)||void 0===l?void 0:l.messageStyle)||{})},submit:{wrapper:{paddingRight:"25px",width:"100%",textAlign:"center"},button:r({color:"#fff",backgroundColor:"#007bff",borderColor:"#007bff",display:"inline-block",fontWeight:"400",textAlign:"center",verticalAlign:"middle",border:"1px solid transparent",padding:".375rem .75rem",fontSize:"1rem",lineHeight:"1.5",borderRadius:".25rem"},(null===(d=null==e?void 0:e.componentStyle)||void 0===d?void 0:d.btnStyle)||{})}},C={nameOnblur:this.nameOnblur,userNamePlaceholder:null===(y=null===(h=this.initialData)||void 0===h?void 0:h.placeholder)||void 0===y?void 0:y.userNamePlaceholder,nameInputText:null===(v=null===(m=this.initialData)||void 0===m?void 0:m.label)||void 0===v?void 0:v.userNameLabel,submitBtnText:null===(g=this.initialData)||void 0===g?void 0:g.btnText,nameMessageText:null===(_=null===(b=this.initialData)||void 0===b?void 0:b.errorTips)||void 0===_?void 0:_.userNameErrorTips,style:w};this.renderToDom(p("div",{className:"two-checkout",style:C.style.common},p("div",{dangerouslySetInnerHTML:{__html:"<style>\n        .two-checkout * {\n          box-sizing: border-box;\n        }\n        .name-input {\n          border: 1px solid #CBCBCB;\n          background-color: #fff,\n        }\n        input:focus {\n          border          : 1px solid #5D5D5D;\n          background-color: #FFFDF2;\n        }\n        \n        .is-error input {\n          border: 1px solid #D9534F;\n        }\n        \n        .is-error input:focus {\n          background-color: #D9534F0B;\n        }\n        \n        .is-valid input {\n          border: 1px solid #1BB43F;\n        }\n        \n        .is-valid input:focus {\n          background-color: #1BB43F0B;\n        }\n                </style>"}}),p("form",{type:"post",id:"payment-form",style:C.style.form},p("div",{className:"twocheckout-group"},(null==C?void 0:C.nameInputText)?p("div",{id:"name-field-wrapper",class:"name-field-wrapper",style:C.style.name.wrapper},p("label",{for:"name",class:"name-label",style:C.style.name.label},null==C?void 0:C.nameInputText),p("input",{type:"text",id:"name",name:"name",class:"name-input",style:C.style.name.input,oninput:function(e){e.target.value=e.target.value.replace(/[1-9]/g,"")},placeholder:""+((null==C?void 0:C.userNamePlaceholder)||""),onblur:function(){C.nameOnblur()}}),p("span",{id:"name-message",style:C.style.name.message},C.nameMessageText||"Card holder name is empty.")):null,p("div",{id:"card-element",className:"card-element"}),(null==C?void 0:C.submitBtnText)?p("div",{style:C.style.submit.wrapper},p("button",{className:"twocheckout-btn",style:C.style.submit.button,type:"submit"},null==C?void 0:C.submitBtnText)):null))),this.initialData.domId)},t}(f),v=function(e){null==e||e.commonStyle;var t=null==e?void 0:e.componentStyle,n=null==t?void 0:t.formStyle,o=null==t?void 0:t.nameInputStyle,i=null==t?void 0:t.cardInputStyle,a=null==t?void 0:t.expirationInputStyle,c=null==t?void 0:t.cvvInputStyle,s=null==t?void 0:t.btnStyle;return{ebanx_payment_form:r({width:"100%"},n||{}),ebanx_nameInputStyle_inputWrapperStyle:r({width:"100%",margin:"10px 0"},(null==o?void 0:o.inputWrapperStyle)||{}),ebanx_nameInputStyle_labelStyle:r({display:"block",fontWeight:400,fontSize:"15px",marginBottom:"8px"},(null==o?void 0:o.labelStyle)||{}),ebanx_nameInputStyle_inputStyle:r({width:"100%",padding:"18px 15px",borderRadius:"6px",color:"#000000",background:"#F3F3F3",border:"0px",fontSize:"16px",outline:"none"},(null==o?void 0:o.inputStyle)||{}),ebanx_nameInputStyle_messageStyle:{},ebanx_cardInputStyle_inputWrapperStyle:r({width:"100%",margin:"10px 0"},(null==i?void 0:i.inputWrapperStyle)||{}),ebanx_cardInputStyle_labelStyle:r({display:"block",fontWeight:400,fontSize:"15px",marginBottom:"8px"},(null==i?void 0:i.labelStyle)||{}),ebanx_cardInputStyle_inputStyle:r({width:"100%",padding:"18px 15px",borderRadius:"6px",color:"#000000",background:"#F3F3F3",border:"0px",fontSize:"16px",outline:"none"},(null==i?void 0:i.inputStyle)||{}),ebanx_cardInputStyle_messageStyle:{},ebanx_flex_style:{display:"flex",justifyContent:"space-between",alignItems:"center"},ebanx_expirationInputStyle_inputWrapperStyle:r({width:"48%",margin:"10px 0"},(null==a?void 0:a.inputWrapperStyle)||{}),ebanx_expirationInputStyle_labelStyle:r({display:"block",fontWeight:400,fontSize:"15px",marginBottom:"8px"},(null==a?void 0:a.labelStyle)||{}),ebanx_expirationInputStyle_inputStyle:r({width:"100%",padding:"18px 15px",borderRadius:"6px",color:"#000000",background:"#F3F3F3",border:"0px",fontSize:"16px",outline:"none"},(null==a?void 0:a.inputStyle)||{}),ebanx_expirationInputStyle_messageStyle:{},ebanx_cvvInputStyle_inputWrapperStyle:r({width:"48%",margin:"10px 0"},(null==c?void 0:c.inputWrapperStyle)||{}),ebanx_cvvInputStyle_labelStyle:r({display:"block",fontWeight:400,fontSize:"15px",marginBottom:"8px"},(null==c?void 0:c.labelStyle)||{}),ebanx_cvvInputStyle_inputStyle:r({width:"100%",padding:"18px 15px",borderRadius:"6px",color:"#000000",background:"#F3F3F3",border:"0px",fontSize:"16px",outline:"none"},(null==c?void 0:c.inputStyle)||{}),ebanx_cvvInputStyle_messageStyle:{},ebanx_error_tips:r(r(r(r({marginTop:"-10px",lineHeight:"18px",minHeight:"20px",color:"red"},(null==o?void 0:o.messageStyle)||{}),(null==i?void 0:i.messageStyle)||{}),(null==a?void 0:a.messageStyle)||{}),(null==c?void 0:c.messageStyle)||{}),ebanx_submit_btn:r({position:"relative",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",color:"#ffffff",padding:"15px",fontSize:"16px",opacity:1,background:(null==s?void 0:s.disableBackground)||(null==s?void 0:s.background)||"#dddddd",outline:"none",border:"0px",borderRadius:"6px"},s)}},g=function(e){function t(t,n){var r,o,i=e.call(this)||this;return i.publicKey=t,i.initialData=n,i.userNameErrorTips="",i.cardNumberErrorTips="",i.expirationErrorTips="",i.cvvErrorTips="",i.userName="",i.cardNumber="",i.expiration="",i.cvv="",i.loadEBANXJS(),i.renderHtml(),(null===(r=i.initialData)||void 0===r?void 0:r.isWith3DS)&&i.checkoutFieldData((null===(o=i.initialData)||void 0===o?void 0:o.fieldData)||{}),i}return n(t,e),t.prototype.loadEBANXJS=function(){var e,t,n=this,r=(new Date).getTime();y(["https://js.ebanx.com/assets/songbird/songbird-"+(null!==(t=null===(e=this.initialData)||void 0===e?void 0:e.env)&&void 0!==t?t:"dev")+".js","https://js.ebanx.com/ebanx-libjs-latest.min.js"],function(){console.log("success",EBANX),EBANX.config.setMode("prod"===(null===(e=n.initialData)||void 0===e?void 0:e.env)?"production":"test"),EBANX.config.setPublishableKey(n.publicKey.key),EBANX.config.setCountry((null===(o=null===(t=n.initialData)||void 0===t?void 0:t.country)||void 0===o?void 0:o.toLowerCase())||"br");var e,t,o,i,a,c=(new Date).getTime()-r;null===(a=null===(i=n.initialData)||void 0===i?void 0:i.reportSDKLoading)||void 0===a||a.call(i,{time:c})})},t.prototype.renderHtml=function(){var e,t,n,r,o,i,a,c,s,u,l,d,f,h,y,m,g,b,_,w,C,O,S,x,k,P,E,I,T,A,D,L,j,N,B,F,R,M,U,H=v(null===(N=this.initialData)||void 0===N?void 0:N.styleOption);this.renderToDom((e={submit:this.submit.bind(this),changeUserName:this.changeUserName.bind(this),changeCardNumber:this.changeCardNumber.bind(this),changeExpiration:this.changeExpiration.bind(this),changeCVV:this.changeCVV.bind(this),label:null===(B=this.initialData)||void 0===B?void 0:B.label,placeholder:null===(F=this.initialData)||void 0===F?void 0:F.placeholder,btnText:null===(R=this.initialData)||void 0===R?void 0:R.btnText,styleOption:H,userName:null===(U=null===(M=this.initialData)||void 0===M?void 0:M.fieldData)||void 0===U?void 0:U.userName},p("div",{className:"ebanx_cover"},p("div",{dangerouslySetInnerHTML:{__html:"<style>\n        .ebanx_cover * {\n          box-sizing: border-box !important;\n          margin: 0;\n          padding: 0;\n        }\n        .ebanx_cover input::placeholder{\n          color: #999999 !important;\n        }\n        </style>"}}),p("div",{className:"ebanx_payment_form",style:e.styleOption.ebanx_payment_form},!e.userName&&p("div",{calssName:"ebanx_nameInputStyle_inputWrapperStyle",style:e.styleOption.ebanx_nameInputStyle_inputWrapperStyle},(null===(t=null==e?void 0:e.label)||void 0===t?void 0:t.userNameLabel)&&p("label",{for:"ebanx_user_name",className:"ebanx_nameInputStyle_labelStyle",style:null===(n=e.styleOption)||void 0===n?void 0:n.ebanx_nameInputStyle_labelStyle},null!==(o=null===(r=null==e?void 0:e.label)||void 0===r?void 0:r.userNameLabel)&&void 0!==o?o:"User Name"),p("input",{placeholder:""+(null!==(a=null===(i=null==e?void 0:e.placeholder)||void 0===i?void 0:i.userNamePlaceholder)&&void 0!==a?a:"User Name"),type:"text",id:"ebanx_user_name",className:"ebanx_nameInputStyle_inputStyle",style:null===(c=e.styleOption)||void 0===c?void 0:c.ebanx_nameInputStyle_inputStyle,onkeyup:function(t){e.changeUserName(t,"onkeyup")},onblur:function(t){e.changeUserName(t,"onblur")}})),p("div",{className:"ebanx_cardInputStyle_inputWrapperStyle",style:e.styleOption.ebanx_cardInputStyle_inputWrapperStyle},(null===(s=null==e?void 0:e.label)||void 0===s?void 0:s.cardNumberLabel)&&p("label",{for:"ebanx_card_number",className:"ebanx_cardInputStyle_labelStyle",style:null===(u=e.styleOption)||void 0===u?void 0:u.ebanx_cardInputStyle_labelStyle},null!==(d=null===(l=null==e?void 0:e.label)||void 0===l?void 0:l.cardNumberLabel)&&void 0!==d?d:"Card Number"),p("div",null,p("input",{placeholder:""+(null!==(h=null===(f=null==e?void 0:e.placeholder)||void 0===f?void 0:f.cardNumberPlaceholder)&&void 0!==h?h:"Card Number"),type:"text",maxlength:"23",id:"ebanx_card_number",className:"ebanx_cardInputStyle_inputStyle",style:null===(y=e.styleOption)||void 0===y?void 0:y.ebanx_cardInputStyle_inputStyle,oninput:function(e){var t,n,r,o;e.target.value=null===(o=null===(r=null===(n=null===(t=e.target.value)||void 0===t?void 0:t.replace(/\D/g,""))||void 0===n?void 0:n.replace(/(\d{4})/g,"$1 "))||void 0===r?void 0:r.trim())||void 0===o?void 0:o.slice(0,23)},onkeyup:function(t){var n,r,o,i;t.target.value=null===(i=null===(o=null===(r=null===(n=t.target.value)||void 0===n?void 0:n.replace(/\D/g,""))||void 0===r?void 0:r.replace(/(\d{4})/g,"$1 "))||void 0===o?void 0:o.trim())||void 0===i?void 0:i.slice(0,23),e.changeCardNumber(t,"onkeyup")},onblur:function(t){e.changeCardNumber(t,"onblur")}}))),p("div",{className:"ebanx_flex_style",style:e.styleOption.ebanx_flex_style},p("div",{className:"ebanx_expirationInputStyle_inputWrapperStyle",style:e.styleOption.ebanx_expirationInputStyle_inputWrapperStyle},(null===(m=null==e?void 0:e.label)||void 0===m?void 0:m.expirationLabel)&&p("label",{for:"ebanx_card_due_date",className:"ebanx_expirationInputStyle_labelStyle",style:null===(g=e.styleOption)||void 0===g?void 0:g.ebanx_expirationInputStyle_labelStyle},null!==(_=null===(b=null==e?void 0:e.label)||void 0===b?void 0:b.expirationLabel)&&void 0!==_?_:"Card Due Date"),p("input",{placeholder:(null!==(C=null===(w=null==e?void 0:e.placeholder)||void 0===w?void 0:w.expiryMonthPlaceholder)&&void 0!==C?C:"MM")+"/"+(null!==(S=null===(O=null==e?void 0:e.placeholder)||void 0===O?void 0:O.expiryYearPlaceholder)&&void 0!==S?S:"YYYY"),type:"text",id:"ebanx_card_due_date",className:"ebanx_expirationInputStyle_inputStyle",style:null===(x=e.styleOption)||void 0===x?void 0:x.ebanx_expirationInputStyle_inputStyle,onblur:function(t){e.changeExpiration(t,"onblur")},onkeyup:function(t){var n,r,o;t.target.value=null===(o=null===(r=null===(n=t.target.value)||void 0===n?void 0:n.replace(/\D/g,""))||void 0===r?void 0:r.slice(0,6))||void 0===o?void 0:o.replace(/^(\d{2})\/?(\d{0,})$/,function(e,t,n){return""+t+(n?"/"+n:n)}),e.changeExpiration(t,"onkeyup")}})),p("div",{className:"ebanx_cvvInputStyle_inputWrapperStyle",style:e.styleOption.ebanx_cvvInputStyle_inputWrapperStyle},(null===(k=null==e?void 0:e.label)||void 0===k?void 0:k.cvvLabel)&&p("label",{for:"ebanx_card_cvv",className:"ebanx_cvvInputStyle_labelStyle",style:null===(P=e.styleOption)||void 0===P?void 0:P.ebanx_cvvInputStyle_labelStyle},null!==(I=null===(E=null==e?void 0:e.label)||void 0===E?void 0:E.cvvLabel)&&void 0!==I?I:"Card Cvv"),p("input",{placeholder:""+(null!==(A=null===(T=null==e?void 0:e.placeholder)||void 0===T?void 0:T.cvvPlaceholder)&&void 0!==A?A:"Cvv"),type:"text",maxlength:"4",id:"ebanx_card_cvv",className:"ebanx_cvvInputStyle_inputStyle",style:null===(D=e.styleOption)||void 0===D?void 0:D.ebanx_cvvInputStyle_inputStyle,oninput:function(e){var t,n;e.target.value=null===(n=null===(t=e.target.value)||void 0===t?void 0:t.replace(/\D/g,""))||void 0===n?void 0:n.slice(0,4)},onkeyup:function(t){var n,r;t.target.value=null===(r=null===(n=t.target.value)||void 0===n?void 0:n.replace(/\D/g,""))||void 0===r?void 0:r.slice(0,4),e.changeCVV(t,"onkeyup")},onblur:function(t){e.changeCVV(t,"onblur")}}))),p("div",{id:"ebanx_error_tips",className:"ebanx_error_tips",style:e.styleOption.ebanx_error_tips}),(null==e?void 0:e.btnText)&&p("button",{type:"submit",id:"ebanx_submit_btn",className:"ebanx_submit_btn",style:null===(L=e.styleOption)||void 0===L?void 0:L.ebanx_submit_btn,disabled:!0,onClick:function(t){null==e||e.submit(t)}},null!==(j=null==e?void 0:e.btnText)&&void 0!==j?j:"OK")))),this.initialData.domId)},t.prototype.fieldOnChange=function(e,t){var n,r,o,i,a,c;e.message||(!this.userNameErrorTips||(null===(r=null===(n=this.initialData)||void 0===n?void 0:n.fieldData)||void 0===r?void 0:r.userName)||(e.message=this.userNameErrorTips,e.param="username"),this.cardNumberErrorTips&&(e.message=this.cardNumberErrorTips,e.param="cardnumber"),this.expirationErrorTips&&(e.message=this.expirationErrorTips,e.param="expiration"),this.cvvErrorTips&&(e.message=this.cvvErrorTips,e.param="cvv")),"onblur"!==t&&e.message||(document.getElementById("ebanx_error_tips").innerText=e.message),"onblur"===t&&(null===(i=null===(o=this.initialData)||void 0===o?void 0:o.fieldOnBlur)||void 0===i||i.call(o,e)),"onkeyup"===t&&(null===(c=null===(a=this.initialData)||void 0===a?void 0:a.fieldOnChange)||void 0===c||c.call(a,e)),this.fieldComplete()},t.prototype.fieldComplete=function(){var e,t,n,r,o,i,a,c,s,u,l,d,p=document.getElementById("ebanx_submit_btn");((null===(t=null===(e=this.initialData)||void 0===e?void 0:e.fieldData)||void 0===t?void 0:t.userName)||!this.userNameErrorTips&&this.userName)&&!this.cardNumberErrorTips&&!this.expirationErrorTips&&!this.cvvErrorTips&&this.cardNumber&&this.expiration&&this.cvv?(console.log("表单填写完成"),p.removeAttribute("disabled"),p.style.background=(null===(i=null===(o=null===(r=null===(n=this.initialData)||void 0===n?void 0:n.styleOption)||void 0===r?void 0:r.componentStyle)||void 0===o?void 0:o.btnStyle)||void 0===i?void 0:i.normalBackground)||"#ffc102",null===(c=null===(a=this.initialData)||void 0===a?void 0:a.fieldComplete)||void 0===c||c.call(a,{userName:this.userName,cardNumber:this.cardNumber,expiration:this.expiration,cvv:this.cvv})):(console.log("表单没填写完成"),p.setAttribute("disabled","disabled"),p.style.background=(null===(d=null===(l=null===(u=null===(s=this.initialData)||void 0===s?void 0:s.styleOption)||void 0===u?void 0:u.componentStyle)||void 0===l?void 0:l.btnStyle)||void 0===d?void 0:d.disableBackground)||"#dddddd")},t.prototype.changeUserName=function(e,t){var n,r,o;this.userName=e.target.value,o=this.userName,/^[\s\S]{2,50}$/.test(o)?this.userNameErrorTips="":this.userNameErrorTips=(null===(r=null===(n=this.initialData)||void 0===n?void 0:n.errorTips)||void 0===r?void 0:r.userNameErrorTips)||"The username is incorrect.",this.fieldOnChange({message:this.userNameErrorTips,param:"username"},t)},t.prototype.changeCardNumber=function(e,t,n){var r,a;return o(this,void 0,void 0,function(){return i(this,function(o){return this.cardNumber=e.target.value,n&&this.cardNumber.length!==n||(function(e){var t=(e+"").replace(/[\D]/g,"");if(!/^\d{12,19}$/.test(t))return!1;for(var n=t.split("").reverse(),r=parseInt(n.shift(),10),o=n.length,i=o,a=0;i>0;i--){var c=o-i,s=parseInt(n[c],10),u=s;if(c%2==0){var l=2*s;switch(l){case 10:u=1;break;case 12:u=3;break;case 14:u=5;break;case 16:u=7;break;case 18:u=9;break;default:u=l}}a+=u}return parseInt((9*a+"").replace(/\d+(\d$)/,"$1"),10)===r}(this.cardNumber)?this.cardNumberErrorTips="":this.cardNumberErrorTips=(null===(a=null===(r=this.initialData)||void 0===r?void 0:r.errorTips)||void 0===a?void 0:a.cardNumberErrorTips)||"The card number is incorrect.",this.fieldOnChange({message:this.cardNumberErrorTips,param:"cardnumber"},t)),[2]})})},t.prototype.changeExpiration=function(e,t){var n,r,o,i,a,c,s,u,l;this.expiration=e.target.value,o=this.expiration,a=(i=new Date).getFullYear(),c=i.getMonth()+1,u=Number((s=o.split("/"))[1]),l=Number(s[0]),this.expirationErrorTips=l<1||l>12||!(a<u||a===u&&c<=l)?(null===(r=null===(n=this.initialData)||void 0===n?void 0:n.errorTips)||void 0===r?void 0:r.expirationErrorTips)||"The card’s expiration date is incorrect.":"",this.fieldOnChange({message:this.expirationErrorTips,param:"expiration"},t)},t.prototype.changeCVV=function(e,t){var n,r,o;this.cvv=e.target.value,o=this.cvv,/^\d{3,4}$/.test(o)?this.cvvErrorTips="":this.cvvErrorTips=(null===(r=null===(n=this.initialData)||void 0===n?void 0:n.errorTips)||void 0===r?void 0:r.cvvErrorTips)||"The card’s security code is incorrect.",this.fieldOnChange({message:this.cvvErrorTips,param:"cvv"},t)},t.prototype.submit=function(e){var t,n,r,o,i,a,c,s,u=document.getElementById("ebanx_submit_btn");u.setAttribute("disabled","disabled");var l=v(null===(t=this.initialData)||void 0===t?void 0:t.styleOption),d=document.createElement("style");d.type="text/css",d.innerHTML="\n      @keyframes loading {\n        0% {transform: rotate(0deg);}\n        100% {transform: rotate(360deg);}\n      }\n    ";var p=document.createElement("div");p.setAttribute("style","\n        width: "+(null===(n=null==l?void 0:l.ebanx_submit_btn)||void 0===n?void 0:n.fontSize)+";\n        height: "+(null===(r=null==l?void 0:l.ebanx_submit_btn)||void 0===r?void 0:r.fontSize)+";\n        border: 2px solid;\n        border-color: #fff #fff transparent;\n        border-radius: 50%;\n        animation: loading 1.2s linear infinite;\n      "),u.innerHTML="",u.appendChild(d),u.appendChild(p);var f=null===(i=null===(o=document.getElementById("ebanx_card_number"))||void 0===o?void 0:o.value)||void 0===i?void 0:i.replace(/\D/g,""),h=(null===(c=null===(a=this.initialData)||void 0===a?void 0:a.fieldData)||void 0===c?void 0:c.userName)||document.getElementById("ebanx_user_name").value,y=document.getElementById("ebanx_card_due_date").value,m=document.getElementById("ebanx_card_cvv").value;(null===(s=this.initialData)||void 0===s?void 0:s.isWith3DS)?this.isWith3DSSubmit({cardNumber:f,userName:h,cardDueDate:y,cardCvv:m}):this.isWithout3DSSubmit({cardNumber:f,userName:h,cardDueDate:y,cardCvv:m})},t.prototype.isWithout3DSSubmit=function(e){var t=e.cardNumber,n=e.userName,r=e.cardDueDate,o=e.cardCvv;this.successCallToken({cardNumber:t,userName:n,cardDueDate:r,cardCvv:o})},t.prototype.isWith3DSSubmit=function(e){var t=this,n=e.cardNumber,r=e.userName,o=e.cardDueDate,i=e.cardCvv,a=this.initialData.fieldData,c=void 0===a?{}:a,s=c.orderAmount,u=c.orderCurrency,l=c.shipAddress,d=c.shipCountry,p=c.shipState,f=c.shipCity,h=c.shipZip,y=c.email,m=c.shipPhone,v=c.homePhone,g=c.CPF;try{this.checkoutFieldData(c);var b={orderInformation:{amountDetails:{totalAmount:s,currency:u},billTo:{address1:l,administrativeArea:p,country:d||"BR",email:y,homePhone:v||m,locality:f,postalCode:h,mobilePhone:m}},paymentInformation:{card:{number:n,expirationMonth:o.split("/")[0],expirationYear:o.split("/")[1],holderName:r}},personalIdentification:{id:g,type:"CPF"}};console.log("3DS校验传参：",b),EBANX.threedsecure.checkIfShouldAuthenticate(b).then(function(e){e?EBANX.threedsecure.run(b).then(function(e){t.successCallToken({cardNumber:n,userName:r,cardDueDate:o,cardCvv:i,threedsEci:e.threeds_eci,threedsCryptogram:e.threeds_cryptogram,threedsXid:e.threeds_xid,threedsVersion:e.threeds_version,threedsTrxid:e.threeds_trxid})}).catch(function(e){console.log("进行threedsecure时出错"),t.failureCall(e)}):t.successCallToken({cardNumber:n,userName:r,cardDueDate:o,cardCvv:i})}).catch(function(e){console.log("checkIfShouldAuthenticate时出错"),t.failureCall(e)})}catch(e){console.error("传参缺失",e)}},t.prototype.failureCall=function(e){var t,n,r,o=document.getElementById("ebanx_submit_btn");null===(t=null==o?void 0:o.removeAttribute)||void 0===t||t.call(o,"disabled"),o&&(o.innerHTML=null!==(r=null===(n=this.initialData)||void 0===n?void 0:n.btnText)&&void 0!==r?r:"OK"),document.getElementById("ebanx_error_tips").textContent=null==e?void 0:e.toString(),console.error("failureCall",e)},t.prototype.successCallToken=function(e){var t=this,n=e.cardNumber,o=e.userName,i=e.cardDueDate,a=e.cardCvv,c=e.threedsEci,s=e.threedsCryptogram,u=e.threedsXid,l=e.threedsVersion,d=e.threedsTrxid;console.log("successCallToken");var p=document.getElementById("ebanx_submit_btn");EBANX.card.createToken({card_number:n,card_name:o,card_due_date:i,card_cvv:a,threeds_eci:c,threeds_cryptogram:s,threeds_xid:u,threeds_version:l,threeds_trxid:d},function(e){if(null===(n=null==p?void 0:p.removeAttribute)||void 0===n||n.call(p,"disabled"),p&&(p.innerHTML=null!==(i=null===(o=t.initialData)||void 0===o?void 0:o.btnText)&&void 0!==i?i:"OK"),null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.hasOwnProperty("status"));else{var n,o,i,a,f,h,y,m,v,g,b=(null===(h=null===(f=null==e?void 0:e.error)||void 0===f?void 0:f.err)||void 0===h?void 0:h.status_message)||(null===(m=null===(y=null==e?void 0:e.error)||void 0===y?void 0:y.err)||void 0===m?void 0:m.message)||"";document.getElementById("ebanx_error_tips").textContent=b}var _=r({},e),w={};c&&(w.threeds_eci=c),s&&(w.threeds_cryptogram=s),u&&(w.threeds_xid=u),l&&(w.threeds_version=l),d&&(w.threeds_trxid=d),Object.keys(w).length>0&&(_.threedSecure=w),null===(g=null===(v=t.initialData)||void 0===v?void 0:v.createToken)||void 0===g||g.call(v,_)})},t.prototype.checkoutFieldData=function(e){var t=e.orderAmount,n=e.orderCurrency,r=e.shipAddress,o=e.shipCountry,i=e.shipState,a=e.shipCity,c=e.shipZip,s=e.email,u=e.shipPhone;e.homePhone;var l={orderAmount:t,orderCurrency:n,shipAddress:r,shipCountry:o,shipState:i,shipCity:a,shipZip:c,email:s,shipPhone:u,CPF:e.CPF};for(var d in l)if(!l[d])throw this.failureCall("initialData.fieldData."+d+" cannot be null"),"initialData.fieldData."+d+"参数不能为null"},t.prototype.getToken=function(){return o(this,void 0,void 0,function(){var e=this;return i(this,function(t){return console.log("getToken"),[2,new Promise(function(t,n){var r,o;EBANX.card.createToken({card_number:document.getElementById("ebanx_card_number").value,card_name:(null===(o=null===(r=e.initialData)||void 0===r?void 0:r.fieldData)||void 0===o?void 0:o.userName)||document.getElementById("ebanx_user_name").value,card_due_date:document.getElementById("ebanx_card_due_date").value,card_cvv:document.getElementById("ebanx_card_cvv").value},function(e){var r,o,i,a,c;if(null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.hasOwnProperty("status"))t(e);else{var s=(null===(i=null===(o=null==e?void 0:e.error)||void 0===o?void 0:o.err)||void 0===i?void 0:i.status_message)||(null===(c=null===(a=null==e?void 0:e.error)||void 0===a?void 0:a.err)||void 0===c?void 0:c.message)||"";document.getElementById("ebanx_error_tips").textContent=s,n(e)}})})]})})},t}(f),b=function(e){function t(t,n){var r,o,i=e.call(this)||this;i.publicKey=t,i.initialData=n;var a=(new Date).getTime();i.renderHtml();var c=(new Date).getTime()-a;return null===(o=null===(r=i.initialData)||void 0===r?void 0:r.reportSDKLoading)||void 0===o||o.call(r,{time:c}),i}return n(t,e),t.prototype.getToken=function(){return o(this,void 0,void 0,function(){return i(this,function(e){return[2,""]})})},t.prototype.sdkFormOnLoad=function(e){e?console.log("curSrc",e.contentWindow.location.href):console.log("curSrc iframe not init")},t.prototype.renderHtml=function(){console.log("this.publicKey.key",this.publicKey.key);var e=this.publicKey.key.split("?")[0],t=decodeURIComponent(this.publicKey.key).match(/(\w+)=([^=&]+)/gi),n={};console.log("iframeAction",e),console.log("keyArray",t),t&&t.length>0&&t.forEach(function(e){var t=e.split("=");n[t[0]]=t[1]}),n.cssUrl=this.initialData.rewriteCssUrl||"https://unpkg.com/@efox/pay@1.0.32/assets/oceanpay/rewrite.css",n.iframeOnload=this.sdkFormOnLoad,n.action=e,this.renderToDom(p(DocumentFragment,null,p("form",{action:n.action||"https://secure.oceanpayment.com/gateway/service/pay",id:"creditcard_payment_checkout",name:"creditcard_payment_checkout",method:"POST",target:"ifrm_creditcard_checkout"},p("input",{type:"hidden",name:"account",value:n.account}),p("input",{type:"hidden",name:"terminal",value:n.terminal}),p("input",{type:"hidden",name:"order_number",value:n.order_number}),p("input",{type:"hidden",name:"order_currency",value:n.order_currency}),p("input",{type:"hidden",name:"order_amount",value:n.order_amount}),p("input",{type:"hidden",name:"signValue",value:n.signValue}),p("input",{type:"hidden",name:"backUrl",value:n.backUrl}),p("input",{type:"hidden",name:"billing_firstName",value:n.billing_firstName}),p("input",{type:"hidden",name:"billing_lastName",value:n.billing_lastName}),p("input",{type:"hidden",name:"billing_email",value:n.billing_email}),p("input",{type:"hidden",name:"billing_phone",value:n.billing_phone}),p("input",{type:"hidden",name:"billing_country",value:n.billing_country}),p("input",{type:"hidden",name:"billing_city",value:n.billing_city}),p("input",{type:"hidden",name:"billing_address",value:n.billing_address}),p("input",{type:"hidden",name:"billing_zip",value:n.billing_zip}),p("input",{type:"hidden",name:"productSku",value:n.productSku}),p("input",{type:"hidden",name:"productName",value:n.productName}),p("input",{type:"hidden",name:"productNum",value:n.productNum}),p("input",{type:"hidden",name:"cssUrl",value:n.cssUrl})),p("iframe",{width:"100%",height:"100%",scrolling:"auto",name:"ifrm_creditcard_checkout",id:"ifrm_creditcard_checkout",onLoad:n.iframeOnload(void 0)})),this.initialData.domId),document.querySelector("#creditcard_payment_checkout").submit()},t}(f),_=function(e){function t(t,n){var r=e.call(this)||this;return r.publicKey=t,r.initialData=n,r.paypalInstanceName="paypal",window.__PAYPALSPB_LOADJS||(window.__PAYPALSPB_LOADJS=y,window.__PAYPALSPB_LOADJS.ids={}),r.loadPAYPALPSB(),r.renderHtml(),r}return n(t,e),t.prototype.loadPAYPALPSB=function(){var e,t,n,r,o,i,a,c,s,u=this,l=(new Date).getTime(),d="https://www.paypal.com/sdk/js?client-id="+(null===(e=this.publicKey)||void 0===e?void 0:e.key)+"&currency="+((null===(n=null===(t=this.publicKey)||void 0===t?void 0:t.expand)||void 0===n?void 0:n.currency)||"USD");(null===(r=this.initialData)||void 0===r?void 0:r.isContinue)&&(d+="&intent=capture&commit=false"),(null===(o=this.initialData)||void 0===o?void 0:o.disableFunding)&&(d+="&disable-funding="+(null===(i=this.initialData)||void 0===i?void 0:i.disableFunding)),(null===(a=this.initialData)||void 0===a?void 0:a.paypalQueryParams)&&(d+="&"+this.initialData.paypalQueryParams);var p=d,f={success:function(){window.__PAYPALSPB_LOADJS.ids[p]=!0,u.spbInit(d,l)}};(null===(c=this.initialData)||void 0===c?void 0:c.paypalScriptParams)&&(f.before=function(e,t){Object.keys(u.initialData.paypalScriptParams).forEach(function(e){var n=u.initialData.paypalScriptParams[e];t.setAttribute(e,n)})},(null===(s=this.initialData.paypalScriptParams)||void 0===s?void 0:s["data-namespace"])&&(this.paypalInstanceName=this.initialData.paypalScriptParams["data-namespace"]),Object.keys(this.initialData.paypalScriptParams).forEach(function(e){var t=u.initialData.paypalScriptParams[e];p+=e+"&"+t})),window.__PAYPALSPB_LOADJS.ids[p]?window.__PAYPALSPB_LOADJS.ready(p,f):(window.__PAYPALSPB_LOADJS.ids[p]=!0,window.__PAYPALSPB_LOADJS([d],p,f))},t.prototype.spbInit=function(e,t){var n,a,c,s,u,l,d,p,f,h,y,m,v,g=this,b=(new Date).getTime()-t;null===(s=null===(c=this.initialData)||void 0===c?void 0:c.reportSDKLoading)||void 0===s||s.call(c,{time:b});var _=(a=null==(n=null===(u=this.initialData)||void 0===u?void 0:u.styleOption)?void 0:n.commonStyle,null==n||n.componentStyle,r({},a));window[this.paypalInstanceName].Buttons(r({style:{layout:(null===(l=null==_?void 0:_.paypalSPBStyle)||void 0===l?void 0:l.layout)||"vertical",color:(null===(d=null==_?void 0:_.paypalSPBStyle)||void 0===d?void 0:d.color)||"gold",shape:(null===(p=null==_?void 0:_.paypalSPBStyle)||void 0===p?void 0:p.shape)||"rect",label:(null===(f=null==_?void 0:_.paypalSPBStyle)||void 0===f?void 0:f.label)||"paypal",height:null===(h=null==_?void 0:_.paypalSPBStyle)||void 0===h?void 0:h.height,tagline:null!==(m=null===(y=null==_?void 0:_.paypalSPBStyle)||void 0===y?void 0:y.tagline)&&void 0!==m&&m},createOrder:function(e,t){return o(g,void 0,void 0,function(){var n,r;return i(this,function(o){switch(o.label){case 0:return console.log("createOrder",e,t),[4,null===(r=null===(n=this.initialData)||void 0===n?void 0:n.createOrder)||void 0===r?void 0:r.call(n,{data:e,actions:t})];case 1:return[2,o.sent()]}})})},onApprove:function(e,t){var n,r;console.log("onApprove",e,t),null===(r=null===(n=g.initialData)||void 0===n?void 0:n.createToken)||void 0===r||r.call(n,{data:e,actions:t})}},null===(v=this.initialData)||void 0===v?void 0:v.paypalProps)).render("#"+(this.initialData.domId?this.initialData.domId:"paypal-button-container"))},t.prototype.renderHtml=function(){this.renderToDom(p(DocumentFragment,null,p("div",{id:"paypal-button-container"})),this.initialData.domId)},t.prototype.getToken=function(){return o(this,void 0,void 0,function(){return i(this,function(e){return[2]})})},t}(f),w=h(function(e){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0,t(n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}),C=w&&w.__esModule&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w,O={length:function(e,t){return e=e.toString(),RegExp("^\\S{"+t+"}$","g").test(e)},enum:function(e,t){var n=!1;return t.map(function(t){t===e&&(n=!0)}),n},any:function(e,t){return e=e.toString(),RegExp(t,"g").test(e)}},S=[{name:"merNo",type:"length",target:"1,5",msg:"require a length of 5",errorCode:"101"},{name:"gatewayNo",type:"length",target:"1,8",msg:"require a length of 8",errorCode:"102"},{name:"orderNo",type:"length",target:"0,50",msg:"require a length less than 50",errorCode:"103"},{name:"orderCurrency",type:"enum",target:["KRW","TRY","ZAR","AED","MXN","CLP","BYR","MYR","MKD","CSD","PKR","UAH","IRR","TZS","AMD","ISK","AZN","ALL","BDT","SAR","GEL","PLN","NZD","NOK","DKK","SEK","CHF","RUB","BAM","BGN","HRK","HUF","LTL","LVL","RON","RSD","BRL","THB","ILS","CNY","USD","GBP","EUR","AUD","CAD","JPY","SGD","HKD","MYR","PHP","TWD","INR","CZK"],msg:"require currency code,https://www.asiabill.com/developers/347-cn.html#currency",errorCode:"104"},{name:"orderAmount",type:"any",target:"^[0-9]{0,8}.[0-9]{2}$",msg:"2 decimal places after the decimal point. Length less than ten digits",errorCode:"105"},{name:"email",type:"length",target:"2,200",msg:"the length must be between 2-200",errorCode:"108"},{name:"phone",type:"length",target:"2,50",msg:"the length must be between 2-50",errorCode:"109"},{name:"paymentMethod",type:"enum",target:["Credit Card"],msg:"inaccurate payment method",errorCode:"110"},{name:"returnUrl",type:"length",target:"0,500",msg:"require a length less than 500",errorCode:"103"}],x=function(){function e(e){"prod"===e.env?this.actionURL="https://safepay.asiabill.com/Interface/V2":this.actionURL="https://safepay.asiabill.com/TestInterface/V2",this.fieldData=e.fieldData,this.reportSDKLoading=null==e?void 0:e.reportSDKLoading}return e.prototype.getToken=function(){var e,t=this,n=(new Date).getTime(),r=(new Date).getTime()-n;return null===(e=null==this?void 0:this.reportSDKLoading)||void 0===e||e.call(this,{time:r}),new Promise(function(e,n){var r=document.createElement("form");document.body.appendChild(r),r.method="post",r.action=t.actionURL;var o=function(e,t){for(var n,r=0;r<t.length;r++){var o=t[r];if(!e[o.name]){n={state:!1,name:o.name,msg:o.name+" is required",code:o.errorCode};break}var i=e[o.name],a=O[o.type](i,o.target);if(!a){n={state:a,name:o.name,msg:o.msg,code:o.errorCode};break}n={state:a,name:"all",msg:"check pass",code:"200"}}return n}(t.fieldData,S);if(console.log(o),o.state){for(var i in t.fieldData){console.log(i+":"+t.fieldData[i]);var a=document.createElement("input");a.setAttribute("name",i),a.setAttribute("type","hidden"),"object"!==C(t.fieldData[i])?a.setAttribute("value",t.fieldData[i]):a.setAttribute("value",JSON.stringify(t.fieldData[i])),r.appendChild(a)}e(o),console.log(r),r.submit()}else e(o)})},e}(),k={nl:"NL-NL",en:"EN-GB",fr:"FR-FR",de:"DE-DE",it:"IT-IT",ko:"KR-KR",es:"ES-ES"},P=function(e){function t(t,n){var r=e.call(this)||this;r.publicKey=t,r.initialData=n;var o=(new Date).getTime();r.render();var i="https://assets.checkout.com/docs/examples/wireframe/images/card-icons/";return console.log("publicKey",t.key,"initialData",n),y("https://cdn.checkout.com/js/framesv2.min.js",function(){window.Frames.init({publicKey:r.publicKey.key,debug:"dev"===r.initialData.env,namespace:"Frames",localization:k[r.initialData.language],style:r.initialData.styleOption.commonStyle});var e,t,n,a=(new Date).getTime()-o;null===(t=null===(e=r.initialData)||void 0===e?void 0:e.reportSDKLoading)||void 0===t||t.call(e,{time:a});var c=window.Frames,s={"card-number":{src:"card",alt:"card number logo"},"expiry-date":{src:"exp-date",alt:"expiry date logo"},cvv:{src:"cvv",alt:"cvv logo"}},u={},l=null===(n=r.initialData)||void 0===n?void 0:n.errorTips;function d(e){document.getElementById("icon-"+e+"-error").style.removeProperty("display")}function p(e,t){void 0===e&&(e=null),void 0===t&&(t=null),e&&e.classList.add("show");var n=document.getElementById("logo-payment-method");if(t){var r=t.toLowerCase();n.setAttribute("src",i+r+".svg"),n.setAttribute("alt",t||"payment method")}n.style.removeProperty("display")}function f(e){void 0===e&&(e=null),e&&e.classList.remove("show"),document.getElementById("logo-payment-method").style.setProperty("display","none")}u["card-number"]=(null==l?void 0:l.cardNumberErrorTips)||"Please enter a valid card number",u["expiry-date"]=(null==l?void 0:l.expirationErrorTips)||"Please enter a valid expiry date",u.cvv=(null==l?void 0:l.cvvErrorTips)||"Please enter a valid cvv code",c.addEventHandler(c.Events.FRAME_VALIDATION_CHANGED,function(e){var t,n,r,o=e.element;e.isValid||e.isEmpty?("card-number"!==o||e.isEmpty||p(),n="icon-"+o,(r=document.getElementById(n)).setAttribute("src",i+s[o].src+".svg"),r.setAttribute("alt",s[o].alt),d(o),document.querySelector(".error-message__"+o).textContent=""):("card-number"===o&&f(),(t=document.getElementById("icon-"+o)).setAttribute("src",i+s[o].src+"-error.svg"),t.setAttribute("alt",s[o].alt),function(e){document.getElementById("icon-"+e+"-error").style.setProperty("display","block")}(o),document.querySelector(".error-message__"+o).textContent=u[o])}),c.addEventHandler(c.Events.CARD_TOKENIZATION_FAILED,function(e){console.log("CARD_TOKENIZATION_FAILED: %o",e),c.enableSubmitForm()}),c.addEventHandler(c.Events.PAYMENT_METHOD_CHANGED,function(e){var t=e.paymentMethod,n=document.querySelector(".icon-container.payment-method");t?(d("card-number"),p(n,t)):f(n)})}),r}return n(t,e),t.prototype.getToken=function(){return o(this,void 0,void 0,function(){return i(this,function(e){return[2,window.Frames.submitCard()]})})},t.prototype.render=function(){var e,t,n,r,o,i,a,c,s,u,l,d;this.renderToDom((l=(e={style:this.initialData.styleOption.componentStyle,label:this.initialData.label}).style,d=e.label,p("div",{class:"checkout"},p("div",{dangerouslySetInnerHTML:{__html:"<style>\n.checkout *, *::before, *::after {\n  box-sizing: border-box;\n}\n\n.checkout {\n  padding: 1rem;\n  background-color: #FFF;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n}\n\n.checkout iframe {\n  /* This fixes a mobile Safari bug */\n  height: 38px !important;\n}\n\n.checkout label {\n  display: block;\n  height: 10px;\n  color: #13395E;\n  font-size: 14px;\n  font-weight: 500;\n  line-height: 10px;\n  margin: 8px 0;\n}\n\n#payment-form {\n  width: 280px;\n  margin: 0 auto;\n}\n\n.date-and-code {\n  display: flex;\n  margin-bottom: 8px;\n}\n\n.date-and-code > div:nth-child(1) {\n  width: 55.715%;\n}\n.date-and-code > div:nth-child(2) {\n  width: 45.719%;\n}\n\n.input-container {\n  position: relative;\n  display: flex;\n  height: 40px;\n}\n.icon-container:last-child {\n  right: 0;\n}\n.icon-container.payment-method {\n  right: 0;\n}\n\n.input-container.card-number {\n  margin-bottom: 8px;\n}\n.input-container.expiry-date {\n  margin-right: 4px;\n}\n.input-container.cvv {\n  margin-left: 4px;\n}\n\n.card-number-frame {\n  padding-left: 40px;\n}\n.expiry-date-frame {\n  padding-left: 40px;\n}\n.cvv-frame {\n  padding-left: 40px;\n}\n\ndiv + button {\n  margin-top: 8px;\n}\n\n.icon-container {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  display: flex;\n  justify-content: center;\n  width: 26px;\n  margin: 0 7px;\n}\n\n.icon-container.payment-method  {\n  transform: translateY(-50%) rotateY(90deg);\n  transition: opacity 0.15s ease-out;\n  opacity: 0;\n  top: 50%;\n}\n\n.icon-container.payment-method.show {\n  opacity: 1;\n  transition: all 0.4s ease-out;\n  transform: translateY(-50%) rotateY(0deg);\n}\n\n.icon-container.payment-method img {\n  width: 100%;\n}\n\n[id$=\"-error\"] { display: none }\n\n.frame {\n  opacity: 0;\n}\n\n.frame--activated {\n  opacity: 1;\n  border: solid 1px #13395E;\n  border-radius: 3px;\n  box-shadow: 0 1px 3px 0 rgba(19,57,94,0.2);\n}\n\n.frame--activated.frame--focus {\n  border: solid 1px #13395E;\n  box-shadow: 0 2px 5px 0 rgba(19,57,94,0.15);\n}\n\n.frame--activated.frame--invalid {\n  border: solid 1px #D96830;\n  box-shadow: 0 2px 5px 0 rgba(217,104,48,0.15);\n}\n\n.error-message {\n  display: block;\n  color: #C9501C;\n  font-size: .9rem;\n  margin: 8px 0 0 1px;\n  font-weight: 300;\n}\n\n#pay-button {\n  border: none;\n  border-radius: 3px;\n  color: #FFF;\n  font-weight: 500;\n  height: 40px;\n  width: 100%;\n  background-color: #13395E;\n  box-shadow: 0 1px 3px 0 rgba(19,57,94,0.4);\n}\n\n#pay-button:active {\n  background-color: #0B2A49;\n  box-shadow: 0 1px 3px 0 rgba(19,57,94,0.4);\n}\n\n#pay-button:hover {\n  background-color: #15406B;\n  box-shadow: 0 2px 5px 0 rgba(19,57,94,0.4);\n}\n\n#pay-button:disabled {\n  background-color: #697887;\n  box-shadow: none;\n}\n\n#pay-button:not(:disabled) {\n  cursor: pointer;\n}\n\n.token {\n  color: #b35e14;\n  font-size: .9rem;\n  font-family: monospace;\n}\n\n/**\nIE11-targeted optimisations\n*/\n_:-ms-fullscreen, :root .icon-container {\n  display: block;\n}\n\n_:-ms-fullscreen, :root .icon-container img {\n  top: 50%;\n  -ms-transform: translateY(-50%);\n  position: absolute;\n}\n\n_:-ms-fullscreen, #icon-card-number,\n_:-ms-fullscreen, #icon-expiry-date,\n_:-ms-fullscreen, #icon-cvv {\n  left: 7px;\n}\n\n#checkout-frames-card-number::-ms-clear {\n  display: none;\n}\n\n</style>"}}),p("form",{id:"payment-form",method:"POST",style:!!(null==l?void 0:l.formStyle)&&l.formStyle},p("label",{for:"card-number",style:!!(null===(t=null==l?void 0:l.cardInputStyle)||void 0===t?void 0:t.labelStyle)&&l.cardInputStyle.labelStyle},(null==d?void 0:d.cardNumberLabel)||"Card number"),p("div",{class:"input-container card-number",style:!!(null===(n=null==l?void 0:l.cardInputStyle)||void 0===n?void 0:n.inputWrapperStyle)&&l.cardInputStyle.inputWrapperStyle},p("div",{class:"icon-container"},p("img",{id:"icon-card-number",src:"https://assets.checkout.com/docs/examples/wireframe/images/card-icons/card.svg",alt:"PAN"})),p("div",{class:"card-number-frame"}),p("div",{class:"icon-container payment-method"},p("img",{id:"logo-payment-method"})),p("div",{class:"icon-container"},p("img",{id:"icon-card-number-error",src:"https://assets.checkout.com/docs/examples/wireframe/images/card-icons/error.svg"}))),p("span",{class:"error-message error-message__card-number",style:!!(null===(r=null==l?void 0:l.cardInputStyle)||void 0===r?void 0:r.messageStyle)&&l.cardInputStyle.messageStyle}),p("div",{class:"date-and-code"},p("div",null,p("label",{for:"expiry-date",style:!!(null===(o=null==l?void 0:l.expirationInputStyle)||void 0===o?void 0:o.labelStyle)&&l.expirationInputStyle.labelStyle},(null==d?void 0:d.expirationLabel)||"Expiry date"),p("div",{class:"input-container expiry-date",style:!!(null===(i=null==l?void 0:l.expirationInputStyle)||void 0===i?void 0:i.inputWrapperStyle)&&l.expirationInputStyle.inputWrapperStyle},p("div",{class:"icon-container"},p("img",{id:"icon-expiry-date",src:"https://assets.checkout.com/docs/examples/wireframe/images/card-icons/exp-date.svg",alt:"Expiry date"})),p("div",{class:"expiry-date-frame"}),p("div",{class:"icon-container"},p("img",{id:"icon-expiry-date-error",src:"https://assets.checkout.com/docs/examples/wireframe/images/card-icons/error.svg"})))),p("div",null,p("label",{for:"cvv",style:!!(null===(a=null==l?void 0:l.cvvInputStyle)||void 0===a?void 0:a.labelStyle)&&l.cvvInputStyle.labelStyle},(null==d?void 0:d.cvvLabel)||" Security code"),p("div",{class:"input-container cvv",style:!!(null===(c=null==l?void 0:l.cvvInputStyle)||void 0===c?void 0:c.inputWrapperStyle)&&l.cvvInputStyle.inputWrapperStyle},p("div",{class:"icon-container"},p("img",{id:"icon-cvv",src:"https://assets.checkout.com/docs/examples/wireframe/images/card-icons/cvv.svg",alt:"CVV"})),p("div",{class:"cvv-frame"}),p("div",{class:"icon-container"},p("img",{id:"icon-cvv-error",src:"https://assets.checkout.com/docs/examples/wireframe/images/card-icons/error.svg"}))))),p("div",null,p("span",{class:"error-message error-message__expiry-date",style:!!(null===(s=null==l?void 0:l.expirationInputStyle)||void 0===s?void 0:s.messageStyle)&&l.expirationInputStyle.messageStyle}),p("span",{class:"error-message error-message__cvv",style:!!(null===(u=null==l?void 0:l.cvvInputStyle)||void 0===u?void 0:u.messageStyle)&&l.cvvInputStyle.messageStyle}))))),this.initialData.domId)},t}(f),E=function(){function e(e,t){this.publicKey=e,this.initialData=t,this.initSDK()}return e.prototype.checkKey=function(e){return!0},e.prototype.getToken=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.sdk.getToken(e)];case 1:return[2,t.sent()]}})})},e.prototype.initSDK=function(){return o(this,void 0,void 0,function(){return i(this,function(e){if(!this.checkKey(this.publicKey))return[2];switch(this.initialData.sdkName){case"2checkout":this.sdk=new m(this.publicKey,this.initialData);break;case"ebanx":this.sdk=new g(this.publicKey,this.initialData);break;case"oceanPay":this.sdk=new b(this.publicKey,this.initialData);break;case"paypalSPB":this.sdk=new _(this.publicKey,this.initialData);break;case"asiaBill":this.sdk=new x(this.initialData);break;case"checkout":this.sdk=new P(this.publicKey,this.initialData)}return[2]})})},e}();e.AsiaBill=x,e.Checkout=P,e.Ebanx=g,e.OceanPay=b,e.PaypalSPB=_,e.TwoCheckOut=m,e.default=E,Object.defineProperty(e,"__esModule",{value:!0})}(nj);var nN=L(nj),nB={},nF=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),nR="%[a-f0-9]{2}",nM=RegExp("("+nR+")|([^%]+?)","gi"),nU=RegExp("("+nR+")+","gi"),nH=function(e){if("string"!=typeof e)throw TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=nU.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=function(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(nM)||[],n=1;n<t.length;n++)t=(e=(function e(t,n){try{return[decodeURIComponent(t.join(""))]}catch(e){}if(1===t.length)return t;n=n||1;var r=t.slice(0,n),o=t.slice(n);return Array.prototype.concat.call([],e(r),e(o))})(t,n).join("")).match(nM)||[];return e}}(n[0]);r!==n[0]&&(t[n[0]]=r)}n=nU.exec(e)}t["%C2"]="�";for(var o=Object.keys(t),i=0;i<o.length;i++){var a=o[i];e=e.replace(RegExp(a,"g"),t[a])}return e}(e)}},nY=(e,t)=>{if(!("string"==typeof e&&"string"==typeof t))throw TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];let n=e.indexOf(t);return -1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]},nq=function(e,t){for(var n={},r=Object.keys(e),o=Array.isArray(t),i=0;i<r.length;i++){var a=r[i],c=e[a];(o?-1!==t.indexOf(a):t(a,c,e))&&(n[a]=c)}return n};!function(e){let t=e=>null==e,n=Symbol("encodeFragmentIdentifier");function r(e){if("string"!=typeof e||1!==e.length)throw TypeError("arrayFormatSeparator must be single character string")}function o(e,t){return t.encode?t.strict?nF(e):encodeURIComponent(e):e}function i(e,t){return t.decode?nH(e):e}function a(e){let t=e.indexOf("#");return -1!==t&&(e=e.slice(0,t)),e}function c(e){let t=(e=a(e)).indexOf("?");return -1===t?"":e.slice(t+1)}function s(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):t.parseBooleans&&null!==e&&("true"===e.toLowerCase()||"false"===e.toLowerCase())&&(e="true"===e.toLowerCase()),e}function u(e,t){r((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);let n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{if(t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),!t){r[e]=n;return}void 0===r[e]&&(r[e]={}),r[e][t[1]]=n};case"bracket":return(e,n,r)=>{if(t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),!t){r[e]=n;return}if(void 0===r[e]){r[e]=[n];return}r[e]=[].concat(r[e],n)};case"colon-list-separator":return(e,n,r)=>{if(t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),!t){r[e]=n;return}if(void 0===r[e]){r[e]=[n];return}r[e]=[].concat(r[e],n)};case"comma":case"separator":return(t,n,r)=>{let o="string"==typeof n&&n.includes(e.arrayFormatSeparator),a="string"==typeof n&&!o&&i(n,e).includes(e.arrayFormatSeparator);n=a?i(n,e):n;let c=o||a?n.split(e.arrayFormatSeparator).map(t=>i(t,e)):null===n?n:i(n,e);r[t]=c};case"bracket-separator":return(t,n,r)=>{let o=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!o){r[t]=n?i(n,e):n;return}let a=null===n?[]:n.split(e.arrayFormatSeparator).map(t=>i(t,e));if(void 0===r[t]){r[t]=a;return}r[t]=[].concat(r[t],a)};default:return(e,t,n)=>{if(void 0===n[e]){n[e]=t;return}n[e]=[].concat(n[e],t)}}}(t),o=Object.create(null);if("string"!=typeof e||!(e=e.trim().replace(/^[?#&]/,"")))return o;for(let r of e.split("&")){if(""===r)continue;let[e,a]=nY(t.decode?r.replace(/\+/g," "):r,"=");a=void 0===a?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:i(a,t),n(i(e,t),a,o)}for(let e of Object.keys(o)){let n=o[e];if("object"==typeof n&&null!==n)for(let e of Object.keys(n))n[e]=s(n[e],t);else o[e]=s(n,t)}return!1===t.sort?o:(!0===t.sort?Object.keys(o).sort():Object.keys(o).sort(t.sort)).reduce((e,t)=>{let n=o[t];return n&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(n):e[t]=n,e},Object.create(null))}e.extract=c,e.parse=u,e.stringify=(e,n)=>{if(!e)return"";r((n=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},n)).arrayFormatSeparator);let i=r=>n.skipNull&&t(e[r])||n.skipEmptyString&&""===e[r],a=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{let i=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[o(t,e),"[",i,"]"].join("")]:[...n,[o(t,e),"[",o(i,e),"]=",o(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[o(t,e),"[]"].join("")]:[...n,[o(t,e),"[]=",o(r,e)].join("")];case"colon-list-separator":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[o(t,e),":list="].join("")]:[...n,[o(t,e),":list=",o(r,e)].join("")];case"comma":case"separator":case"bracket-separator":{let t="bracket-separator"===e.arrayFormat?"[]=":"=";return n=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:(i=null===i?"":i,0===r.length)?[[o(n,e),t,o(i,e)].join("")]:[[r,o(i,e)].join(e.arrayFormatSeparator)]}default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,o(t,e)]:[...n,[o(t,e),"=",o(r,e)].join("")]}}(n),c={};for(let t of Object.keys(e))i(t)||(c[t]=e[t]);let s=Object.keys(c);return!1!==n.sort&&s.sort(n.sort),s.map(t=>{let r=e[t];return void 0===r?"":null===r?o(t,n):Array.isArray(r)?0===r.length&&"bracket-separator"===n.arrayFormat?o(t,n)+"[]":r.reduce(a(t),[]).join("&"):o(t,n)+"="+o(r,n)}).filter(e=>e.length>0).join("&")},e.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);let[n,r]=nY(e,"#");return Object.assign({url:n.split("?")[0]||"",query:u(c(e),t)},t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:i(r,t)}:{})},e.stringifyUrl=(t,r)=>{r=Object.assign({encode:!0,strict:!0,[n]:!0},r);let i=a(t.url).split("?")[0]||"",c=e.extract(t.url),s=Object.assign(e.parse(c,{sort:!1}),t.query),u=e.stringify(s,r);u&&(u=`?${u}`);let l=function(e){let t="",n=e.indexOf("#");return -1!==n&&(t=e.slice(n)),t}(t.url);return t.fragmentIdentifier&&(l=`#${r[n]?o(t.fragmentIdentifier,r):t.fragmentIdentifier}`),`${i}${u}${l}`},e.pick=(t,r,o)=>{o=Object.assign({parseFragmentIdentifier:!0,[n]:!1},o);let{url:i,query:a,fragmentIdentifier:c}=e.parseUrl(t,o);return e.stringifyUrl({url:i,query:nq(a,r),fragmentIdentifier:c},o)},e.exclude=(t,n,r)=>{let o=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return e.pick(t,o,r)}}(nB);var n$=L(nB);let nV={skipNull:!0,skipEmptyString:!0},nW=function(e){let{query:t,fragmentIdentifier:n,fullQuery:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=nB.parseUrl(window.location.href,{...nV,parseFragmentIdentifier:!0}),i=r?{...o.query||{},...t||{}}:{...t},a=nB.stringifyUrl({url:e,query:i,fragmentIdentifier:n||o.fragmentIdentifier},nV),c=`${window.location.protocol}//${window.location.host}${a}`;return{originUrl:e,...o,query:i,url:a,wholeUrl:c}};var nG=Array.isArray,nz="object"==typeof D&&D&&D.Object===Object&&D,nK="object"==typeof self&&self&&self.Object===Object&&self,nJ=nz||nK||Function("return this")(),nX=nJ.Symbol,nZ=Object.prototype,nQ=nZ.hasOwnProperty,n0=nZ.toString,n1=nX?nX.toStringTag:void 0,n3=Object.prototype.toString,n2=function(e){var t=nQ.call(e,n1),n=e[n1];try{e[n1]=void 0;var r=!0}catch(e){}var o=n0.call(e);return r&&(t?e[n1]=n:delete e[n1]),o},n4=nX?nX.toStringTag:void 0,n5=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":n4&&n4 in Object(e)?n2(e):n3.call(e)},n6=function(e){return null!=e&&"object"==typeof e},n9=function(e){return"symbol"==typeof e||n6(e)&&"[object Symbol]"==n5(e)},n8=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n7=/^\w*$/,re=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},rt=L(re),rn=function(e){if(!re(e))return!1;var t=n5(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},rr=nJ["__core-js_shared__"],ro=(iD=/[^.]+$/.exec(rr&&rr.keys&&rr.keys.IE_PROTO||""))?"Symbol(src)_1."+iD:"",ri=Function.prototype.toString,ra=function(e){if(null!=e){try{return ri.call(e)}catch(e){}try{return e+""}catch(e){}}return""},rc=/^\[object .+?Constructor\]$/,rs=Object.prototype,ru=Function.prototype.toString,rl=rs.hasOwnProperty,rd=RegExp("^"+ru.call(rl).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rp=function(e,t){var n,r=null==e?void 0:e[t];return re(n=r)&&(!ro||!(ro in n))&&(rn(n)?rd:rc).test(ra(n))?r:void 0},rf=rp(Object,"create"),rh=Object.prototype.hasOwnProperty,ry=Object.prototype.hasOwnProperty;function rm(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}rm.prototype.clear=function(){this.__data__=rf?rf(null):{},this.size=0},rm.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},rm.prototype.get=function(e){var t=this.__data__;if(rf){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return rh.call(t,e)?t[e]:void 0},rm.prototype.has=function(e){var t=this.__data__;return rf?void 0!==t[e]:ry.call(t,e)},rm.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=rf&&void 0===t?"__lodash_hash_undefined__":t,this};var rv=function(e,t){return e===t||e!=e&&t!=t},rg=function(e,t){for(var n=e.length;n--;)if(rv(e[n][0],t))return n;return -1},rb=Array.prototype.splice;function r_(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}r_.prototype.clear=function(){this.__data__=[],this.size=0},r_.prototype.delete=function(e){var t=this.__data__,n=rg(t,e);return!(n<0)&&(n==t.length-1?t.pop():rb.call(t,n,1),--this.size,!0)},r_.prototype.get=function(e){var t=this.__data__,n=rg(t,e);return n<0?void 0:t[n][1]},r_.prototype.has=function(e){return rg(this.__data__,e)>-1},r_.prototype.set=function(e,t){var n=this.__data__,r=rg(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var rw=rp(nJ,"Map"),rC=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},rO=function(e,t){var n=e.__data__;return rC(t)?n["string"==typeof t?"string":"hash"]:n.map};function rS(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function rx(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(rx.Cache||rS),n}rS.prototype.clear=function(){this.size=0,this.__data__={hash:new rm,map:new(rw||r_),string:new rm}},rS.prototype.delete=function(e){var t=rO(this,e).delete(e);return this.size-=t?1:0,t},rS.prototype.get=function(e){return rO(this,e).get(e)},rS.prototype.has=function(e){return rO(this,e).has(e)},rS.prototype.set=function(e,t){var n=rO(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},rx.Cache=rS;var rk=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rP=/\\(\\)?/g,rE=(ij=(iL=rx(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(rk,function(e,n,r,o){t.push(r?o.replace(rP,"$1"):n||e)}),t},function(e){return 500===ij.size&&ij.clear(),e})).cache,iL),rI=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o},rT=1/0,rA=nX?nX.prototype:void 0,rD=rA?rA.toString:void 0,rL=function e(t){if("string"==typeof t)return t;if(nG(t))return rI(t,e)+"";if(n9(t))return rD?rD.call(t):"";var n=t+"";return"0"==n&&1/t==-rT?"-0":n},rj=function(e){return null==e?"":rL(e)},rN=function(e,t){if(nG(e))return!1;var n=typeof e;return!!("number"==n||"symbol"==n||"boolean"==n||null==e||n9(e))||n7.test(e)||!n8.test(e)||null!=t&&e in Object(t)},rB=function(e,t){return nG(e)?e:rN(e,t)?[e]:rE(rj(e))},rF=1/0,rR=function(e){if("string"==typeof e||n9(e))return e;var t=e+"";return"0"==t&&1/e==-rF?"-0":t},rM=function(e,t){t=rB(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[rR(t[n++])];return n&&n==r?e:void 0},rU=L(function(e,t,n){var r=null==e?void 0:rM(e,t);return void 0===r?n:r}),rH=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},rY=L(function(e){return nG(e)?rI(e,rR):n9(e)?[e]:rH(rE(rj(e)))});function rq(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=t.find(e=>"function"==typeof e?null!=e():null!=e);return null==r?t[t.length-1]:r}var r$={exports:{}};iI=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function i(t,n,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(new Date*1+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var s in i)i[s]&&(c+="; "+s,!0!==i[s]&&(c+="="+i[s].split(";")[0]));return document.cookie=t+"="+n+c}}function a(e,n){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var c=i[a].split("="),s=c.slice(1).join("=");n||'"'!==s.charAt(0)||(s=s.slice(1,-1));try{var u=t(c[0]);if(s=(r.read||r)(s,u)||t(s),n)try{s=JSON.parse(s)}catch(e){}if(o[u]=s,e===u)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,n){i(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}(function(){})},r$.exports=iI();var rV=r$.exports,rW=L(rV);function rG(e,t){return rq((function(e,t){let n=rY(t),r=n.splice(0,n.length-1),o=n[0],i=r.length?rU(e,r):e;return{value:i?i[o]:void 0,exec:function(){if(i&&"function"==typeof i[o])return i[o](...arguments)}}})((function(e){if("string"!=typeof e)throw TypeError("path must be string");return e.replace(/\]/,"").split(/[.[]/)})(e).reduce((e,t)=>{if(e)return e&&e.string?e.string[t]:e[t]},window.__I18N__),"replace").exec(/\{\{([^{}]+)\}\}/g,function(){return rq(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return rU(e,...n)}(t,arguments.length<=1?void 0:arguments[1]),arguments.length<=0?void 0:arguments[0])}),e)}var rz={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,a){if("function"!=typeof r)throw TypeError("The listener must be a function");var c=new o(r,i||e,a),s=n?n+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],c]:e._events[s].push(c):(e._events[s]=c,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function c(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1)),c.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},c.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,a=Array(i);o<i;o++)a[o]=r[o].fn;return a},c.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},c.prototype.emit=function(e,t,r,o,i,a){var c=n?n+e:e;if(!this._events[c])return!1;var s,u,l=this._events[c],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,o),!0;case 5:return l.fn.call(l.context,t,r,o,i),!0;case 6:return l.fn.call(l.context,t,r,o,i,a),!0}for(u=1,s=Array(d-1);u<d;u++)s[u-1]=arguments[u];l.fn.apply(l.context,s)}else{var p,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,o);break;default:if(!s)for(p=1,s=Array(d-1);p<d;p++)s[p-1]=arguments[p];l[u].fn.apply(l[u].context,s)}}return!0},c.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},c.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},c.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var c=this._events[i];if(c.fn)c.fn!==t||o&&!c.once||r&&c.context!==r||a(this,i);else{for(var s=0,u=[],l=c.length;s<l;s++)(c[s].fn!==t||o&&!c[s].once||r&&c[s].context!==r)&&u.push(c[s]);u.length?this._events[i]=1===u.length?u[0]:u:a(this,i)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,e.exports=c}(rz);var rK=L(rz.exports);window.SL_EventBus||(window.SL_EventBus=new rK,window.SL_EventEmitter=rK);let{SL_EventBus:rJ}=window,{SL_EventEmitter:rX}=window;function rZ(e){if("string"!=typeof e)throw TypeError("path must be string");return e.replace(/\]/,"").split(/[.[]/)}let rQ=window.__PRELOAD_STATE__||{};window.SL_State||(window.SL_State=new class{constructor(e){this.bus=new rX,this.rootState=e}get(e){return rZ(e).reduce((e,t)=>{if(e)return e[t]},this.rootState)}set(e,t){let n;if("function"==typeof t)throw TypeError("newValue must not be a function");let r=rZ(e);r.reduce((e,o,i)=>(i===r.length-1&&(n=e[o],e[o]=t),e[o]),this.rootState),this.bus.emit(e,t,n)}on(){return this.bus.on(...arguments)}off(){return this.bus.off(...arguments)}}(rQ));let{SL_State:r0}=window,r1=["product","preview"].includes(te().APP_ENV),r3=e=>{let t;switch(!0){case/0401/.test(e.code):case/0402/.test(e.code):t=rG("transaction.notices.product_expired");break;case/0403/.test(e.code):t=rG("transaction.notices.insufficient_product_inventory");break;case/0404/.test(e.code):t=rG("transaction.notices.product_limit");break;case/0005/.test(e.code):t=rG("transaction.notices.network");break;case/0703/.test(e.code):t=rG("cart.notices.store_nonexistent");break;default:t=e&&e.message||rG("transaction.notices.network")}return t},r2=()=>window.__ENV__&&window.__ENV__.PAYPAL_CONFIG_V2,r4=()=>{let{enterAccountConfig:e={},...t}=r0.get("tradeCollectionConfig")||{},{orderFrom:n}=r0.get("tradeCheckout.otherInfo")||{},r=e.manualEnterAccount?"authorize":"capture",o=e.manualEnterAccount;return{...t,intent:r,manualCapture:o,orderFrom:n}},r5=e=>!!e.commit,r6=["paypalMerchantId","clientId"],r9=e=>{let t=r6.map(t=>e[t]);return!!t.some(Boolean)&&!t.every(Boolean)},r8=(e,t)=>{let{isContinueMode:n,paypalConfig:r}=t,{intent:o}=r4(),i=r5(e),a=r2(),c=`intent=${o}&commit=${i}`;if(e.queryParams&&(c+=`&${e.queryParams}`),r9(r)&&r.paypalMerchantId&&(c+=`&merchant-id=${r.paypalMerchantId}`),Array.isArray(a)){let e=e=>{let{key:t,value:n,isCoverAll:r,whitelist:o,blacklist:i}=e,{storeId:a}=window.Shopline;r?Array.isArray(i)&&!i.includes(a)&&(c+=`&${t}=${n}`):Array.isArray(o)&&o.includes(a)&&(c+=`&${t}=${n}`)};a.forEach(t=>{"all"===t.scope?e(t):(n&&"continue"===t.scope&&e(t),n||"payNow"!==t.scope||e(t))})}else{let{disableFunding:e}=window.__ENV__&&window.__ENV__.PAYPAL_CONFIG||{};n&&e&&(c+=`&disable-funding=${e}`)}return c},r7={DEV:"AZ-NwCL9u55EJ7x0kR61XcKTCZtMuel8VBMG1dx4T_iJzABABfvw13UeXJAYHOscUNHHsIjLNLoh-pYv",PROD:"AYVtr8kMzEyRCw725vQM_-hheFyo1FuWeaup4KPSvU1gg44L-NG5e2PNcwGnMo2MLCzGRg4eVHJhuqBP"},oe=r1?r7.PROD:r7.DEV,ot=e=>({key:(r9(e)?e.clientId:null)||oe,expand:{currency:rW.get("currency_code")||"USD"}}),on={Dev:"dev",Prod:"prod"},or={env:r1?on.Prod:on.Dev,sdkName:"paypalSPB",domId:"shopline-paypal",styleOption:{commonStyle:{paypalSPBStyle:{layout:"horizontal",color:"gold",shape:"rect",label:"paypal",tagline:!1,height:55}}},initTimeout:5e3,beforeCreateOrder:async e=>({products:e.products})};var oo={exports:{}},oi=function(e,t){return function(){for(var n=Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},oa=Object.prototype.toString;function oc(e){return"[object Array]"===oa.call(e)}function os(e){return void 0===e}function ou(e){return null!==e&&"object"==typeof e}function ol(e){if("[object Object]"!==oa.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function od(e,t){if(null!=e){if("object"!=typeof e&&(e=[e]),oc(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}}var op={isArray:oc,isArrayBuffer:function(e){return"[object ArrayBuffer]"===oa.call(e)},isBuffer:function(e){return null!==e&&!os(e)&&null!==e.constructor&&!os(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:ou,isPlainObject:ol,isUndefined:os,isDate:function(e){return"[object Date]"===oa.call(e)},isFile:function(e){return"[object File]"===oa.call(e)},isBlob:function(e){return"[object Blob]"===oa.call(e)},isStream:function(e){var t;return ou(e)&&(t=e.pipe,"[object Function]"===oa.call(t))},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:od,merge:function e(){var t={};function n(n,r){ol(t[r])&&ol(n)?t[r]=e(t[r],n):ol(n)?t[r]=e({},n):oc(n)?t[r]=n.slice():t[r]=n}for(var r=0,o=arguments.length;r<o;r++)od(arguments[r],n);return t},extend:function(e,t,n){return od(t,function(t,r){n&&"function"==typeof t?e[r]=oi(t,n):e[r]=t}),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}};function of(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var oh=function(e,t,n){if(!t)return e;if(n)r=n(t);else if(op.isURLSearchParams(t))r=t.toString();else{var r,o=[];op.forEach(t,function(e,t){null!=e&&(op.isArray(e)?t+="[]":e=[e],op.forEach(e,function(e){op.isDate(e)?e=e.toISOString():op.isObject(e)&&(e=JSON.stringify(e)),o.push(of(t)+"="+of(e))}))}),r=o.join("&")}if(r){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e};function oy(){this.handlers=[]}oy.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},oy.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},oy.prototype.forEach=function(e){op.forEach(this.handlers,function(t){null!==t&&e(t)})};var om=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e};function ov(){return iH?iU:(iH=1,iU=function(e,t,n,r,o){return om(Error(e),t,n,r,o)})}function og(){if(i2)return i3;i2=1;var e=function(){if(iq)return iY;iq=1;var e=ov();return iY=function(t,n,r){var o=r.config.validateStatus;!r.status||!o||o(r.status)?t(r):n(e("Request failed with status code "+r.status,r.config,null,r.request,r))}}(),t=iV?i$:(iV=1,i$=op.isStandardBrowserEnv()?{write:function(e,t,n,r,o,i){var a=[];a.push(e+"="+encodeURIComponent(t)),op.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),op.isString(r)&&a.push("path="+r),op.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}),n=function(){if(iX)return iJ;iX=1;var e=iG?iW:(iG=1,iW=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),t=iK?iz:(iK=1,iz=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e});return iJ=function(n,r){return n&&!e(r)?t(n,r):r}}(),r=function(){if(iQ)return iZ;iQ=1;var e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return iZ=function(t){var n,r,o,i={};return t&&op.forEach(t.split("\n"),function(t){o=t.indexOf(":"),n=op.trim(t.substr(0,o)).toLowerCase(),r=op.trim(t.substr(o+1)),n&&!(i[n]&&e.indexOf(n)>=0)&&("set-cookie"===n?i[n]=(i[n]?i[n]:[]).concat([r]):i[n]=i[n]?i[n]+", "+r:r)}),i}}(),o=i1?i0:(i1=1,i0=op.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=op.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}),i=ov();return i3=function(a){return new Promise(function(c,s){var u=a.data,l=a.headers,d=a.responseType;op.isFormData(u)&&delete l["Content-Type"];var p=new XMLHttpRequest;if(a.auth){var f=a.auth.username||"",h=a.auth.password?unescape(encodeURIComponent(a.auth.password)):"";l.Authorization="Basic "+btoa(f+":"+h)}var y=n(a.baseURL,a.url);function m(){if(p){var t="getAllResponseHeaders"in p?r(p.getAllResponseHeaders()):null;e(c,s,{data:d&&"text"!==d&&"json"!==d?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:t,config:a,request:p}),p=null}}if(p.open(a.method.toUpperCase(),oh(y,a.params,a.paramsSerializer),!0),p.timeout=a.timeout,"onloadend"in p?p.onloadend=m:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(m)},p.onabort=function(){p&&(s(i("Request aborted",a,"ECONNABORTED",p)),p=null)},p.onerror=function(){s(i("Network Error",a,null,p)),p=null},p.ontimeout=function(){var e="timeout of "+a.timeout+"ms exceeded";a.timeoutErrorMessage&&(e=a.timeoutErrorMessage),s(i(e,a,a.transitional&&a.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",p)),p=null},op.isStandardBrowserEnv()){var v=(a.withCredentials||o(y))&&a.xsrfCookieName?t.read(a.xsrfCookieName):void 0;v&&(l[a.xsrfHeaderName]=v)}"setRequestHeader"in p&&op.forEach(l,function(e,t){void 0===u&&"content-type"===t.toLowerCase()?delete l[t]:p.setRequestHeader(t,e)}),op.isUndefined(a.withCredentials)||(p.withCredentials=!!a.withCredentials),d&&"json"!==d&&(p.responseType=a.responseType),"function"==typeof a.onDownloadProgress&&p.addEventListener("progress",a.onDownloadProgress),"function"==typeof a.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",a.onUploadProgress),a.cancelToken&&a.cancelToken.promise.then(function(e){p&&(p.abort(),s(e),p=null)}),u||(u=null),p.send(u)})}}var ob=function(e,t){op.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})},o_={"Content-Type":"application/x-www-form-urlencoded"};function ow(e,t){!op.isUndefined(e)&&op.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var oC={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:("undefined"!=typeof XMLHttpRequest?iN=og():"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(iN=og()),iN),transformRequest:[function(e,t){return(ob(t,"Accept"),ob(t,"Content-Type"),op.isFormData(e)||op.isArrayBuffer(e)||op.isBuffer(e)||op.isStream(e)||op.isFile(e)||op.isBlob(e))?e:op.isArrayBufferView(e)?e.buffer:op.isURLSearchParams(e)?(ow(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):op.isObject(e)||t&&"application/json"===t["Content-Type"]?(ow(t,"application/json"),function(e,t,n){if(op.isString(e))try{return(0,JSON.parse)(e),op.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||r&&op.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw om(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};function oO(){return i5?i4:(i5=1,i4=function(e){return!!(e&&e.__CANCEL__)})}oC.headers={common:{Accept:"application/json, text/plain, */*"}},op.forEach(["delete","get","head"],function(e){oC.headers[e]={}}),op.forEach(["post","put","patch"],function(e){oC.headers[e]=op.merge(o_)});var oS=function(e,t,n){var r=this||oC;return op.forEach(n,function(n){e=n.call(r,e,t)}),e},ox=oO();function ok(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var oP=function(e,t){t=t||{};var n={},r=["url","method","data"],o=["headers","auth","proxy","params"],i=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function c(e,t){return op.isPlainObject(e)&&op.isPlainObject(t)?op.merge(e,t):op.isPlainObject(t)?op.merge({},t):op.isArray(t)?t.slice():t}function s(r){op.isUndefined(t[r])?op.isUndefined(e[r])||(n[r]=c(void 0,e[r])):n[r]=c(e[r],t[r])}op.forEach(r,function(e){op.isUndefined(t[e])||(n[e]=c(void 0,t[e]))}),op.forEach(o,s),op.forEach(i,function(r){op.isUndefined(t[r])?op.isUndefined(e[r])||(n[r]=c(void 0,e[r])):n[r]=c(void 0,t[r])}),op.forEach(a,function(r){r in t?n[r]=c(e[r],t[r]):r in e&&(n[r]=c(void 0,e[r]))});var u=r.concat(o).concat(i).concat(a),l=Object.keys(e).concat(Object.keys(t)).filter(function(e){return -1===u.indexOf(e)});return op.forEach(l,s),n},oE="0.21.4",oI={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){oI[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var oT={},oA=oE.split(".");oI.transitional=function(e,t,n){var r=t&&function(e,t){for(var n=e.split("."),r=0;r<3;r++){if(oA[r]>n[r])return!0;if(oA[r]<n[r])break}return!1}(t);function o(e,t){return"[Axios v"+oE+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,a){if(!1===e)throw Error(o(i," has been removed in "+t));return r&&!oT[i]&&(oT[i]=!0,console.warn(o(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}};var oD=function(e){return ok(e),e.headers=e.headers||{},e.data=oS.call(e,e.data,e.headers,e.transformRequest),e.headers=op.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),op.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||oC.adapter)(e).then(function(t){return ok(e),t.data=oS.call(e,t.data,t.headers,e.transformResponse),t},function(t){return!ox(t)&&(ok(e),t&&t.response&&(t.response.data=oS.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})},oL={assertOptions:function(e,t,n){if("object"!=typeof e)throw TypeError("options must be an object");for(var r=Object.keys(e),o=r.length;o-- >0;){var i=r[o],a=t[i];if(a){var c=e[i],s=void 0===c||a(c,i,e);if(!0!==s)throw TypeError("option "+i+" must be "+s);continue}if(!0!==n)throw Error("Unknown option "+i)}},validators:oI},oj=oL.validators;function oN(e){this.defaults=e,this.interceptors={request:new oy,response:new oy}}function oB(){if(i9)return i6;function e(e){this.message=e}return i9=1,e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,i6=e}function oF(e){var t=new oN(e),n=oi(oN.prototype.request,t);return op.extend(n,oN.prototype,t),op.extend(n,t),n}oN.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},(e=oP(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t,n=e.transitional;void 0!==n&&oL.assertOptions(n,{silentJSONParsing:oj.transitional(oj.boolean,"1.0.0"),forcedJSONParsing:oj.transitional(oj.boolean,"1.0.0"),clarifyTimeoutError:oj.transitional(oj.boolean,"1.0.0")},!1);var r=[],o=!0;this.interceptors.request.forEach(function(t){("function"!=typeof t.runWhen||!1!==t.runWhen(e))&&(o=o&&t.synchronous,r.unshift(t.fulfilled,t.rejected))});var i=[];if(this.interceptors.response.forEach(function(e){i.push(e.fulfilled,e.rejected)}),!o){var a=[oD,void 0];for(Array.prototype.unshift.apply(a,r),a=a.concat(i),t=Promise.resolve(e);a.length;)t=t.then(a.shift(),a.shift());return t}for(var c=e;r.length;){var s=r.shift(),u=r.shift();try{c=s(c)}catch(e){u(e);break}}try{t=oD(c)}catch(e){return Promise.reject(e)}for(;i.length;)t=t.then(i.shift(),i.shift());return t},oN.prototype.getUri=function(e){return oh((e=oP(this.defaults,e)).url,e.params,e.paramsSerializer).replace(/^\?/,"")},op.forEach(["delete","get","head","options"],function(e){oN.prototype[e]=function(t,n){return this.request(oP(n||{},{method:e,url:t,data:(n||{}).data}))}}),op.forEach(["post","put","patch"],function(e){oN.prototype[e]=function(t,n,r){return this.request(oP(r||{},{method:e,url:t,data:n}))}});var oR=oF(oC);oR.Axios=oN,oR.create=function(e){return oF(oP(oR.defaults,e))},oR.Cancel=oB(),oR.CancelToken=function(){if(i7)return i8;i7=1;var e=oB();function t(t){if("function"!=typeof t)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){n=e});var n,r=this;t(function(t){r.reason||(r.reason=new e(t),n(r.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var e;return{token:new t(function(t){e=t}),cancel:e}},i8=t}(),oR.isCancel=oO(),oR.all=function(e){return Promise.all(e)},oR.spread=at?ae:(at=1,ae=function(e){return function(t){return e.apply(null,t)}}),oR.isAxiosError=ar?an:(ar=1,an=function(e){return"object"==typeof e&&!0===e.isAxiosError}),oo.exports=oR,oo.exports.default=oR;var oM=L(oo.exports);let oU={baseURL:"/leproxy/api",timeout:3e4,withCredentials:!0,paramsSerializer:e=>n$.stringify(e)},oH=oM.create(oU),oY=[e=>{let{status:t,data:n,config:r}=e;if("/leproxy"===r.baseURL){if(200!==t||"0"!==n.rescode)return Promise.reject({message:n.resmsg,...n})}else if(200!==t||!(n.success||"SUCCESS"===n.code))return Promise.reject(n);return n},e=>Promise.reject(e)];oH.interceptors.response.use(...oY);let oq={shopper_action:"CONTINUE",sub_channel:"SPB",cancel_url:"undefined"==typeof window?"":window.location.href.replace(/(&?\w+={.*?})|{|}/g,""),landing_page:"LOGIN",locale:""},o$=e=>{let{extChannelInfo:t,...n}=e;return oH.post("/trade/center/pay/pay-pal/prepare-pay",{extChannelInfo:JSON.stringify({...oq,...t||{}}),...n})},oV=()=>oH.get("/trade/pay/payment/paypal/config/data");var oW={exports:{}},oG=function(e){function t(e){let r,o,i;let a=null;function c(...e){if(!c.enabled)return;let n=Number(new Date),o=n-(r||n);c.diff=o,c.prev=r,c.curr=n,r=n,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,r)=>{if("%%"===n)return"%";i++;let o=t.formatters[r];if("function"==typeof o){let t=e[i];n=o.call(c,t),e.splice(i,1),i--}return n}),t.formatArgs.call(c,e),(c.log||t.log).apply(c,e)}return c.namespace=e,c.useColors=t.useColors(),c.color=t.selectColor(e),c.extend=n,c.destroy=t.destroy,Object.defineProperty(c,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(o!==t.namespaces&&(o=t.namespaces,i=t.enabled(e)),i),set:e=>{a=e}}),"function"==typeof t.init&&t.init(c),c}function n(e,n){let r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names.map(r),...t.skips.map(r).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];let r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(RegExp("^"+e.slice(1)+"$")):t.names.push(RegExp("^"+e+"$")))},t.enabled=function(e){let n,r;if("*"===e[e.length-1])return!0;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=function(){if(ai)return ao;function e(e,t,n,r){return Math.round(e/n)+" "+r+(t>=1.5*n?"s":"")}return ai=1,ao=function(t,n){n=n||{};var r,o,i=typeof t;if("string"===i&&t.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"weeks":case"week":case"w":return 6048e5*n;case"days":case"day":case"d":return 864e5*n;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*n;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*n;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(t);if("number"===i&&isFinite(t))return n.long?(r=Math.abs(t))>=864e5?e(t,r,864e5,"day"):r>=36e5?e(t,r,36e5,"hour"):r>=6e4?e(t,r,6e4,"minute"):r>=1e3?e(t,r,1e3,"second"):t+" ms":(o=Math.abs(t))>=864e5?Math.round(t/864e5)+"d":o>=36e5?Math.round(t/36e5)+"h":o>=6e4?Math.round(t/6e4)+"m":o>=1e3?Math.round(t/1e3)+"s":t+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}}(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(n=>{t[n]=e[n]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t)|0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t};!function(e,t){let n;t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(o=r))}),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(n=!1,()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=oG(t);let{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}(oW,oW.exports);var oz=L(oW.exports);let oK=e=>"function"==typeof e,oJ=oM.create(oU);oJ.interceptors.response.use(...oY),oJ.defaults.retry=2;let oX={Home:0,ProductCategory:1,ProductAll:2,ProductDetail:3,ProductSearch:4,MiniCart:5,Cart:6,CheckoutProgress:7,CheckoutConfirm:8,OrderConfirm:9,SignIn:10,SignInSuccess:11,SignUp:12,SignUpSuccess:13,ProductPage:14,UserCenter:15,SalesPromotion:16,OrderDetail:17,OneShop:18},oZ={SelectContent_Product:0,AddToCart:1,RemoveFromCart:2,CheckoutToCart:3,BeginCheckout:4,CheckoutProgress:5,PlaceOrder:6,Login:7,ViewCart:8},oQ={SetCheckoutOption:"set_checkout_option",SelectContent:"select_content",AddToCart:"add_to_cart",RemoveFromCart:"remove_from_cart",ViewCart:"view_cart"};["product","preview"].includes(te().APP_ENV);var o0={};!function(e){function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var n,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==D?D:"undefined"!=typeof self?self:{},o=1/0,i=NaN,a=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt,d="object"==typeof r&&r&&r.Object===Object&&r,p="object"==typeof self&&self&&self.Object===Object&&self,f=d||p||Function("return this")(),h=Object.prototype.toString,y=f.Symbol,m=Math.min,v=y?y.prototype:void 0,g=v?v.toString:void 0;function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function _(e){return"symbol"==typeof e||!!e&&"object"==typeof e&&"[object Symbol]"==h.call(e)}function w(e){if("number"==typeof e)return e;if(_(e))return i;if(b(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=b(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=s.test(e);return n||u.test(e)?l(e.slice(2),n?2:8):c.test(e)?i:+e}function C(e){return null==e?"":function(e){if("string"==typeof e)return e;if(_(e))return g?g.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}(e)}var O,S,x,k,P,E,I=(O=Math.round,function(e,t){if(e=w(e),t=m((i=(r=(n=t)?(n=w(n))===o||n===-o?(n<0?-1:1)*17976931348623157e292:n==n?n:0:0===n?n:0)%1,r==r?i?r-i:r:0),292)){var n,r,i,a=(C(e)+"e").split("e");return+((a=(C(O(a[0]+"e"+(+a[1]+t)))+"e").split("e"))[0]+"e"+(+a[1]-t))}return O(e)}),T={amount:{value:"amount",decimalSymbol:".",groupSymbol:",",format:"amount"},amount_no_decimals:{value:"amount_no_decimals",decimalSymbol:"",groupSymbol:",",format:"amount_no_decimals"},amount_with_comma_separator:{value:"amount_with_comma_separator",decimalSymbol:",",groupSymbol:".",format:"amount_with_comma_separator"},amount_no_decimals_with_comma_separator:{value:"amount_no_decimals_with_comma_separator",decimalSymbol:"",groupSymbol:".",format:"amount_no_decimals_with_comma_separator"},amount_with_apostrophe_separator:{value:"amount_with_apostrophe_separator",decimalSymbol:".",groupSymbol:"'",format:"amount_with_apostrophe_separator"},amount_no_decimals_with_space_separator:{value:"amount_no_decimals_with_space_separator",decimalSymbol:"",groupSymbol:" ",format:"amount_no_decimals_with_space_separator"},amount_with_space_separator:{value:"amount_with_space_separator",decimalSymbol:",",groupSymbol:" ",format:"amount_with_space_separator"}},A=/.*\{\{(.*)\}\}/,L=/(\{\{.*\}\})/,j="amount";(n=S||(S={})).PREFIX="prefix",n.SUFFIX="suffix";var N=Object.entries(T).map(function(e){return(function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),2!==i.length);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,2)||function(e,n){if(e){if("string"==typeof e)return t(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1].value}),B=new Map,F=new Map,R=new Map,M=new Map,U=new Map,H=new Map,Y=new Map,q=new Map,V=new Map,W=function(e){P=e},G=function(){return P},z=function(){return E},K=function(e){return N.includes(e||"")},J=function(e){var t=e.match(A);if(t&&t.length){var n=(t[1]||"").trim();return K(n)?T[n]:null}return null},X=function(e,t,n){var r=J(t),o=(n?H:U).get(e),i=o&&o.format;return r||(K(i)?T[i]:T[j])},Z=function(e){return J(e)||T[j]},Q=function(e,t,n){var r,o,i=e.match(A);return null!=i&&i.length&&N.includes((null==i||null===(r=i[1])||void 0===r?void 0:r.trim())||"")?e:(null===(o=(n?H:U).get(t))||void 0===o?void 0:o.origin)||"{{amount}}"},ee=function(e,t){var n=Z(t).format;U.set(e,{format:n,origin:t})},et=function(e,t){var n=Z(t).format;H.set(e,{format:n,origin:t})},en=function(e,t){var n=X(e,t,!1),r=n.format,o=n.decimalSymbol,i=n.groupSymbol;q.set(e,o),V.set(e,i),R.set(e,{format:r,origin:Q(t,e,!1)})},er=function(e,t){var n=X(e,t,!0),r=n.format,o=n.decimalSymbol,i=n.groupSymbol;q.set(e,o),V.set(e,i),M.set(e,{format:r,origin:Q(t,e,!0)})},eo=function(e){var t,n=z().find(function(t){return t.currencyCode===e});if(!n)throw Error('Failed to retrieve currency configuration for "currencyCode: '.concat(e,'".'));var r=n.messageWithoutDefaultCurrency,o=n.messageWithCurrency,i=n.messageWithoutCurrency,a=n.messageWithDefaultCurrency,c=n.currencyCode,s=n.rate,u=n.currencySymbol;t=void 0===s?2:s,B.set(c,t),F.set(c,u),function(e,t){if(!t)throw Error("".concat(e,' cannot find the corresponding configuration for "messageWithoutDefaultCurrency".'));(null==t?void 0:t.replace(/^\s+/,"").indexOf("{{"))>0?Y.set(e,S.PREFIX):Y.set(e,S.SUFFIX)}(c,r),ee(c,r),et(c,a),en(c,i),er(c,o)},ei=function(e,t,n){var r,o,i,a=T[t],c=a.groupSymbol,s=a.decimalSymbol,u=e<0,l=(i=I(u?-e:e,n),0!==n&&s?(r=Math.floor(i),o=function(e,t,n){if(e.length>=t)return e;var r=t-e.length,o="0";if(r>1)for(var i=0;i<r/1;i++)o+=n;return e+o.slice(0,r)}("".concat(I(i-r,n)).replace(/^0?\.?/,""),n,"0")):(r=I(i),o=""),{integerPart:r,fractionPart:o}),d=l.fractionPart,p=l.integerPart,f="".concat(p||0).replace(/(\d)(?=(?:\d{3})+$)/g,"$1".concat(c));return{integer:"".concat(u?"-":"").concat(f),fraction:d,groupSymbol:c,decimalSymbol:s}},ea=function(e,t){var n,r=(null==t?void 0:t.code)||x||"CNY";R.get(r)||eo(r);var o=ev(r),i=em(r),a=ep(r),c=ef(r),s=(R.get(r)||{}).format,u=ei(e,K(s)?s:j,2),l=u.integer,d=u.fraction,p=[],f=(null==l?void 0:l.split(o))||[];return f.forEach(function(e,t){p.push({type:"integer",value:e}),t!==f.length-1&&p.push({type:"group",value:o})}),p.push({type:"decimal",value:i}),p.push({type:"fraction",value:null!==(n=null==d?void 0:d.trim())&&void 0!==n?n:""}),"prefix"===c?p.unshift({type:"currency",value:a}):p.push({type:"currency",value:a}),p},ec=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CNY",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k,i=(arguments.length>3?arguments[3]:void 0)||G();return r===o?e:e*(null!==(t=i[o])&&void 0!==t?t:1)/(null!==(n=i[r])&&void 0!==n?n:1)},es=function(e,t,n){var r=t?M:R,o=t?el:ed,i=n||{},a=i.from,c=void 0===a?x:a,s=i.to,u=void 0===s?k:s,l=i.currencyRates;return r.get(c)||eo(c),r.get(u)||eo(u),o(ec(e,c,u,l||G()),{code:u})},eu=function(e,t,n){var r,o=t?M:R,i=(null==n?void 0:n.code)||x||"CNY";o.get(i)||eo(i);var a=o.get(i)||{},c=a.format,s=a.origin,u=null!==(r=null==n?void 0:n.digits)&&void 0!==r?r:2,l=ei(e/Math.pow(10,u),K(c)?c:j,u),d=l.integer,p=l.fraction,f=l.decimalSymbol;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").replace(L,e)}(f&&u?"".concat(d).concat(f).concat(p):d,s)},el=function(e,t){return eu(e,!0,t)},ed=function(e,t){return eu(e,!1,t)},ep=function(e){var t;return R.get(e)||eo(e),null!==(t=F.get(e))&&void 0!==t?t:""},ef=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CNY";return R.get(e)||eo(e),Y.get(e)},eh=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return("number"!=typeof e?Number(e):e)/Math.pow(10,t)},ey=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return I(("number"!=typeof e?Number(e):e)*Math.pow(10,t),0)},em=function(e){var t;return R.get(e)||eo(e),null!==(t=q.get(e))&&void 0!==t?t:""},ev=function(e){var t;return R.get(e)||eo(e),null!==(t=V.get(e))&&void 0!==t?t:""};e.convertCalc=ec,e.convertFormat=function(e,t){return es(e,!0,t)},e.convertFormatWithoutCurrency=function(e,t){return es(e,!1,t)},e.covertCalc=ec,e.defaultCurrency="CNY",e.defaultCurrencyDigit=2,e.defaultPresentDigit=2,e.format=el,e.formatCurrency=function(e){return eh(e,2)},e.formatMoneyWithoutCurrency=function(e,t){var n=(null==t?void 0:t.code)||x||"CNY";R.get(n)||eo(n);var r=(R.get(n)||{}).format,o=ei(e/100,K(r)?r:j,2),i=o.integer,a=o.fraction,c=o.decimalSymbol;return c?"".concat(i).concat(c).concat(a):i},e.formatNumber=eh,e.formatPercent=function(e){return eh(e,2)},e.formatWithoutCurrency=ed,e.getConvertPrice=function(e,t){var n=null!=t?t:{},r=n.from,o=n.code,i=n.to,a=n.currencyRates,c=r||x||"CNY";R.get(c)||eo(c);var s=i||o||k;R.get(s)||eo(s);var u=ea(ec(eh(e),c,s,a||P),{code:s}),l={group:"",integer:"",decimal:"",fraction:"",symbolOrder:"",currencySymbol:""},d=ef(s);return d&&(l.symbolOrder=d),u.forEach(function(e){var t=e.value;"currency"===e.type&&(l.currencySymbol=t),"integer"===e.type&&(l.integer?l.integer="".concat(l.integer).concat(l.group).concat(t):l.integer=t),"group"===e.type&&(l.group=t),"decimal"===e.type&&(l.decimal=t),"fraction"===e.type&&(l.fraction=t)}),l},e.getCurrencyConfig=z,e.getCurrencyRates=G,e.getDecimalSymbolByCode=em,e.getDefaultToCurrency=function(){return k},e.getDigitsByCode=function(e){return R.get(e)||eo(e),B.get(e)},e.getFormatParts=ea,e.getGroupSymbolByCode=ev,e.getStoreCurrency=function(){return x},e.getSymbolByCode=ep,e.getSymbolOrderByCode=ef,e.parseCustomFormat=X,e.parseCustomFormatWithCurrency=er,e.parseCustomFormatWithoutCurrency=en,e.parseDefaultFormat=Z,e.parseDefaultFormatWithCurrency=et,e.parseDefaultFormatWithoutCurrency=ee,e.setCurrencyConfig=function(e){var t={};(E=e).forEach(function(e){t[e.currencyCode]=e.exchangeRate}),W(t),"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)&&(B.clear(),F.clear(),R.clear(),M.clear(),U.clear(),H.clear(),Y.clear(),q.clear(),V.clear())},e.setCurrencyRates=W,e.setDefaultToCurrency=function(e){k=e},e.setStoreCurrency=function(e){x=e},e.unformatCurrency=function(e){return ey(e,2)},e.unformatNumber=ey,e.unformatPercent=function(e){return ey(e,2)},Object.defineProperty(e,"__esModule",{value:!0})}(o0);let o1=window.Shopline.currency,o3=r0.get("currencyCode")||o1,{currencyDetailList:o2}=window.Shopline.currencyConfig;o0.setCurrencyConfig(o2),o0.setStoreCurrency(o1),o0.setDefaultToCurrency(o3),r0.on("currencyCode",e=>{o0.setDefaultToCurrency(e)});let o4=()=>{let e=r0.get("currencyCode")||r0.get("storeInfo.currency");o0.setDefaultToCurrency(e)};var o5={format:o0.format,unformatNumber:o0.unformatNumber,formatNumber:o0.formatNumber,unformatCurrency:o0.unformatCurrency,unformatPercent:o0.unformatPercent,formatCurrency:o0.formatCurrency,formatPercent:o0.formatPercent,getDigitsByCode:o0.getDigitsByCode,getSymbolByCode:o0.getSymbolByCode,getSymbolOrderByCode:o0.getSymbolOrderByCode,getDecimalSymbolByCode:o0.getDecimalSymbolByCode,getGroupSymbolByCode:o0.getGroupSymbolByCode,getFormatParts:o0.getFormatParts,getConvertPrice:function(){return o4(),o0.getConvertPrice(...arguments)},convertFormat:function(){return o4(),o0.convertFormat(...arguments)},covertCalc:o0.covertCalc,convertFormatWithoutCurrency:function(){return o4(),o0.convertFormatWithoutCurrency(...arguments)},formatWithoutCurrency:o0.formatWithoutCurrency,formatMoneyWithoutCurrency:o0.formatMoneyWithoutCurrency};function o6(){return r0.get("currencyCode")}r0.get("variants.gmc_sku_feed_id");let o9=new class{constructor(e){this.config=e}sendEventLog(e,t){let n={...t};return n&&!n.currency&&(n.currency=o6()),["event",e,n]}clickForEnhancedEcom(e,t,n){let r,o;switch(t){case oX.CheckoutProgress:case oX.PlaceOrder:r=oQ.SetCheckoutOption,o={value:n.amount,checkout_step:n.step};break;default:return[]}return this.sendEventLog(r,o)}click(e,t,n){let r,o;let i=[];switch(t){case oZ.SelectContent:o=oQ.SelectContent,r={content_type:"product",items:[{id:n.skuId,name:n.name,price:n.price,variant:n.variant,category:n.customCategoryName}]};break;case oZ.AddToCart:o=oQ.AddToCart,r={items:[{id:n.skuId,name:n.name,price:n.price}]};break;case oZ.RemoveFromCart:o=oQ.RemoveFromCart,r={items:[]},Array.isArray(n.productItems)&&n.productItems.forEach(e=>{let{skuId:t,name:n,price:o,quantity:i,variant:a,customCategoryName:c}=e;r.items.push({id:t,name:n,price:o,quantity:i,variant:a||"",category:c})});break;default:return[]}return i.push(this.sendEventLog(o,r)),this.config.enableEnhancedEcom&&i.push(this.clickForEnhancedEcom(e,t,n)),i}clickGa4(e){let t,n,{actionType:r,params:o}=e,i=[];switch(r){case oZ.SelectContent:n=oQ.SelectContent,t={content_type:"product",item_id:o.skuId,item_category:o.customCategoryName};break;case oZ.AddToCart:n=oQ.AddToCart,t={value:o.amount,items:[{item_id:o.itemNo||o.skuId,item_name:o.name,price:o.price,quantity:o.productNum,item_variant:(o.productSkuAttrList||[]).join(",")}]};break;case oZ.RemoveFromCart:n=oQ.RemoveFromCart,t={value:o.value,items:[]},Array.isArray(o.productItems)&&o.productItems.forEach(e=>{let{skuId:n,name:r,price:o,quantity:i,variant:a,customCategoryName:c}=e;t.items.push({item_id:n,item_name:r,price:o,quantity:i,item_variant:a||"",item_category:c})});break;case oZ.ViewCart:n=oQ.ViewCart,t={value:o.amount,items:o.items&&o.items.map(e=>({item_id:e.itemNo||e.productId,item_name:e.name,price:o5.formatCurrency(e.price),quantity:e.num,item_variant:(e.skuAttr||[]).join(","),item_category:e.customCategoryName}))};break;default:return[]}return i.push(this.sendEventLog(n,t)),i}}({}),o8=e=>{let t={...e};return t&&!t.currency&&(t.currency=o6()),["event","conversion",t]},o7=(e,t)=>{let n=[];switch(e){case oX.ProductDetail:switch(t){case oZ.AddToCart:case oZ.BeginCheckout:break;default:return n}break;case oX.MiniCart:case oX.Cart:if(t!==oZ.BeginCheckout)return n;break;case oX.CheckoutProgress:if(t!==oZ.CheckoutProgress)return n;break;case oX.CheckoutConfirm:if(t!==oZ.PlaceOrder)return n;break;case oX.OneShop:if(t!==oZ.BeginCheckout)return n;break;default:return n}return n.push(o8()),n},ie=(e,t)=>{let n=null,r=null,o=null,i=[];return e===oZ.AddToCart?(n={content_type:"product_group",content_category:t&&t.category,content_ids:t&&t.skuId,content_name:t&&t.name,value:t&&t.price,currency:rq(t&&t.currency,o6())},r="AddToCart",o={eventID:t&&t.eventId},i.push(["track",r,n,o])):i=[],i};for(var it=new Uint8Array(16),ir=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,io=[],ii=0;ii<256;++ii)io.push((ii+256).toString(16).substr(1));let ia=e=>{if("undefined"==typeof window)return"";let t=window&&window.encodeURI(e);return window&&window.btoa(t)},ic=e=>"function"==typeof e,is=e=>{if(ic(e)){let t=e();return"string"==typeof t?{eventID:t}:t}return{}},iu=(e,t,n,r)=>{var o,i;let{eventID:a}=is(r);Object.keys(rV.get()).forEach(e=>{/^\d+_fb_data$/.test(e)&&rV.remove(e)});let c={tp:1,et:Date.now(),ed:a||`${Date.now()}_${((i=(o=o||{}).random||(o.rng||function(){if(!aa&&!(aa="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return aa(it)})())[6]=15&i[6]|64,i[8]=63&i[8]|128,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(io[e[t+0]]+io[e[t+1]]+io[e[t+2]]+io[e[t+3]]+"-"+io[e[t+4]]+io[e[t+5]]+"-"+io[e[t+6]]+io[e[t+7]]+"-"+io[e[t+8]]+io[e[t+9]]+"-"+io[e[t+10]]+io[e[t+11]]+io[e[t+12]]+io[e[t+13]]+io[e[t+14]]+io[e[t+15]]).toLowerCase();if(!("string"==typeof n&&ir.test(n)))throw TypeError("Stringified UUID is invalid");return n}(i)).replace(/-/g,"")}`};n&&(c.currency=t,c.payAmount=n),rV.set(`${e}_fb_data`,c)},il=e=>{let{report:t}=e;ic(t)&&t(),sessionStorage.setItem(ia("checkout_track"),"[]")};function id(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ip(e,t){if(e){if("string"==typeof e)return id(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?id(e,t):void 0}}function ih(e){return function(e){if(Array.isArray(e))return id(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ip(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||ip(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function im(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function iv(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){im(i,r,o,a,c,"next",e)}function c(e){im(i,r,o,a,c,"throw",e)}a(void 0)})}}function ig(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function ib(e){return(ib="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i_(e){var t=function(e,t){if("object"!==ib(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ib(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ib(t)?t:String(t)}function iw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i_(r.key),r)}}function iC(e,t,n){return t&&iw(e.prototype,t),n&&iw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function iO(e,t,n){return(t=i_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}new class{constructor(){this.eventBus=rJ,this.currency=r0.get("currencyCode"),this.hdPage={Cart:"cart",MiniCart:"cart"}}touch(e){let{pageType:t,actionType:n,value:r}=e,o={...r,currency:this.currency},i=o9.click(t,n,o),a=o9.clickGa4({pageType:t,actionType:n,params:o}),c=o7(t,n),s=ie(n,o);this.eventBus&&this.eventBus.emit("global:thirdPartReport",{GAAds:c,GA:i,GA4:a,FBPixel:s})}reportViewCart(e){let t=o9.clickGa4(e);this.eventBus&&this.eventBus.emit("global:thirdPartReport",{GA4:t})}};var iS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ix={exports:{}},ik={exports:{}};!function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(ik),function(e){var t=ik.exports.default;function n(){e.exports=n=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var r={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var o,i,c=Object.create((t&&t.prototype instanceof y?t:y).prototype);return a(c,"_invoke",{value:(o=new k(r||[]),i="suspendedStart",function(t,r){if("executing"===i)throw Error("Generator is already running");if("completed"===i){if("throw"===t)throw r;return E()}for(o.method=t,o.arg=r;;){var a=o.delegate;if(a){var c=function e(t,n){var r=n.method,o=t.iterator[r];if(void 0===o)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=void 0,e(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+r+"' method")),h;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,h):a:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,h)}(a,o);if(c){if(c===h)continue;return c}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===i)throw i="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);i="executing";var s=f(e,n,o);if("normal"===s.type){if(i=o.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:o.done}}"throw"===s.type&&(i="completed",o.method="throw",o.arg=s.arg)}})}),c}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}r.wrap=p;var h={};function y(){}function m(){}function v(){}var g={};d(g,s,function(){return this});var b=Object.getPrototypeOf,_=b&&b(b(P([])));_&&_!==o&&i.call(_,s)&&(g=_);var w=v.prototype=y.prototype=Object.create(g);function C(e){["next","throw","return"].forEach(function(t){d(e,t,function(e){return this._invoke(t,e)})})}function O(e,n){var r;a(this,"_invoke",{value:function(o,a){function c(){return new n(function(r,c){(function r(o,a,c,s){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==t(d)&&i.call(d,"__await")?n.resolve(d.__await).then(function(e){r("next",e,c,s)},function(e){r("throw",e,c,s)}):n.resolve(d).then(function(e){l.value=e,c(l)},function(e){return r("throw",e,c,s)})}s(u.arg)})(o,a,r,c)})}return r=r?r.then(c,c):c()}})}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function P(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:E}}function E(){return{value:void 0,done:!0}}return m.prototype=v,a(w,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:m,configurable:!0}),m.displayName=d(v,l,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,d(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},r.awrap=function(e){return{__await:e}},C(O.prototype),d(O.prototype,u,function(){return this}),r.AsyncIterator=O,r.async=function(e,t,n,o,i){void 0===i&&(i=Promise);var a=new O(p(e,t,n,o),i);return r.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},C(w),d(w,l,"Generator"),d(w,s,function(){return this}),d(w,"toString",function(){return"[object Generator]"}),r.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},r.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),s=i.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(ix);var iP=ix.exports();try{regeneratorRuntime=iP}catch(e){"object"===("undefined"==typeof globalThis?"undefined":ib(globalThis))?globalThis.regeneratorRuntime=iP:Function("r","regeneratorRuntime = r")(iP)}function iE(e){return(iE="function"==typeof Symbol&&"symbol"==ib(Symbol.iterator)?function(e){return ib(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ib(e)})(e)}var iI,iT,iA,iD,iL,ij,iN,iB,iF,iR,iM,iU,iH,iY,iq,i$,iV,iW,iG,iz,iK,iJ,iX,iZ,iQ,i0,i1,i3,i2,i4,i5,i6,i9,i8,i7,ae,at,an,ar,ao,ai,aa,ac,as,au,al=function(){return(al=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function ad(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==("undefined"==typeof Reflect?"undefined":iE(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function ap(e,t,n){if(n||2==arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}(af=ac||(ac={})).P0="P0",af.P1="P1",af.P2="P2",(ah=as||(as={})).Start="Start",ah.Success="Success",ah.Failure="Failure",(ay=au||(au={})).Info="info",ay.Log="log",ay.Warn="warn",ay.Error="error";var af,ah,ay,am,av=function(e){return function(t,n,r){var o=r.value;r.value=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{return o.apply(this,t)}catch(t){return window[window.__sl_console__?"__sl_console__":"console"].error("logger: ".concat(n,"方法执行出错"),t),e}}}},ag=function(e){return e.reduce(function(e,t){var n={};try{n=t()}catch(e){window[window.__sl_console__?"__sl_console__":"console"].error("计算列表结果出错",e)}return al(al({},e),n)},{})},ab=function(){function e(e){var t=this;this.options={owner:"",action:"",tags:{},getTagsFn:[],data:{},getDataFn:[],transports:[]},this.report=function(e,n,r){var o,i=ag(t.options.getTagsFn),a=ag(t.options.getDataFn),c=(null==r?void 0:r.errorLevel)&&r.errorLevel||null,s=al(al({level:e,owner:t.options.owner,action:t.options.action},r),{tags:al(al(al({},t.options.tags),i),{errorLevel:c}),data:al(al({},t.options.data),a),message:n});o=null==r?void 0:r.data,"[object Object]"===Object.prototype.toString.call(o)?s.data=al(al({},s.data),null==r?void 0:r.data):s.data=al(al({},s.data),{custom_data:null==r?void 0:r.data}),(null==r?void 0:r.tags)&&(s.tags=al(al({},s.tags),r.tags)),function(e,t){var n=e;t.forEach(function(e){var t=e(n);t&&(n=t)})}(s,t.options.transports)},this.options=al(al({},this.options),e)}return e.prototype.withOwner=function(t){return new e(al(al({},this.options),{owner:t}))},e.prototype.pipeOwner=function(t){var n;return t?(n=this.options.owner?"".concat(this.options.owner,".").concat(t):t,new e(al(al({},this.options),{owner:n}))):this},e.prototype.withAction=function(t){return new e(al(al({},this.options),{action:t}))},e.prototype.pipeTags=function(t){return t?new e(al(al({},this.options),"function"==typeof t?{getTagsFn:ap(ap([],this.options.getTagsFn,!0),[t],!1)}:{tags:al(al({},this.options.tags),t)})):this},e.prototype.pipeData=function(t){return t?new e(al(al({},this.options),"function"==typeof t?{getDataFn:ap(ap([],this.options.getDataFn,!0),[t],!1)}:{data:al(al({},this.options.data),t)})):this},e.prototype.pipeTransport=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.options.transports.concat(t);return new e(al(al({},this.options),{transports:r}))},e.prototype.info=function(e,t){this.report(au.Info,e,t)},e.prototype.log=function(e,t){this.report(au.Log,e,t)},e.prototype.warn=function(e,t){this.report(au.Warn,e,t)},e.prototype.error=function(e,t){this.report(au.Error,e,t)},ad([av(new e)],e.prototype,"withOwner",null),ad([av(new e)],e.prototype,"pipeOwner",null),ad([av(new e)],e.prototype,"withAction",null),ad([av(new e)],e.prototype,"pipeTags",null),ad([av(new e)],e.prototype,"pipeData",null),ad([av(new e)],e.prototype,"pipeTransport",null),ad([av(new e)],e.prototype,"info",null),ad([av(new e)],e.prototype,"log",null),ad([av(new e)],e.prototype,"warn",null),ad([av(new e)],e.prototype,"error",null),e}();Object.defineProperty(new ab,"options",{writable:!1,configurable:!1});for(var a_=new Uint8Array(16),aw=[],aC=0;aC<256;++aC)aw.push((aC+256).toString(16).slice(1));var aO={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function aS(e,t,n){if(aO.randomUUID&&!t&&!e)return aO.randomUUID();var r=(e=e||{}).random||(e.rng||function(){if(!am&&!(am="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return am(a_)})();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(aw[e[t+0]]+aw[e[t+1]]+aw[e[t+2]]+aw[e[t+3]]+"-"+aw[e[t+4]]+aw[e[t+5]]+"-"+aw[e[t+6]]+aw[e[t+7]]+"-"+aw[e[t+8]]+aw[e[t+9]]+"-"+aw[e[t+10]]+aw[e[t+11]]+aw[e[t+12]]+aw[e[t+13]]+aw[e[t+14]]+aw[e[t+15]]).toLowerCase()}(r)}new(function(){function e(){this.fnList=[],this.get()}return e.prototype.get=function(){var e,t,n=sessionStorage.getItem("SL_LOGGER_SESSION_ID"),r=(e=document.cookie.split("; "),t={},e.forEach(function(e){var n=e.split("="),r=n[0],o=n[1];r&&(t[r]=o||"")}),t.log_session_id||"");if(n)return n!==r&&this.updateId(n),n;var o=aS();return this.updateId(o),o},e.prototype.set=function(e){return!!e&&(this.updateId(e),this.fnList.forEach(function(t){return t(e)}),!0)},e.prototype.refresh=function(){var e=aS();return this.updateId(e),this.fnList.forEach(function(t){return t(e)}),!0},e.prototype.onChange=function(e){this.fnList.push(e)},e.prototype.updateId=function(e){var t,n;sessionStorage.setItem("SL_LOGGER_SESSION_ID",e),void 0===t&&(t="/"),n="".concat("log_session_id","=").concat(e),t&&(n+="; path=".concat(t)),document.cookie=n},ad([av("")],e.prototype,"get",null),ad([av(!1)],e.prototype,"set",null),ad([av(!1)],e.prototype,"refresh",null),ad([av()],e.prototype,"onChange",null),ad([av()],e.prototype,"updateId",null),e}());var ax=new ab,ak={get:function(){return ax},set:function(e){e&&(ax=e)}};function aP(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function aE(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){aP(i,r,o,a,c,"next",e)}function c(e){aP(i,r,o,a,c,"throw",e)}a(void 0)})}}function aI(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function aT(e){var t=function(e,t){if("object"!==iE(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==iE(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===iE(t)?t:String(t)}function aA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,aT(r.key),r)}}function aD(e,t,n){return t&&aA(e.prototype,t),n&&aA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function aL(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aj(e,t){return(aj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function aN(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aj(e,t)}function aB(e,t){if(t&&("object"===iE(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return aL(e)}function aF(e){return(aF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aR(e,t,n){return(t=aT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var aM={exports:{}},aU={exports:{}};!function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==ib(Symbol.iterator)?function(e){return ib(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ib(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(aU),function(e){var t=aU.exports.default;function n(){e.exports=n=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var r={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var o,i,c=Object.create((t&&t.prototype instanceof y?t:y).prototype);return a(c,"_invoke",{value:(o=new k(r||[]),i="suspendedStart",function(t,r){if("executing"===i)throw Error("Generator is already running");if("completed"===i){if("throw"===t)throw r;return{value:void 0,done:!0}}for(o.method=t,o.arg=r;;){var a=o.delegate;if(a){var c=function e(t,n){var r=n.method,o=t.iterator[r];if(void 0===o)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=void 0,e(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+r+"' method")),h;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,h):a:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,h)}(a,o);if(c){if(c===h)continue;return c}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===i)throw i="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);i="executing";var s=f(e,n,o);if("normal"===s.type){if(i=o.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:o.done}}"throw"===s.type&&(i="completed",o.method="throw",o.arg=s.arg)}})}),c}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}r.wrap=p;var h={};function y(){}function m(){}function v(){}var g={};d(g,s,function(){return this});var b=Object.getPrototypeOf,_=b&&b(b(P([])));_&&_!==o&&i.call(_,s)&&(g=_);var w=v.prototype=y.prototype=Object.create(g);function C(e){["next","throw","return"].forEach(function(t){d(e,t,function(e){return this._invoke(t,e)})})}function O(e,n){var r;a(this,"_invoke",{value:function(o,a){function c(){return new n(function(r,c){(function r(o,a,c,s){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==t(d)&&i.call(d,"__await")?n.resolve(d.__await).then(function(e){r("next",e,c,s)},function(e){r("throw",e,c,s)}):n.resolve(d).then(function(e){l.value=e,c(l)},function(e){return r("throw",e,c,s)})}s(u.arg)})(o,a,r,c)})}return r=r?r.then(c,c):c()}})}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function P(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:E}}function E(){return{value:void 0,done:!0}}return m.prototype=v,a(w,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:m,configurable:!0}),m.displayName=d(v,l,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,d(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},r.awrap=function(e){return{__await:e}},C(O.prototype),d(O.prototype,u,function(){return this}),r.AsyncIterator=O,r.async=function(e,t,n,o,i){void 0===i&&(i=Promise);var a=new O(p(e,t,n,o),i);return r.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},C(w),d(w,l,"Generator"),d(w,s,function(){return this}),d(w,"toString",function(){return"[object Generator]"}),r.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},r.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),s=i.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(aM);var aH=aM.exports();try{regeneratorRuntime=aH}catch(e){"object"===("undefined"==typeof globalThis?"undefined":iE(globalThis))?globalThis.regeneratorRuntime=aH:Function("r","regeneratorRuntime = r")(aH)}var aY={exports:{}};aY.exports=function(){var e=function(){},t={},n={},r={};function o(e,t){if(e){var o=r[e];if(n[e]=t,o)for(;o.length;)o[0](e,t),o.splice(0,1)}}function i(t,n){t.call&&(t={success:t}),n.length?(t.error||e)(n):(t.success||e)(t)}function a(n,r,a){var c,s;if(r&&r.trim&&(c=r),s=(c?a:r)||{},c){if(c in t)throw"LoadJS";t[c]=!0}function u(t,r){!function(t,n,r){var o,i,a=(t=t.push?t:[t]).length,c=a,s=[];for(o=function(e,t,r){if("e"==t&&s.push(e),"b"==t){if(!r)return;s.push(e)}--a||n(s)},i=0;i<c;i++)!function t(n,r,o,i){var a,c,s=document,u=o.async,l=(o.numRetries||0)+1,d=o.before||e,p=n.replace(/[\?|#].*$/,""),f=n.replace(/^(css|img)!/,"");i=i||0,/(^css!|\.css$)/.test(p)?((c=s.createElement("link")).rel="stylesheet",c.href=f,(a="hideFocus"in c)&&c.relList&&(a=0,c.rel="preload",c.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(p)?(c=s.createElement("img")).src=f:((c=s.createElement("script")).src=n,c.async=void 0===u||u),c.onload=c.onerror=c.onbeforeload=function(e){var s=e.type[0];if(a)try{c.sheet.cssText.length||(s="e")}catch(e){18!=e.code&&(s="e")}if("e"==s){if((i+=1)<l)return t(n,r,o,i)}else if("preload"==c.rel&&"style"==c.as)return c.rel="stylesheet";r(n,s,e.defaultPrevented)},!1!==d(n,c)&&s.head.appendChild(c)}(t[i],o,r)}(n,function(e){i(s,e),t&&i({success:t,error:r},e),o(c,e)},s)}if(s.returnPromise)return new Promise(u);u()}return a.ready=function(e,t){return function(e,t){e=e.push?e:[e];var o,i,a,c=[],s=e.length,u=s;for(o=function(e,n){n.length&&c.push(e),--u||t(c)};s--;)(a=n[i=e[s]])?o(i,a):(r[i]=r[i]||[]).push(o)}(e,function(e){i(t,e)}),a},a.done=function(e){o(e,[])},a.reset=function(){t={},n={},r={}},a.isDefined=function(e){return e in t},a}();var aq,a$,aV,aW,aG,az,aK,aJ,aX,aZ,aQ,a0,a1,a3,a2=aY.exports;(a8=aq||(aq={})).Init="init",a8.PullUpChannel="pullUpChannel",a8.CreateOrder="createOrder",a8.Pay="pay",a8.Hooks="Hooks",a8.CreateExpected="createExpected",a8.ReRender="rerender",(a7=a$||(a$={})).Continue="continue",a7.PayNow="pay_now",a7.All="all",(ce=aV||(aV={})).Paypal="Paypal",ce.SLpayments="SLpayments",ce.StripeOther="StripeOther",(ct=aW||(aW={})).Paypal="Paypal",ct.GooglePay="GooglePay",ct.ApplePay="ApplePay",(aG||(aG={})).StandardEC="standard_ec",(az||(az={})).Prod="prod",(cn=aK||(aK={})).Done="done",cn.Pending="pending",cn.Await="await",cn.Fail="fail",(cr=aJ||(aJ={}))[cr.Fail=0]="Fail",cr[cr.Success=1]="Success",(co=aX||(aX={})).Ordinary="ordinary",co.ChangeAddress="change_address",co.ChangeDeliveryMethod="change_delivery_method",co.UseDiscountCode="use_discount_code",(ci=aZ||(aZ={})).RedirectOrPopup="RedirectOrPopup",ci.Redirect="Redirect",ci.ChannelInfoUpdate="ChannelInfoUpdate",ci.ChannelConfirm="ChannelConfirm",ci.OpenIframe="OpenIframe",(ca=aQ||(aQ={})).GET="GET",ca.POST="POST",(cc=a0||(a0={})).PAY_AND_BIND="PAY_AND_BIND",cc.PAY_NORMAL="PAY_NORMAL",(cs=a1||(a1={})).Hidden="Hidden",cs.Visible="Visible",(cu=a3||(a3={})).Confirm="Confirm",cu.Init="Init",cu.I18n="I18n",cu.SaveAbandonOrder="SaveAbandonOrder",cu.ExpressFirstLoad="ExpressFirstLoad",cu.ExpressUpdateDetail="ExpressUpdateDetail";var a4="rememberedCb",a5={props:{payMode:a$.Continue,timeout:{switch:!1,delay:5e3},styleOptions:{layout:"horizontal",color:"gold",shape:"rect",label:"paypal",tagline:!1,height:55},timing:!1,currency:"USD"}};function a6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a9(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a6(Object(n),!0).forEach(function(t){aR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a6(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var a8,a7,ce,ct,cn,cr,co,ci,ca,cc,cs,cu,cl,cd=function(){var e;function t(e){var n;aI(this,t),aR(this,"initialData",void 0),aR(this,"paypalInstanceName",void 0),this.initialData=e,this.paypalInstanceName=(null==e||null===(n=e.scriptParams)||void 0===n?void 0:n["data-namespace"])||"paypal",window.__PAYPALSPB_LOADJS||(window.__PAYPALSPB_LOADJS=a2,window.__PAYPALSPB_LOADJS.ids={})}return aD(t,[{key:"render",value:(e=aE(aH.mark(function e(){var t,n,r,o,i,a,c,s=this;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://www.paypal.com/sdk/js",null!==(t=this.initialData)&&void 0!==t&&t.queryParams&&(r+="".concat(this.initialData.queryParams)),o=r,i={},null!==(n=this.initialData)&&void 0!==n&&n.scriptParams&&(c=(null===(a=this.initialData)||void 0===a?void 0:a.scriptParams)||{},i.before=function(e,t){Object.keys(c).forEach(function(e){var n=c[e];n&&t.setAttribute(e,n)})},null!=c&&c["data-namespace"]&&(this.paypalInstanceName=c["data-namespace"]),Object.keys(c).forEach(function(e){var t=c[e];o+="".concat(e,"&").concat(t)})),window.__PAYPALSPB_LOADJS.ids[o]||(window.__PAYPALSPB_LOADJS.ids[o]=window.__PAYPALSPB_LOADJS([r],a9(a9({},i),{},{returnPromise:!0}))),e.abrupt("return",window.__PAYPALSPB_LOADJS.ids[o].then(function(){s.initPaypal()}).catch(function(e){throw window.__PAYPALSPB_LOADJS.ids[o]=!1,e}));case 7:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"initPaypal",value:function(){var e,t=null===(e=this.initialData.style)||void 0===e?void 0:e["border-radius"],n=a9({},this.initialData);n.style||(n.style={}),n.style.shape=t>=10?"pill":"rect";var r=document.querySelector("#".concat(this.initialData.domId," .").concat("paypal-buttons"));r&&r.remove(),window[this.paypalInstanceName].Buttons(this.initialData).render("#".concat(this.initialData.domId))}}]),t}(),cp=function(){function e(){aI(this,e),aR(this,"handlers",[])}return aD(e,[{key:"use",value:function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){this.handlers.forEach(function(t){null!==t&&e(t)})}}]),e}();function cf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ch(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cf(Object(n),!0).forEach(function(t){aR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cf(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var cy={maxCount:3,interval:1e3},cm={};function cv(e,t){if(!e)return null;var n=cm[e]||{};return n=ch(ch(ch(ch({},n),cy),t),{},{retryCount:n.retryCount||0}),cm[e]=n,n}var cg=function(e){return e.useRetry&&e.action},cb=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"xhr";return JSON.parse(JSON.stringify(e,function(e,n){if(e!==t)return n}))};function c_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c_(Object(n),!0).forEach(function(t){aR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var cC=new(function(){function e(t){aI(this,e),aR(this,"options",{}),aR(this,"interceptors",{}),aR(this,"getLogData",function(e){return{readyState:e.readyState,status:e.status,statusText:e.statusText,timeout:e.timeout,withCredentials:e.withCredentials}}),aR(this,"serialize",function(e){var t=Object.prototype.toString.call(e);return e&&"[object Object]"===t?Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&"):""}),this.options=t||{},this.interceptors={request:new cp,response:new cp}}return aD(e,[{key:"logger",get:function(){return ak.get().pipeOwner("payment-common.request")}},{key:"setOptions",value:function(e){this.options=e}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=this.buildUrl(e,null==t?void 0:t.params),this.http(e,cw(cw(cw({method:"GET"},this.options),t),{},{headers:cw(cw({},{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}),t.headers)}))}},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={Accept:"application/json"},o=t||n.data||null;return"form"===n.requestType?(r["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",o=this.serialize(o)):(r["Content-Type"]="application/json;charset=UTF-8",o=o?JSON.stringify(o):null),this.http(e,cw(cw(cw({method:"POST",body:o},this.options),n),{},{headers:cw(cw({},r),n.headers)}))}},{key:"dispatchRequest",value:function(e,t){var n=this;return new Promise(function(r,o){var i=new window.XMLHttpRequest,a=!1,c=t.body,s=n.options.baseUrl&&!/^(https?:)?(\/\/)/.test(e)?"".concat(n.options.baseUrl).concat(e):e;i.open(t.method||"",s),t.headers&&Object.keys(t.headers).forEach(function(e){var n;i.setRequestHeader(e,(null===(n=t.headers)||void 0===n?void 0:n[e])||"")});var u={options:t,url:s};if(i.onreadystatechange=function(){if(4===i.readyState){u.statusCode=i.status;var e="";try{e=JSON.parse(i.responseText)}catch(t){e=i.responseText}if(/^(2|3)\d{2}$/.test(i.status.toString())){try{r(cw({data:e},u))}catch(t){r(cw({data:e},u))}return}o(cw({data:e},u))}},i.send(c),i.onabort=function(t){a=!0,n.logger.error("xhr_onabort",{data:cw(cw({},n.getLogData(i)),{},{url:e})}),u.statusCode=i.status,o(cw({error:t=cb(t)},u))},i.onerror=function(t){n.logger.error("xhr_onerror",{data:cw(cw({},n.getLogData(i)),{},{url:e})}),u.statusCode=i.status,o(cw({error:t=cb(t)},u))},i.ontimeout=function(){n.logger.error("xhr_ontimeout",{data:cw(cw({},n.getLogData(i)),{},{url:e,withCredentials:i.withCredentials})})},t.timeout){if(a)return;setTimeout(function(){i.abort();var t=Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",n.logger.error("xhr_timeout",{data:{url:e}}),u.statusCode=i.status,o(cw({error:t},u))},t.timeout)}})}},{key:"http",value:function(e,t){var n,r,o,i,a=[];null===(n=this.interceptors)||void 0===n||null===(r=n.request)||void 0===r||r.forEach(function(e){a.unshift(e.fulfilled,e.rejected)});var c,s=[];null===(o=this.interceptors)||void 0===o||null===(i=o.response)||void 0===i||i.forEach(function(e){s.push(e.fulfilled,e.rejected)});for(var u=t;a.length;){var l=a.shift(),d=a.shift();try{l&&(u=l(u))}catch(e){d&&d(e);break}}try{c=this.dispatchRequest(e,u)}catch(e){return Promise.reject(e)}for(;s.length;){var p=s.shift(),f=s.shift();c=c.then(p,f)}return c}},{key:"buildUrl",value:function(e,t){var n=Object.prototype.toString.call(t);if(!t||"[object Object]"!==n)return e;var r=Object.keys(t);return(e=decodeURIComponent(e).indexOf("?")>-1?"".concat(e,"&"):"".concat(e,"?"))+r.map(function(e){return"".concat(e,"=").concat(t[e])}).join("&")}}]),e}());function cO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function cx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return cS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cS(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}null==cC||null===(cW=cC.interceptors)||void 0===cW||null===(cG=cW.request)||void 0===cG||cG.use(function(e){cl||(cl=ak.get().pipeOwner("payment-common.retry"));var t=cv(e.action);return cg(e)&&t&&(t.lastRequestTime=Date.now()),e}),null==cC||null===(cz=cC.interceptors)||void 0===cz||null===(cK=cz.response)||void 0===cK||cK.use(null,function(e){var t=e.options,n=e.url;if(!t)return Promise.reject(e);var r=cv(t.action,t.retryOptions);if(!cg(t)||!r)return Promise.reject(e);if(function(e,t,n){if(!e||!function(e,t){switch(e){case a3.Init:case a3.SaveAbandonOrder:case a3.ExpressFirstLoad:case a3.ExpressUpdateDetail:return!!t&&400!==t.statusCode;case a3.I18n:return!0;default:return!1}}(e,n))return!1;var r,o,i=t.retryCount<(null==t?void 0:t.maxCount),a=n.statusCode,c={action:e,statusCode:a,url:n.url};return i?null===(r=cl)||void 0===r||r.log("start_retry",{data:ch(ch({},c),{},{retryCount:t.retryCount})}):(null===(o=cl)||void 0===o||o.error("retry_max_times",{data:c,errorLevel:0===a?ac.P2:ac.P1}),t.retryCount=0),i}(t.action,r,e)){if(r.retryCount+=1,t.timeout&&r.lastRequestTime){var o=Date.now()-r.lastRequestTime;t.timeout=Math.max(t.timeout-o-r.interval,1)}return new Promise(function(e){return setTimeout(function(){e(cC.http(n,t))},r.interval)})}return Promise.reject(e)});var ck=function(e){return"function"==typeof e};function cP(e){return"[object Object]"===Object.prototype.toString.call(e)}function cE(e){return!e||e.nodeType||"object"!==iE(e)?e:JSON.parse(JSON.stringify(e))}function cI(e,t){if(null==t)return cE(e);if(!cP(t)||!cP(e))return cE(t);var n={};return Object.keys(e).map(function(r){n[r]=cI(e[r],t[r])}),Object.keys(t).map(function(e){n[e]||(n[e]=cE(t[e]))}),n}var cT=window.performance&&"function"==typeof window.performance.now?window.performance:Date,cA=function e(t){t instanceof Array?t.forEach(function(t){return e(t)}):"object"===iE(t)&&null!==t&&Object.entries(t).forEach(function(n){var r=cx(n,2),o=r[0],i=r[1];null===i?delete t[o]:i instanceof Array?i.forEach(function(t){return e(t)}):"object"===iE(i)&&e(i)})},cD=ak.get();function cL(e){var t=e.prototype,n={validate:t.validate,handleError:t.handleError,handleDynamicNotify:t.handleDynamicNotify,dynamicJsonpCallback:t.dynamicJsonpCallback,handleDynamic:t.handleDynamic,handleRenderTimeout:t.handleRenderTimeout,beforeInit:t.beforeInit,beforeCreateOrder:t.beforeCreateOrder,afterCreateOrder:t.afterCreateOrder,removeSkeleton:t.removeSkeleton};Object.keys(n).forEach(function(t){e.prototype[t]=aE(aH.mark(function e(){var r,o,i,a,c=arguments;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r="【".concat(t,"】"),e.prev=1,cD.info("".concat(r,"[开始执行]")),i=Array(o=c.length),a=0;a<o;a++)i[a]=c[a];return e.abrupt("return",n[t].apply(this,i));case 7:throw e.prev=7,e.t0=e.catch(1),cD.error("".concat(r,"[执行失败]"),{error:e.t0}),e.t0;case 11:case"end":return e.stop()}},e,this,[[1,7]])}))})}var cj="smart-payment-hide",cN="smart-payment-button-disabled",cB="smart-payment-button-loading",cF="express_common_style_id",cR=function(e){e.styleOptions;var t,n=e.domId,r=document.getElementById(n),o=document.getElementById(cF);if(r&&!o){var i=document.createElement("style");i.setAttribute("id",cF);var a="\n    .".concat(cj," {\n      display: none !important;\n    }\n    .").concat(cN,"::before {\n      width: 0 !important;\n    }\n    .").concat(cN,"::after {\n      content: '';\n      display: block;\n      z-index: 100;\n      width: 100% !important;\n      height: 100% !important;\n      border-radius: 4px;\n      cursor: not-allowed;\n      position: absolute;\n      top: 0;\n      left: 0 !important;\n      background: transparent !important;\n    }\n    .").concat(cN," {\n      opacity: 0.3;\n    }\n\n    @keyframes rotate {\n      from {\n        transform: rotate(0deg);\n      }\n      to {\n        transform: rotate(359deg);\n      }\n    }\n\n    .").concat(cB,"::before {\n      content: '';\n      display: inline-block;\n      background-color: black;\n      width: 100%;\n      height: 100%;\n      border-radius: 0px;\n    }\n\n    .").concat(cB,"::after {\n      content: '';\n      display: inline-block;\n      position: absolute;\n      border: 2px solid white;\n      top: calc(50% - 8px);\n      left: calc(50% - 8px);\n      width: 16px;\n      height: 16px;\n      border-radius: 16px;\n      clip-path: polygon(0% 0%, 100% 0%, 100% 70%, 0% 70%);\n      animation: rotate 1s linear infinite;\n    }\n  ");i.innerHTML="".concat(a),null===(t=r.parentElement)||void 0===t||t.insertBefore(i,r)}},cM=function(e){var t,n=e.styleOptions,r=e.domId,o=document.getElementById(r);if(o){var i=document.createElement("style"),a="\n    #".concat(r," .express-payment-button-common-item {\n      min-height: ").concat((null==n?void 0:n.height)||48,"px;\n      width: 100%;\n    }\n  ");void 0===(null==n?void 0:n["border-radius"])&&(a+="\n      #".concat(r," .").concat(cB,"::before {\n        border-radius: 4px;\n      }\n\n      [data-button_style=square] #").concat(r," .").concat(cB,"::before {\n        border-radius: 0;\n      }\n\n      [data-button_style=rounded] #").concat(r," .").concat(cB,"::before {\n        border-radius: 9999px;\n      }\n    ")),i.innerHTML="".concat(a),null===(t=o.parentElement)||void 0===t||t.insertBefore(i,o)}},cU=aD(function e(t){var n=this;aI(this,e),aR(this,"config",void 0),aR(this,"isVisible",!0),aR(this,"showButton",function(){var e=document.getElementById(n.config.paymentInfo.currentDomId);null==e||e.classList.remove(cj),n.isVisible=!0}),aR(this,"hideButton",function(){var e=document.getElementById(n.config.paymentInfo.currentDomId);null==e||e.classList.add(cj),n.isVisible=!1}),this.config=t}),cH=function(e,t){var n=[];return Object.keys(t).forEach(function(e){return t[e]&&n.push("".concat(e,"=").concat(t[e]))}),-1===e.search(/\?/)?e+="?".concat(n.join("&")):e+="&".concat(n.join("&")),e},cY=function(){function e(t){var n=this;aI(this,e),aR(this,"type",void 0),aR(this,"domId",void 0),aR(this,"logger",ak.get().pipeOwner("payment-common.3DS")),aR(this,"handlePostmessage",function(e){var t=e.data,r=e.origin;if(!1!==/^https:\/\/([^.]+)?\.myshopline([^.]+)?\.com$/.test(r)){n.logger.log("3DS_handlePostmessage",{data:{data:t,origin:r,domId:n.domId}});var o=t.success,i=t.nextAction||{},a=t.nextAction||{},c=a.url,s=a.type;if(o){if(s===aZ.Redirect&&c){if(window.removeEventListener("message",n.handlePostmessage,!1),n.domId){var u=document.getElementById(n.domId);u&&u.parentElement&&u.parentElement.removeChild(u)}c$(i)}s===aZ.OpenIframe&&n.openIframe(t.nextAction)}}}),this.type=t}return aD(e,[{key:"handleIframe",value:function(e){var t,n,r,o=e.type,i=e.iframeType,a=e.url,c=void 0===a?"":a,s="".concat(o,"Iframe-").concat(Date.now());return this.domId=s,i===a1.Hidden?((t=document.createElement("iframe")).src=c,t.name=s,t.style.width="1px",t.style.height="1px",t.style.display="none",t.style.border="none",document.body.appendChild(t),r=t):i===a1.Visible&&((n=document.createElement("iframe")).src=c,n.name=s,n.style.width="100%",n.style.height="100%",n.style.display="block",n.style.border="none",n.style.zIndex="1000",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.background="#fff",document.body.appendChild(n),r=n),r}},{key:"openIframe",value:function(e){this.logger.log("3DS_openIframe_start",{data:{nextAction:e,domId:this.domId}});var t,n=e.url,r=e.type,o=e.header,i=null!=o&&null!==(t=o.openIframeOptions)&&void 0!==t&&t.hidden?a1.Hidden:a1.Visible;this.handleIframe({type:r,iframeType:i,url:n}),window.removeEventListener("message",this.handlePostmessage,!1),window.addEventListener("message",this.handlePostmessage,!1)}}]),e}();function cq(){return(cq=aE(aH.mark(function e(t){var n,r,o,i,a,c;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=void 0===(r=t.method)?"GET":r,i=t.url,a=t.data,o!==aQ.GET){e.next=7;break}return e.next=4,cC.get(i);case 4:c=e.sent,e.next=11;break;case 7:if(o!==aQ.POST){e.next=11;break}return e.next=10,cC.post(i,a||{});case 10:c=e.sent;case 11:return e.abrupt("return",null===(n=c)||void 0===n?void 0:n.data);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function c$(e){return cV.apply(this,arguments)}function cV(){return(cV=aE(aH.mark(function e(t){var n,r,o,i;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=void 0===(n=t.method)?"GET":n,o=t.url,i=t.data,"POST"===r?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"post",r=arguments.length>3?arguments[3]:void 0,o=document.createElement("form");for(var i in o.style.display="none",o.method=n,o.action=e,r&&(o.target=r),t){var a=document.createElement("input");a.name=i,a.value=t[i]||"",o.appendChild(a)}document.body.appendChild(o),o.submit()}(o,i):"GET"===r&&window.location.assign(o);case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var cW,cG,cz,cK,cJ,cX,cZ,cQ,c0,c1,c3=(cJ=aE(aH.mark(function e(t,n){var r,o,i,a;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=t.type)!==aZ.Redirect){e.next=5;break}c$(t),e.next=22;break;case 5:if(r!==aZ.ChannelInfoUpdate){e.next=14;break}return e.next=8,function(e){return cq.apply(this,arguments)}(t);case 8:if(null==(o=e.sent)||!o.nextAction){e.next=12;break}return e.next=12,c3(o.nextAction,n);case 12:case 19:e.next=22;break;case 14:if(r!==aZ.ChannelConfirm){e.next=21;break}if(null==(a=null==n||null===(i=n.payOptions)||void 0===i?void 0:i.hooks)||!a.channelConfirm){e.next=19;break}return e.next=19,a.channelConfirm(t);case 21:r===aZ.OpenIframe&&new cY(t.type).openIframe(t);case 22:case"end":return e.stop()}},e)})),function(e,t){return cJ.apply(this,arguments)});(c2=cZ||(cZ={})).TEST="TEST",c2.PRODUCTION="PRODUCTION",(c4=cQ||(cQ={})).INITIALIZE="INITIALIZE",c4.SHIPPING_ADDRESS="SHIPPING_ADDRESS",c4.SHIPPING_OPTION="SHIPPING_OPTION",c4.OFFER="OFFER",(c5=c0||(c0={})).NOT_CURRENTLY_KNOWN="NOT_CURRENTLY_KNOWN",c5.ESTIMATED="ESTIMATED",c5.FINAL="FINAL",(c6=c1||(c1={})).DEFAULT="DEFAULT",c6.COMPLETE_IMMEDIATE_PURCHASE="COMPLETE_IMMEDIATE_PURCHASE";var c2,c4,c5,c6,c9,c8,c7,se=(aR(cX={},cQ.INITIALIZE,aX.Ordinary),aR(cX,cQ.SHIPPING_ADDRESS,aX.ChangeAddress),aR(cX,cQ.SHIPPING_OPTION,aX.ChangeDeliveryMethod),aR(cX,cQ.OFFER,aX.UseDiscountCode),cX);(sy=c9||(c9={})).OFFER_INVALID="OFFER_INVALID",sy.PAYMENT_DATA_INVALID="PAYMENT_DATA_INVALID",sy.SHIPPING_ADDRESS_INVALID="SHIPPING_ADDRESS_INVALID",sy.SHIPPING_ADDRESS_UNSERVICEABLE="SHIPPING_ADDRESS_UNSERVICEABLE",sy.SHIPPING_OPTION_INVALID="SHIPPING_OPTION_INVALID",sy.OTHER_ERROR="OTHER_ERROR",(sm=c8||(c8={}))[sm.TimeoutToLoadPaymentData=18]="TimeoutToLoadPaymentData",sm[sm.UserCancel=20]="UserCancel",(c7||(c7={})).CANCELED="CANCELED";var st=function(){function e(t,n,r){var o=this;aI(this,e),aR(this,"container",void 0),aR(this,"button",void 0),aR(this,"options",void 0),aR(this,"insertStyle",function(){var e=document.createElement("style"),t="\n      .gpay-card-info-container {\n        border-radius: 0;\n        min-width: 140px;\n        min-height: 36px;\n      }\n\n      .".concat(cB," .gpay-card-info-container-fill {\n        display: none;\n      }\n    ");void 0===o.options["border-radius"]&&(t+="\n        #".concat(o.container.id," .gpay-card-info-container {\n          border-radius: 4px;\n        }\n\n        [data-button_style=square] #").concat(o.container.id," .gpay-card-info-container {\n          border-radius: 0;\n        }\n\n        [data-button_style=rounded] #").concat(o.container.id," .gpay-card-info-container {\n          border-radius: 9999px;\n        }\n      ")),e.innerHTML=t;var n=48;o.options.height&&(n=o.options.height),o.container.style.height="".concat(n,"px"),o.container.appendChild(e)}),aR(this,"insertButton",function(){o.container.appendChild(o.button)}),this.container=t,this.button=n,this.options=r,this.insertStyle(),this.insertButton()}return aD(e,[{key:"setDisabled",value:function(e){e?this.container.classList.add(cN):this.container.classList.remove(cN)}},{key:"setLoading",value:function(e){e?this.container.classList.add(cB):this.container.classList.remove(cB)}}]),e}(),sn=function(){if(/iphone|ipod|ipad/i.test(navigator.userAgent.toLowerCase()))return!1;var e,t=navigator.userAgent.match(/Chrome\/(\d+)/),n=t&&t[1]&&Number(t[1])>=61;return(!!(e=window.navigator.userAgent).match("CriOS")||/Chrome/.test(e)&&/Google Inc./.test(window.navigator.vendor)&&!!window.chrome)&&n};function sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function so(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(n),!0).forEach(function(t){aR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var si=function(e){aN(i,cU);var t,n,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=aF(i);return e=t?Reflect.construct(n,arguments,aF(this).constructor):n.apply(this,arguments),aB(this,e)});function i(e){var t,n,r,a;return aI(this,i),aR(aL(r=o.call(this,e)),"name","GOOGLE_PAY"),aR(aL(r),"config",void 0),aR(aL(r),"paymentsClient",null),aR(aL(r),"buttonElement",null),aR(aL(r),"disabled",!1),aR(aL(r),"loading",!1),aR(aL(r),"initSuccess",!0),aR(aL(r),"loadResourceFail",!1),aR(aL(r),"initTime",0),aR(aL(r),"logger",void 0),aR(aL(r),"onPaymentDataChanged",(a=aE(aH.mark(function e(t){var n,o,i,a,c,s;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.callbackTrigger,e.next=3,null===(n=(o=r.config).onFormDataChange)||void 0===n?void 0:n.call(o,t,se[i]).catch(function(){r.handleError(Error("Failed to update abandonedOrder info"),aq.Pay)});case 3:if(a=e.sent,r.logger.info("订单信息变更，从业务方获取的更新后的数据",{data:so({},a)}),a&&!a.error){e.next=7;break}return e.abrupt("return",{error:{reason:c9.OTHER_ERROR,intent:i===cQ.OFFER?cQ.INITIALIZE:i,message:(null==a||null===(c=a.error)||void 0===c?void 0:c.message)||"update error"}});case 7:return cA(s={newOfferInfo:a.newOfferInfo,newTransactionInfo:a.newTransactionInfo,newShippingOptionParameters:a.newShippingOptionParameters}),r.logger.log("订单信息变更，返回给渠道的数据",{data:so({},s)}),e.abrupt("return",s);case 12:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)})),aR(aL(r),"onPaymentAuthorized",function(e){return new Promise(function(t,n){var o,i;(null===(o=(i=r.config).createOrder)||void 0===o?void 0:o.call(i,r.config.paymentInfo,{payChannelData:e,token:e})).then(function(e){if(!e||e.error)throw e.error;r.afterCreateOrder(aJ.Success),t({transactionState:"SUCCESS"}),c3(e.nextAction)}).catch(function(e){r.afterCreateOrder(aJ.Fail),n({reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_AUTHORIZATION",message:e.message||"pay error"})})})}),aR(aL(r),"onGooglePaymentButtonClicked",aE(aH.mark(function e(){var t,n,o,i;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.paymentsClient&&!r.loading&&!r.disabled){e.next=2;break}return e.abrupt("return");case 2:return r.setLoading(!0),e.next=5,r.beforeCreateOrder().catch(function(){return{valid:!1}});case 5:if(n=e.sent,r.setLoading(!1),!1!==(null==n?void 0:n.valid)){e.next=9;break}return e.abrupt("return");case 9:if(o=null==n||null===(t=n.paymentConfig)||void 0===t?void 0:t.payChannelData){e.next=12;break}return e.abrupt("return");case 12:cA(o),i=setTimeout(function(){r.onChannelModalSuccess()},1e3),r.logger.log("用户点击GP按钮，拉起支付弹窗",{data:so({},o)}),r.paymentsClient.loadPaymentData(o).catch(function(e){clearTimeout(i),e.statusCode!==c7.CANCELED||e.code!==c8.TimeoutToLoadPaymentData?e.statusCode!==c7.CANCELED?r.handleError(Error("pay failed"),aq.Pay,{error:e}):r.logger.log("loadPaymentData return cancel error",{data:{error:e}}):r.handleError(Error("Failed to pull up the channel"),aq.PullUpChannel,{error:e})});case 16:case"end":return e.stop()}},e)}))),r.config=e,ak.set(null===(t=(n=r.config).loggerFn)||void 0===t?void 0:t.call(n)),r.logger=ak.get().pipeOwner("payment-common.SLP-GooglePay").pipeData({domId:"".concat(r.config.props.domId)}),r}return aD(i,[{key:"render",value:(r=aE(aH.mark(function e(){return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(sn()){e.next=3;break}return this.handleError(Error("The current browser does not support Google Pay"),aq.Init),e.abrupt("return");case 3:return this.beforeInit(),e.next=6,this.loadChannelJs();case 6:if(e.sent){e.next=9;break}return e.abrupt("return");case 9:if(this.createClient()){e.next=12;break}return e.abrupt("return");case 12:this.renderButton(),this.afterInit();case 14:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"beforeInit",value:function(){this.initTime=cT.now(),ck(this.config.beforeInit)&&this.config.beforeInit()}},{key:"afterInit",value:function(){this.initSuccess=!0,this.showButton();var e=cT.now()-this.initTime;this.logger.log("afterInit",{data:{duration:e}}),ck(this.config.afterInit)&&this.config.afterInit()}},{key:"onChannelModalSuccess",value:function(){ck(this.config.onChannelModalSuccess)&&this.config.onChannelModalSuccess(this.config.paymentInfo)}},{key:"beforeCreateOrder",value:(n=aE(aH.mark(function e(){var t,n,r,o,i;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ck(this.config.beforeCreateOrder)){e.next=2;break}return e.abrupt("return");case 2:return n=(t=this.config.paymentInfo).channelCode,r=t.methodCode,o=t.paymentId,e.next=5,this.config.beforeCreateOrder({channelCode:n,methodCode:r,paymentId:o});case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"afterCreateOrder",value:function(e){ck(this.config.afterCreateOrder)&&this.config.afterCreateOrder(e,{channelCode:aV.SLpayments,methodCode:aW.GooglePay})}},{key:"setDisabled",value:function(e){var t;this.disabled=e,null===(t=this.buttonElement)||void 0===t||t.setDisabled(e)}},{key:"setLoading",value:function(e){var t;this.loading=e,null===(t=this.buttonElement)||void 0===t||t.setLoading(e)}},{key:"loadChannelJs",value:function(){var e=this;return new Promise(function(t){a2("https://pay.google.com/gp/p/js/pay.js",{returnPromise:!0}).then(function(){e.loadResourceFail=!1,t(!0)}).catch(function(n){e.loadResourceFail=!0,e.handleError(Error("Failed to load channel js resource:".concat(n)),aq.Init),t(!1)})})}},{key:"createClient",value:function(){var e=this.config.paymentInfo.sdkEnv===az.Prod?cZ.PRODUCTION:cZ.TEST;try{return this.paymentsClient=new window.google.payments.api.PaymentsClient({environment:e,paymentDataCallbacks:{onPaymentDataChanged:this.onPaymentDataChanged,onPaymentAuthorized:this.onPaymentAuthorized}}),this.paymentsClient}catch(e){this.handleError(Error("Failed to create channel instance"),aq.Init,{channelMsg:e.message})}}},{key:"renderButton",value:function(){if(this.paymentsClient)try{var e,t,n=this.paymentsClient.createButton({onClick:this.onGooglePaymentButtonClicked,buttonSizeMode:"fill"}),r=document.getElementById(this.config.paymentInfo.currentDomId);if(!r)throw Error("Container not found: #".concat(this.config.paymentInfo.currentDomId));this.buttonElement=new st(r,n,{height:null===(e=this.config.props.styleOptions)||void 0===e?void 0:e.height,"border-radius":null===(t=this.config.props.styleOptions)||void 0===t?void 0:t["border-radius"]})}catch(e){this.handleError(Error("Failed to render button"),aq.Init,{channelMsg:e.message})}}},{key:"handleError",value:function(e,t,n){window[window.__sl_console__?"__sl_console__":"console"].error("GP 统一错误处理: ",{error:e,type:t,extData:n}),t!==aq.CreateExpected&&this.logger.error("handleError",{action:t,error:e,data:so({},n)}),t===aq.Init&&(this.initSuccess=!1,this.hideButton()),ck(this.config.onError)&&this.config.onError(e,t,n)}}]),i}();function sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sa(Object(n),!0).forEach(function(t){aR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sa(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ss=function(e){if(null!=e&&e.paymentInfo){var t=e.paymentInfo.configData;e.props=sc(sc({},e.props),t)}return e};function su(e){return"object"===("undefined"==typeof Node?"undefined":iE(Node))?e instanceof Node:e&&"object"===iE(e)&&"number"==typeof e.nodeType}function sl(){var e=[];return{watch:e.push.bind(e),trigger:function(t,n){for(var r=!0,o={detail:n,preventDefault:function(){r=!1}},i=0;i<e.length;i++)e[i](t,o);return r}}}function sd(e){return"none"===window.getComputedStyle(e).display}function sp(e){this.elem=e}sp.make=function(e,t){"string"==typeof e&&(e=document.querySelector(e));var n=document.createElement(t||"div");return(e||document.body).appendChild(n),new sp(n)},sp.prototype={child:function(e){return sp.make(this.elem,e)},stylize:function(e){for(var t in void 0!==(e=e||{}).opacity&&(e.filter="alpha(opacity="+100*e.opacity+")"),e)e.hasOwnProperty(t)&&(this.elem.style[t]=e[t]);return this},clazz:function(e){return this.elem.className+=" "+e,this},html:function(e){return su(e)?this.elem.appendChild(e):this.elem.innerHTML=e,this},onClick:function(e){return this.elem.addEventListener("click",e),this},destroy:function(){this.elem.parentNode.removeChild(this.elem)},hide:function(){this.elem.style.display="none"},show:function(){this.elem.style.display="block"},attr:function(e,t){return void 0!==t&&this.elem.setAttribute(e,t),this},anyAncestor:function(e){for(var t=this.elem;t;){if(e(new sp(t)))return!0;t=t.parentNode}return!1},isVisible:function(){return!sd(this.elem)}};var sf=1;function sh(e){return function(){return e().elem}}var sy,sm,sv,sg,sb,s_,sw,sC=sl(),sO=sl();document.documentElement.addEventListener("keydown",function(e){var t=e.which||e.keyCode;27===t?sC.trigger():9===t&&sO.trigger(e)}),(sS=sv||(sv={})).Validatemerchant="validatemerchant",sS.Paymentmethodselected="paymentmethodselected",sS.Cancel="cancel",sS.Shippingcontactselected="shippingcontactselected",sS.Authorize="Authorize",sS.Create="create",sS.Couponcodechanged="couponcodechanged",sS.Shippingmethodselected="shippingmethodselected",sS.Paymentauthorized="paymentauthorized",(sx=sg||(sg={})).ShippingContactInvalid="shippingContactInvalid",sx.BillingContactInvalid="billingContactInvalid",sx.AddressUnserviceable="addressUnserviceable",sx.CouponCodeInvalid="couponCodeInvalid",sx.CouponCodeExpired="couponCodeExpired",sx.Unknown="unknown",(sb||(sb={})).Credit="credit",(s_||(s_={})).Unknown="unknown";var sS,sx,sk,sP,sE="applepay-confirm-modal",sI='<svg width="59" height="24" viewBox="0 0 59 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M10.6871 3.0942C10.002 3.90485 8.90594 4.54424 7.80985 4.4529C7.67283 3.3568 8.20947 2.1922 8.83744 1.47288C9.5225 0.639391 10.7214 0.0456708 11.6919 0C11.806 1.14177 11.3608 2.2607 10.6871 3.0942ZM11.6804 4.66984C10.0934 4.5785 8.73468 5.57184 7.98111 5.57184C7.21613 5.57184 6.06294 4.71551 4.80699 4.73834C3.17426 4.76118 1.65571 5.68601 0.822213 7.1589C-0.890442 10.1047 0.376923 14.4662 2.03249 16.8639C2.84315 18.0514 3.81365 19.353 5.09243 19.3073C6.30271 19.2617 6.78225 18.5195 8.24372 18.5195C9.7166 18.5195 10.1391 19.3073 11.4178 19.2845C12.7423 19.2617 13.5758 18.0971 14.3864 16.9096C15.3113 15.5623 15.6881 14.2493 15.7109 14.1808C15.6881 14.1579 13.1533 13.1874 13.1305 10.2645C13.1077 7.82112 15.1286 6.65652 15.2199 6.58801C14.0782 4.89819 12.297 4.71551 11.6804 4.66984ZM20.8489 1.35871V19.1589H23.6119V13.0733H27.4369C30.9307 13.0733 33.3855 10.6755 33.3855 7.20457C33.3855 3.73359 30.9764 1.35871 27.5282 1.35871H20.8489ZM23.6119 3.68792H26.7975C29.1952 3.68792 30.5653 4.9667 30.5653 7.21598C30.5653 9.46527 29.1952 10.7555 26.7861 10.7555H23.6119V3.68792ZM38.4321 19.2959C40.1676 19.2959 41.7775 18.4167 42.5082 17.0238H42.5653V19.1589H45.1229V10.2988C45.1229 7.72978 43.0677 6.07421 39.905 6.07421C36.9706 6.07421 34.8013 7.75262 34.7214 10.059H37.2104C37.4159 8.96289 38.4321 8.24358 39.8251 8.24358C41.5149 8.24358 42.4626 9.0314 42.4626 10.4814V11.4634L39.0144 11.6689C35.806 11.863 34.0706 13.176 34.0706 15.4596C34.0706 17.7659 35.8631 19.2959 38.4321 19.2959ZM39.1743 17.1836C37.7014 17.1836 36.7651 16.4757 36.7651 15.3911C36.7651 14.2721 37.6671 13.6213 39.3912 13.5186L42.4626 13.3245V14.3292C42.4626 15.9962 41.0468 17.1836 39.1743 17.1836ZM48.5368 24C51.2314 24 52.4987 22.9724 53.6062 19.8554L58.4588 6.24548H55.65L52.396 16.7612H52.3389L49.0848 6.24548H46.1962L50.8774 19.2046L50.6262 19.9924C50.2038 21.3283 49.5187 21.8421 48.297 21.8421C48.0801 21.8421 47.6576 21.8192 47.4864 21.7964V23.9315C47.6462 23.9772 48.3313 24 48.5368 24Z" fill="currentColor"/>\n</svg>',sT={props:{payMode:a$.Continue,timeout:{switch:!1,delay:5e3},timing:!1}},sA=(aR(sw={},sv.Paymentmethodselected,aX.Ordinary),aR(sw,sv.Shippingcontactselected,aX.ChangeAddress),aR(sw,sv.Cancel,aX.Ordinary),aR(sw,sv.Validatemerchant,aX.Ordinary),aR(sw,sv.Authorize,aX.Ordinary),aR(sw,sv.Create,aX.Ordinary),aR(sw,sv.Couponcodechanged,aX.UseDiscountCode),aR(sw,sv.Shippingmethodselected,aX.ChangeDeliveryMethod),aR(sw,sv.Paymentauthorized,aX.Ordinary),sw),sD=(sk=aE(aH.mark(function e(t){var n,r,o,i,a;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={useRetry:!0,action:a3.I18n,retryOptions:{maxCount:3,interval:1e3}},r=t.project,o=t.env,i=t.lang,e.next=4,cC.get("https://cdn.myshopline.com/t/i18n/".concat(r,"/").concat(o,"/").concat(i,".raw.tree.json"),n);case 4:return a=e.sent,e.abrupt("return",a.data);case 6:case"end":return e.stop()}},e)})),function(e){return sk.apply(this,arguments)});(sL=sP||(sP={})).Dev="develop",sL.Stg="staging",sL.Prev="preview",sL.Prod="product";var sL,sj,sN="pay-button";(s0=sj||(sj={})).Stg="stg",s0.Prev="prev",s0.Prod="prod";var sB=function(e,t){var n=t.split(".").reduce(function(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:{}},e);return"[object Object]"===Object.prototype.toString.call(n)?"":n},sF=function(e){var t;return(aR(t={},sP.Dev,sj.Stg),aR(t,sP.Stg,sj.Stg),aR(t,sP.Prev,sj.Prev),aR(t,sP.Prod,sj.Prod),t)[e]},sR={applepay:{cancel:"Cancel",enquire:"Continue to place the order with Apple Pay?",paywith:"Pay with"},cart:{cart:{buy_now:"Buy now"},checkout:{max_amount_limit:"You exceeded the maximum amount for checkout"},couponCode:{existCode:"Discount code already exists"},error:{default:"Failed to load resource",noshipping:"No available shipping rate plans",order:"Unable to place order",renew:"Failed to update data"}},general:{abandon:{Order:{risk:"You have sent too many requests"}}},product_detail:{link_preview_does_not_support:"The link preview does not support this action"},products:{product_details:{more_payment_options:"More payment options"},product_list:{select_product_all_options:"Please select all options of this product"}},sdk:{button:{show:"More"}},transaction:{discount:{code_error:"Enter a valid discount code"}},unvisiable:{shopby:{button:{show:"Secured and Faster"}}}},sM=new(aD(function e(){var t,n=this;aI(this,e),aR(this,"locale",sR),aR(this,"envLocal",window.__I18N__),aR(this,"language",""),aR(this,"setLanguage",(t=aE(aH.mark(function e(t){var r,o,i;return aH.wrap(function(e){for(var a;;)switch(e.prev=e.next){case 0:if(n.language!==t){e.next=2;break}return e.abrupt("return");case 2:return n.language=t,r=sF((null===(a=window.__ENV__)||void 0===a?void 0:a.APP_ENV)||sP.Prod),o=sR,i=ak.get().withOwner("I18n"),e.prev=7,i.info("get i18n json",{data:{project:sN,env:r,lang:t}}),e.next=11,sD({project:sN,env:r,lang:t});case 11:o=e.sent,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),i.error("get i18n json error",{error:e.t0});case 17:n.locale=o;case 18:case"end":return e.stop()}},e,null,[[7,14]])})),function(e){return t.apply(this,arguments)})),aR(this,"useI18n",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,r){var o=sB(n.envLocal||{},e?[e,t].join("."):t)||"";return o||(o=sB(n.locale||{},e?[e,t].join("."):t)||""),r&&Object.entries(r).forEach(function(e){var t=cx(e,2),n=t[0],r=t[1];return o=o.replace(RegExp("{".concat(n,"}"),"ig"),r)}),o}})})),sU=sM.useI18n,sH=sM.setLanguage,sY=sU(),sq=(s1=aE(aH.mark(function e(t){var n,r,o,i,a;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ok,r=t.cancel,o="".concat(sE,"-action-ok"),i="".concat(sE,"-action-cancel"),a=(function(e){("string"==typeof e||su(e))&&(e={content:e});var t,n,r,o,i=sl(),a=sl(),c=sl(),s=sl(),u=sl();function l(t,n){var r=e[t];return"function"==typeof r&&(r=r(n)),void 0===r?n:r}var d,p,f=b.bind(window,"modal"),h=b.bind(window,"overlay"),y=b.bind(window,"close");function m(e){h().hide(),f().hide(),u.trigger(d,e)}function v(e){s.trigger(d,e)&&m(e)}function g(e){return function(){return e.apply(this,arguments),d}}function b(e,t){if(!p){var n,r,o=("number"==typeof(n=l("width","auto"))&&(n+="px"),r=l("modalId","pico-"+sf++),sp.make(l("parent")).clazz("pico-content").clazz(l("modalClass","")).stylize({display:"none",position:"fixed",zIndex:10001,left:"50%",top:"38.1966%",maxHeight:"90%",boxSizing:"border-box",width:n,"-ms-transform":"translate(-50%,-38.1966%)","-moz-transform":"translate(-50%,-38.1966%)","-webkit-transform":"translate(-50%,-38.1966%)","-o-transform":"translate(-50%,-38.1966%)",transform:"translate(-50%,-38.1966%)"}).stylize(l("modalStyles",{overflow:"auto",backgroundColor:"white",padding:"20px",borderRadius:"5px"})).html(l("content")).attr("id",r).attr("role","dialog").attr("aria-labelledby",l("ariaLabelledBy")).attr("aria-describedby",l("ariaDescribedBy",r)).onClick(function(e){new sp(e.target).anyAncestor(function(e){return/\bpico-close\b/.test(e.elem.className)})&&v()}));p={modal:o,overlay:sp.make(l("parent")).clazz("pico-overlay").clazz(l("overlayClass","")).stylize({display:"none",position:"fixed",top:"0px",left:"0px",height:"100%",width:"100%",zIndex:1e4}).stylize(l("overlayStyles",{opacity:.5,background:"#000"})).onClick(function(){l("overlayClose",!0)&&v()}),close:function(e,t){if(t("closeButton",!0))return e.child("button").html(t("closeHtml","&#xD7;")).clazz("pico-close").clazz(t("closeClass","")).stylize(t("closeStyles",{borderRadius:"2px",border:0,padding:0,cursor:"pointer",height:"15px",width:"15px",position:"absolute",top:"5px",right:"5px",fontSize:"16px",textAlign:"center",lineHeight:"15px",background:"#CCC"})).attr("aria-label",t("close-label","Close"))}(o,l)},i.trigger(d,t)}return p[e]}return function(e,t){var n;function r(e,t){return(e.msMatchesSelector||e.webkitMatchesSelector||e.matches).call(e,t)}function o(e){return!(sd(e)||r(e,":disabled")||e.hasAttribute("contenteditable"))&&(e.hasAttribute("tabindex")||r(e,"input,select,textarea,button,a[href],area[href],iframe"))}function i(e){for(var t=e.getElementsByTagName("*"),n=0;n<t.length;n++)if(o(t[n]))return t[n]}e.beforeShow(function(){n=document.activeElement}),e.afterShow(function(){if(t()){var n=i(e.modalElem());n&&n.focus()}}),e.afterClose(function(){t()&&n&&n.focus(),n=null}),sO.watch(function(n){if(t()&&e.isVisible()){var r=i(e.modalElem()),a=function(e){for(var t=e.getElementsByTagName("*"),n=t.length;n--;)if(o(t[n]))return t[n]}(e.modalElem());(n.shiftKey?r:a)===document.activeElement&&((n.shiftKey?a:r).focus(),n.preventDefault())}})}(d={modalElem:sh(f),closeElem:sh(y),overlayElem:sh(h),buildDom:g(b.bind(null,null)),isVisible:function(){return!!(p&&f&&f().isVisible())},show:function(e){return a.trigger(d,e)&&(h().show(),y(),f().show(),c.trigger(d,e)),this},close:g(v),forceClose:g(m),destroy:function(){f().destroy(),h().destroy(),h=f=y=void 0},options:function(t){Object.keys(t).map(function(n){e[n]=t[n]})},afterCreate:g(i.watch),beforeShow:g(a.watch),afterShow:g(c.watch),beforeClose:g(s.watch),afterClose:g(u.watch)},l.bind(null,"focus",!0)),t=d,n=l.bind(null,"bodyOverflow",!0),o=new sp(document.body),t.beforeShow(function(){r=o.elem.style.overflow,n()&&o.stylize({overflow:"hidden"})}),t.afterClose(function(){o.stylize({overflow:r})}),sC.watch(function(){l("escCloses",!0)&&d.isVisible()&&d.close()}),d})({content:'<div>\n        <div class="'.concat(sE,'-header">').concat(sI,'</div>\n        <div class="').concat(sE,'-content">').concat(sY("applepay.enquire"),'</div>\n        <div class="').concat(sE,'-action">\n          <button class="').concat(o,'"><span>').concat(sY("applepay.paywith"),"</span> ").concat(sI,'</button>\n          <button class="').concat(i,'">').concat(sY("applepay.cancel"),"</button>\n        </div>\n      </div>"),modalStyles:function(e){return e.width="calc(100% - 32px)",e.maxWidth="397px",e.padding="24px",e.top="45%",e.borderRadius="8px",e.background="rgba(255, 255, 255, 1)",e.backdropFilter="blur(6px)",e},overlayStyles:function(e){return e.backgroundColor="rgba(0, 0, 0, 0.5)",e.opacity="1",e},modalClass:"sl-payment ".concat(sE),closeButton:!1,overlayClose:!1,escCloses:!1}).afterCreate(function(e){var t,a,c=e.modalElem();if(!c)throw Error("picoModal instantiated object not found");null===(t=c.querySelector(".".concat(o)))||void 0===t||t.addEventListener("click",function(){e.close(),n(e)}),null===(a=c.querySelector(".".concat(i)))||void 0===a||a.addEventListener("click",function(){e.close(),null==r||r()})}),e.abrupt("return",a);case 5:case"end":return e.stop()}},e)})),function(e){return s1.apply(this,arguments)}),s$=function(e){var t,n=e.node,r=e.domId,o=e.height,i=e.wrapperClass,a=document.createElement("div");a.classList.add("applepay__bg");var c=document.createElement("style");if(sV({styleTag:c,domId:r,height:o}),n)return i&&n.classList.add(i),null===(t=n.parentElement)||void 0===t||t.insertBefore(c,n),n.appendChild(a),a},sV=function(e){var t=e.styleTag,n=e.domId,r=e.height;t.innerHTML="\n    #".concat(n," applepay__bg {\n        overflow: hidden;\n        text-align: center;\n        height: ").concat(r,"px;\n      }\n    ")};function sW(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var sG=["paymentRequest","paymentOptions","paymentSession","version"],sz=["newTotal","newLineItems","newShippingMethods","version","paymentSession","paymentRequest","paymentOptions"];function sK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sJ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sK(Object(n),!0).forEach(function(t){aR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sK(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var sX=function(){var e;function t(e,n){aI(this,t),aR(this,"payClient",null),aR(this,"config",void 0),aR(this,"logger",void 0),aR(this,"payChannelData",void 0),this.config=e,this.logger=n.logger}return aD(t,[{key:"setPayChannelData",value:function(e){var t=e.payChannelData,n=t.paymentRequest,r=t.paymentOptions,o=t.paymentSession,i=t.version,a=sW(t,sG);this.payChannelData={version:i,paymentRequest:n,paymentOptions:r,paymentSession:o,rest:sJ({},a)},cA(this.payChannelData)}},{key:"beforePay",value:function(e){this.logger.info("beforePay",{data:sJ({},e)}),this.setPayChannelData(e),this.payChannelData&&(this.payClient=new window.ApplePaySession(this.payChannelData.version,this.payChannelData.paymentRequest,this.payChannelData.paymentOptions))}},{key:"pay",value:(e=aE(aH.mark(function e(t){var n=this;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setPayChannelData(t),this.logger.info("pay",{data:sJ({},t)}),e.abrupt("return",new Promise(function(e,t){var r,o=sv.Create,i=function(e,t){o=e,n.logger.info("updateCurrentEvent",{data:{eventName:e,reportData:t}})},a=function(e,r){window[window.__sl_console__?"__sl_console__":"console"].error("AP 统一错误处理: ",{error:e,type:aq.Pay,extData:r}),n.logger.error("handleError",{action:aq.Pay,error:e,data:sJ({},r)}),t(e),ck(n.config.onError)&&n.config.onError(e,aq.Pay,r)},c=function(){var e=aE(aH.mark(function e(t){var r,o,i,c,s,u,l,d,p,f,h,y,m,v,g,b,_,w,C,O,S,x,k,P;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.type,s=t.paymentMethod,u=t.shippingContact,l=t.couponCode,d=t.shippingMethod,p=sJ(sJ({},n.payChannelData),null===(r=n.payChannelData)||void 0===r?void 0:r.rest)){e.next=5;break}return a(Error("without payChannelData")),e.abrupt("return");case 5:f="unknown",e.t0=c,e.next=e.t0===sv.Paymentmethodselected?9:e.t0===sv.Shippingcontactselected?11:e.t0===sv.Couponcodechanged?14:e.t0===sv.Shippingmethodselected?17:19;break;case 9:return p.newPaymentMethod=s,e.abrupt("break",20);case 11:return p.newShippingContact=u,f="shippingContactInvalid",e.abrupt("break",20);case 14:return p.newCouponCode=l,f="couponCodeInvalid",e.abrupt("break",20);case 17:return p.newShippingMethod=d,e.abrupt("break",20);case 19:return e.abrupt("break",20);case 20:if(ck(n.config.onFormDataChange)){e.next=23;break}return a(Error("without onFormDataChange")),e.abrupt("return");case 23:return delete p.rest,e.next=26,null===(o=(i=n.config).onFormDataChange)||void 0===o?void 0:o.call(i,p,sA[c]).catch(function(e){window[window.__sl_console__?"__sl_console__":"console"].error("onPaymentDataChanged fetch error",e),a(Error("onPaymentDataChanged fetch error"))});case 26:if((h=e.sent)&&!h.error){e.next=29;break}return e.abrupt("return",{errors:[new window.ApplePayError(f,void 0,(null==h||null===(y=h.error)||void 0===y?void 0:y.message)||"update error")],newTotal:null===(m=n.payChannelData)||void 0===m?void 0:m.rest.newTotal,newLineItems:null===(v=n.payChannelData)||void 0===v?void 0:v.rest.newLineItems,newShippingMethods:null===(g=n.payChannelData)||void 0===g?void 0:g.rest.newShippingMethods});case 29:return b=h.newTotal,_=h.newLineItems,w=h.newShippingMethods,C=h.version,O=h.paymentSession,S=h.paymentRequest,x=h.paymentOptions,k=sW(h,sz),n.payChannelData={version:C,paymentSession:O,paymentRequest:S,paymentOptions:x,rest:sJ(sJ({},k),{},{newTotal:b,newShippingMethods:w,newLineItems:_})},cA(n.payChannelData),P={newTotal:b,newLineItems:_,newShippingMethods:w},e.abrupt("return",P);case 34:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();if(!n.payChannelData||!n.payChannelData.paymentSession)return window[window.__sl_console__?"__sl_console__":"console"].error("without payChannelData"),void a(Error("without payChannelData"));try{var s=JSON.parse(window.atob(n.payChannelData.paymentSession)),u=n.payClient,l=n.logger;if(!u)throw Error("No payment instance found");u.onvalidatemerchant=function(){var e=aE(aH.mark(function e(t){return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i(sv.Validatemerchant,{event:t,decodeMerchantSession:s}),u.completeMerchantValidation(s);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),u.onpaymentmethodselected=function(){var e=aE(aH.mark(function e(t){var n;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i(sv.Paymentmethodselected,{event:t}),e.next=3,c(t);case 3:if(n=e.sent){e.next=6;break}throw Error("no update information");case 6:u.completePaymentMethodSelection(n);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),u.onshippingcontactselected=function(){var e=aE(aH.mark(function e(t){var n;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i(sv.Shippingcontactselected,{event:t}),e.next=3,c(t);case 3:if(n=e.sent){e.next=6;break}throw Error("no update information");case 6:n.status=window.ApplePaySession.STATUS_SUCCESS,u.completeShippingContactSelection(n);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),u.onshippingmethodselected=function(){var e=aE(aH.mark(function e(t){var n,r;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i(sv.Shippingmethodselected,{event:t}),e.next=3,c(t);case 3:n=e.sent,r=sJ(sJ({},n),{},{status:window.ApplePaySession.STATUS_SUCCESS}),u.completeShippingMethodSelection(r);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),u.oncouponcodechanged=function(){var e=aE(aH.mark(function e(t){var n;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i(sv.Couponcodechanged,{event:t}),e.next=3,c(t);case 3:if(n=e.sent){e.next=6;break}throw Error("no update information");case 6:u.completeCouponCodeChange(n);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),u.onpaymentauthorized=function(){var t=aE(aH.mark(function t(r){var o,c,s,d,p,f,h,y,m,v;return aH.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i(sv.Authorize,{event:r}),o=function(e){var t={status:e};l.info("支付",{data:{status:e}}),e===window.ApplePaySession.STATUS_SUCCESS&&u.completePayment(t)},t.prev=2,f=(p=r.payment).billingContact,h=p.shippingContact,y=p.token,ck(n.config.createOrder)){t.next=7;break}return a(Error("onPaymentAuthorized failed, createOrder not triggered")),t.abrupt("return");case 7:return null==(m=sJ(sJ(sJ({},n.payChannelData),null===(c=n.payChannelData)||void 0===c?void 0:c.rest),{},{newShippingContact:h,newBillingContact:f}))||delete m.rest,t.next=11,null===(s=(d=n.config).createOrder)||void 0===s?void 0:s.call(d,n.config.paymentInfo,{payChannelData:m,token:{token:y}});case 11:if((v=t.sent)&&(null==v||!v.error)){t.next=15;break}throw o(window.ApplePaySession.STATUS_FAILURE),Error("Failed to place order");case 15:o(window.ApplePaySession.STATUS_SUCCESS),n.afterCreateOrder(aJ.Success),e("onpaymentauthorized"),c3(v.nextAction),t.next=27;break;case 21:t.prev=21,t.t0=t.catch(2),o(window.ApplePaySession.STATUS_FAILURE),n.afterCreateOrder(aJ.Fail),window[window.__sl_console__?"__sl_console__":"console"].error("pay failed",t.t0),a(Error("pay failed"));case 27:case"end":return t.stop()}},t,null,[[2,21]])}));return function(e){return t.apply(this,arguments)}}(),u.oncancel=function(){var t=aE(aH.mark(function t(r){return aH.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o!==sv.Authorize){t.next=3;break}return window[window.__sl_console__?"__sl_console__":"console"].warn("拿到token后无法再取消支付"),t.abrupt("return");case 3:i(sv.Cancel,{preEvent:o}),e("oncancel"),ck(n.config.onCancel)&&n.config.onCancel(r.sessionError);case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),r=setTimeout(function(){ck(n.config.onChannelModalSuccess)&&n.config.onChannelModalSuccess(n.config.paymentInfo)},1e3),u.begin(),n.logger.log("最终拉起Apple Pay的入参",{data:{payChannelData:n.payChannelData}})}catch(e){clearTimeout(r),a(e)}}));case 3:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"afterCreateOrder",value:function(e){ck(this.config.afterCreateOrder)&&this.config.afterCreateOrder(e,{channelCode:aV.SLpayments,methodCode:aW.ApplePay})}}]),t}();function sZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sQ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sZ(Object(n),!0).forEach(function(t){aR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sZ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s0,s1,s3,s2,s4,s5=function(e){aN(c,cU);var t,n,r,o,i,a=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=aF(c);return e=t?Reflect.construct(n,arguments,aF(this).constructor):n.apply(this,arguments),aB(this,e)});function c(e){var t,n,r;return aI(this,c),aR(aL(r=a.call(this,e)),"name","APPLE_PAY"),aR(aL(r),"config",void 0),aR(aL(r),"initTime",0),aR(aL(r),"element",void 0),aR(aL(r),"domId",void 0),aR(aL(r),"client",void 0),aR(aL(r),"skeleton",void 0),aR(aL(r),"disabled",void 0),aR(aL(r),"orderData",void 0),aR(aL(r),"loading",void 0),aR(aL(r),"initSuccess",!0),aR(aL(r),"loadResourceFail",!1),aR(aL(r),"logger",void 0),r.validate(),r.config=ss(cI(sT,e)),ak.set(null===(t=(n=r.config).loggerFn)||void 0===t?void 0:t.call(n)),r.logger=ak.get().pipeOwner("payment-common.SLP-ApplePay").pipeData({domId:"".concat(r.config.props.domId)}),r}return aD(c,[{key:"channelSdkInitConfig",get:function(){var e;return JSON.parse((null===(e=this.config.paymentInfo)||void 0===e?void 0:e.channelSdkInitConfig)||"{}")}},{key:"validate",value:function(){return!0}},{key:"handleError",value:function(e,t,n){t!==aq.CreateExpected&&this.logger.error("handleError",{action:t,data:{type:t},error:e}),t===aq.Init&&(this.initSuccess=!1,this.hideButton()),ck(this.config.onError)&&this.config.onError(e,t,n)}},{key:"beforeInit",value:function(){this.initTime=cT.now(),ck(this.config.beforeInit)&&this.config.beforeInit()}},{key:"afterInit",value:function(e){try{this.initSuccess=!0,this.showButton();var t=cT.now()-this.initTime;this.logger.log("afterInit",{data:{data:e,duration:t}}),ck(this.config.afterInit)&&this.config.afterInit()}catch(e){this.handleError(e)}}},{key:"beforeCreateOrder",value:(i=aE(aH.mark(function e(){var t,n,r,o,i;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ck(this.config.beforeCreateOrder)){e.next=2;break}return e.abrupt("return");case 2:return n=(t=this.config.paymentInfo).channelCode,r=t.methodCode,o=t.paymentId,e.next=5,this.config.beforeCreateOrder({channelCode:n,methodCode:r,paymentId:o});case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"loadResource",value:function(){var e=this;return new Promise(function(t){a2("https://applepay.cdn-apple.com/jsapi/v1/apple-pay-sdk.js",{returnPromise:!0}).then(function(){e.loadResourceFail=!1,t(!0)}).catch(function(n){e.loadResourceFail=!0,e.handleError(Error("Failed to load channel js resource:".concat(n)),aq.Init),t(!1)})})}},{key:"canMakePayments",value:function(){var e,t,n=window.ApplePaySession;return!!(n&&n.canMakePayments()&&n.supportsVersion((null===(e=this.channelSdkInitConfig)||void 0===e||null===(t=e.payChannelData)||void 0===t?void 0:t.version)||4))}},{key:"renderButton",value:function(){var e,t,n,r,o,i,a,c,s,u,l;this.element&&this.domId?(o=(n={node:this.element,domId:this.domId,height:null===(e=this.config.props.styleOptions)||void 0===e?void 0:e.height,borderRadius:null===(t=this.config.props.styleOptions)||void 0===t?void 0:t["border-radius"]}).domId,i=n.node,a=n.height,c=n.borderRadius,s=document.createElement("style"),u=document.createElement("div"),i.style.height="".concat(a||43,"px"),u.innerHTML="<apple-pay-button id=".concat(o,' buttonstyle="black" type="plain" locale="en"></apple-pay-button>'),l="\n    #".concat(o," {\n      --apple-pay-button-width: 100%;\n      --apple-pay-button-height: ").concat(a||43,"px;\n      --apple-pay-button-border-radius: 0px;\n      --apple-pay-button-padding: 0px 0px;\n      --apple-pay-button-box-sizing: border-box;\n    }\n\n    .").concat(cB," apple-pay-button {\n      display: none;\n    }\n\n    ").concat("\n    .applepay-confirm-modal-header {\n      margin-bottom: 12px;\n    }\n\n    .applepay-confirm-modal-content {\n      font-family: 'Helvetica Neue';\n      font-style: normal;\n      font-weight: 400;\n      font-size: 16px;\n      line-height: 24px;\n      color: #2c2c2c;\n    }\n\n    .applepay-confirm-modal-action {\n      margin-top: 24px;\n      display: flex;\n      flex-direction: column;\n    }\n\n    .applepay-confirm-modal-action > button {\n      border: 0;\n      text-align: center;\n      border-radius: 4px;\n      cursor: pointer;\n      font-style: normal;\n      line-height: 24px;\n    }\n\n    .applepay-confirm-modal-action-ok {\n      padding: 9px 0;\n      color: #fff;\n      background: #000;\n      font-size: 19px;\n      font-weight: 500;\n    }\n\n    .applepay-confirm-modal-action-ok > span {\n      vertical-align: middle;\n      font-family: 'SF Pro', 'Helvetica Neue';\n    }\n\n    .applepay-confirm-modal-action-ok > svg {\n      vertical-align: middle;\n    }\n\n    .applepay-confirm-modal-action-cancel {\n      padding: 0;\n      margin-top: 24px;\n      color: rgba(44, 44, 44, 0.5);\n      background: transparent;\n      font-size: 16px;\n      font-weight: 500;\n      font-family: 'Helvetica Neue';\n    }\n  ","\n  "),void 0===c&&(l+="\n      #".concat(o," {\n        --apple-pay-button-border-radius: 4px;\n      }\n\n      [data-button_style=square] #").concat(o," {\n        --apple-pay-button-border-radius: 0px;\n      }\n  \n      [data-button_style=rounded] #").concat(o," {\n        --apple-pay-button-border-radius: 9999px;\n      }\n    ")),s.innerHTML=l,null===(r=i.parentElement)||void 0===r||r.insertBefore(s,i),i.appendChild(u),this.removeSkeleton(this.element)):window[window.__sl_console__?"__sl_console__":"console"].error("applepay没有节点")}},{key:"removeSkeleton",value:function(e){var t=this;setTimeout(function(){e&&t.skeleton&&e.removeChild(t.skeleton)},300)}},{key:"openModal",value:function(e){var t=this;sq({ok:function(n){t.beforePay(e),t.pay(e),null==n||n.close(),t.setLoading(!1)},cancel:function(){t.setLoading(!1),t.logger.info("用户取消了支付")}}).then(function(e){t.logger.info("弹窗拉起成功"),e.show()}).catch(function(e){window[window.__sl_console__?"__sl_console__":"console"].error("准备下单失败",e),t.handleError(e,aq.Pay)})}},{key:"pay",value:function(e){var t,n=this;this.setLoading(!1),null===(t=this.client)||void 0===t||t.pay(e).then(function(e){n.logger.info("用户支付无异常",{data:{res:e}})}).catch(function(e){window[window.__sl_console__?"__sl_console__":"console"].error("用户支付异常",{error:e}),n.handleError(e,aq.Pay)})}},{key:"beforePay",value:function(e){try{var t;null===(t=this.client)||void 0===t||t.beforePay(e)}catch(e){this.setLoading(!1),window[window.__sl_console__?"__sl_console__":"console"].error("准备下单失败",e),this.handleError(e,aq.Pay)}}},{key:"getOrderData",value:(o=aE(aH.mark(function e(){var t;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeCreateOrder();case 2:if(t=e.sent,this.logger.log("请求接口获取下单数据",{data:{params:t}}),t){e.next=8;break}return window[window.__sl_console__?"__sl_console__":"console"].error("create order data not found"),this.handleError(Error("create order data not found"),aq.Pay),e.abrupt("return");case 8:if(t.paymentConfig){e.next=13;break}return window[window.__sl_console__?"__sl_console__":"console"].error("没有支付信息"),this.handleError(Error("no payment information"),aq.Pay),this.setLoading(!1),e.abrupt("return");case 13:return this.orderData=t,e.abrupt("return",t);case 15:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"handleClick",value:(r=aE(aH.mark(function e(){var t,n,r,o,i;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.disabled&&!this.loading){e.next=3;break}return this.logger.warn("不可点击apple pay"),e.abrupt("return");case 3:return this.logger.log("applepay onClick"),this.setLoading(!0),(t=this.config.props.expressOptimizationSwitch)&&(n=this.channelSdkInitConfig,r={amount:"99.99",label:"Total",type:"pending"},o=sQ(sQ({},n),{},{payChannelData:sQ(sQ({},n.payChannelData),{},{paymentRequest:sQ(sQ({},n.payChannelData.paymentRequest),{},{total:r,lineItems:[r]})})}),this.beforePay(o)),e.next=9,this.getOrderData();case 9:if((i=e.sent)&&i.paymentConfig){e.next=12;break}return e.abrupt("return");case 12:t?this.pay(i.paymentConfig):this.openModal(i.paymentConfig);case 13:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"bindEvents",value:function(){var e,t=this,n=null===(e=this.element)||void 0===e?void 0:e.querySelector("#".concat(this.domId));n?null==n||n.addEventListener("click",function(){t.handleClick()}):window[window.__sl_console__?"__sl_console__":"console"].error("没有找到applepay节点")}},{key:"render",value:(n=aE(aH.mark(function e(){var t,n,r,o,i,a;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=this.config).props,o=n.paymentInfo,i=document.getElementById(o.currentDomId)){e.next=5;break}return this.handleError(Error("[onError][Init failed][Cannot find mounted DOM]"),aq.Init),e.abrupt("return",null);case 5:return this.domId="".concat(o.currentDomId,"-contain"),this.element=i,this.logger.log("render start",{data:{config:this.config}}),e.next=10,this.loadResource();case 10:if(e.sent){e.next=13;break}return window[window.__sl_console__?"__sl_console__":"console"].error("load applePay resource failed"),e.abrupt("return");case 13:return e.next=15,this.canMakePayments();case 15:if(e.sent){e.next=20;break}return this.handleError(Error("Cannot use applePay"),aq.Init),window[window.__sl_console__?"__sl_console__":"console"].error("Cannot use applePay"),e.abrupt("return");case 20:if(this.beforeInit(),a=s$({node:i,domId:this.domId,height:(null===(t=r.styleOptions)||void 0===t?void 0:t.height)||"",wrapperClass:r.wrapperClass,wrapperStyle:r.wrapperStyle}),this.skeleton=a,this.renderButton(),this.client=new sX(this.config,{logger:this.logger}),this.client){e.next=28;break}return window[window.__sl_console__?"__sl_console__":"console"].error("new Client失败"),e.abrupt("return");case 28:return this.afterInit(),this.bindEvents(),e.abrupt("return",this.client);case 31:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"setDisabled",value:function(e){if(this.element)try{if(this.disabled=e,e)return void this.element.classList.add(cN);this.element.classList.remove(cN)}catch(e){window[window.__sl_console__?"__sl_console__":"console"].error("此处报错不影响功能，无需关注",e)}}},{key:"setLoading",value:function(e){if(this.element)try{if(this.disabled=e,e)return void this.element.classList.add(cB);this.element.classList.remove(cB)}catch(e){window[window.__sl_console__?"__sl_console__":"console"].error("此处报错不影响功能，无需关注",e)}}}]),c}();(ug=s3||(s3={})).GooglePay="googlePay",ug.ApplePay="applePay",ug.Link="link",ug.BrowserCard="browserCard",(ub=s2||(s2={})).Default="default",ub.Square="square",ub.Rounded="rounded";var s6=[s3.ApplePay,s3.GooglePay,s3.Link,s3.BrowserCard],s9=(aR(s4={},s2.Default,4),aR(s4,s2.Rounded,9999),aR(s4,s2.Square,0),s4),s8=function(e,t,n){if(e){var r=e.contains(t);n&&!r?e.add(t):!n&&r&&e.remove(t)}},s7=function(){function e(t,n){var r=this;aI(this,e),aR(this,"container",void 0),aR(this,"insertStyle",function(e){if(r.container){var t=document.createElement("style");t.innerHTML="\n      .".concat(cB," .__PrivateStripeElement {\n        display: none !important;\n        visibility: hidden;\n      }\n    "),e.height&&(r.container.style.height="".concat(e.height,"px")),r.container.parentElement&&r.container.parentElement.insertBefore(t,r.container)}}),this.container=t,this.insertStyle(n)}return aD(e,[{key:"setDisabled",value:function(e){s8(this.container.classList,cN,e)}},{key:"setLoading",value:function(e){s8(this.container.classList,cB,e)}}]),e}();function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach(function(t){aR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var un=function(e){return(e||"").toLowerCase()},ur=function(e,t){return{label:"Total",amount:e,pending:t}},uo=function(e){return e===s3.ApplePay},ui=function(e){aN(l,cU);var t,n,r,o,i,a,c,s,u=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=aF(l);return e=t?Reflect.construct(n,arguments,aF(this).constructor):n.apply(this,arguments),aB(this,e)});function l(e){var t,n,r;return aI(this,l),aR(aL(r=u.call(this,e)),"config",void 0),aR(aL(r),"payChannelData",null),aR(aL(r),"instance",null),aR(aL(r),"paymentRequest",null),aR(aL(r),"prButton",null),aR(aL(r),"buttonElement",null),aR(aL(r),"paymentMethod",null),aR(aL(r),"confirmModalLoadState",null),aR(aL(r),"disabled",!1),aR(aL(r),"loading",!1),aR(aL(r),"initSuccess",!0),aR(aL(r),"loadResourceFail",!1),aR(aL(r),"initTime",0),aR(aL(r),"logger",void 0),r.config=e,ak.set(null===(t=(n=r.config).loggerFn)||void 0===t?void 0:t.call(n)),r.logger=ak.get().pipeOwner("payment-common.StripeOther").pipeData({domId:"".concat(r.config.props.domId)}),r}return aD(l,[{key:"render",value:(s=aE(aH.mark(function e(){return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.beforeInit(),e.next=3,this.init();case 3:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"init",value:(c=aE(aH.mark(function e(){var t,n,r,o;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.paymentMethod=s3[this.config.paymentInfo.methodCode]||null,e.next=3,this.loadChannelJs();case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:if(this.createStripeInstance(),!this.paymentRequest){e.next=23;break}return t=cT.now(),e.next=11,this.paymentRequest.canMakePayment();case 11:if(n=e.sent,r=cT.now()-t,o={canMakePaymentResult:n,paymentMethod:this.paymentMethod,taken:r},this.logger.info("canMakePaymentResult",{data:{logInfo:o}}),window[window.__sl_console__?"__sl_console__":"console"].log("canMakePaymentResult:",o),!(this.paymentMethod&&n&&n[this.paymentMethod])){e.next=21;break}this.renderButton(),this.afterInit(),e.next=23;break;case 21:return this.handleError(Error("The current browser does not support this payment method"),aq.Init,{canMakePaymentResult:n}),e.abrupt("return");case 23:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"beforeInit",value:function(){this.initTime=cT.now(),ck(this.config.beforeInit)&&this.config.beforeInit()}},{key:"afterInit",value:function(){this.initSuccess=!0,this.showButton();var e=cT.now()-this.initTime;this.logger.log("afterInit",{data:{duration:e}}),ck(this.config.afterInit)&&this.config.afterInit()}},{key:"onChannelModalSuccess",value:function(){ck(this.config.onChannelModalSuccess)&&this.config.onChannelModalSuccess(this.config.paymentInfo)}},{key:"beforeCreateOrder",value:(a=aE(aH.mark(function e(){var t,n,r,o,i;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ck(this.config.beforeCreateOrder)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.confirmModalLoadState;case 4:return n=(t=this.config.paymentInfo).channelCode,r=t.methodCode,o=t.paymentId,e.next=7,this.config.beforeCreateOrder({channelCode:n,methodCode:r,paymentId:o});case 7:return i=e.sent,e.abrupt("return",i);case 9:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"afterCreateOrder",value:function(e){ck(this.config.afterCreateOrder)&&this.config.afterCreateOrder(e,{channelCode:aV.StripeOther,methodCode:this.config.paymentInfo.methodCode})}},{key:"setDisabled",value:function(e){this.disabled=e,this.buttonElement&&this.buttonElement.setDisabled(e)}},{key:"setLoading",value:function(e){this.loading=e,this.buttonElement&&this.buttonElement.setLoading(e)}},{key:"loadChannelJs",value:function(){var e=this;return new Promise(function(t){a2("https://js.stripe.com/v3/",{returnPromise:!0}).then(function(){e.loadResourceFail=!1,t(!0)}).catch(function(n){e.loadResourceFail=!0,e.handleError(Error("Failed to load channel js resource: ".concat(n)),aq.Init),t(!1)})})}},{key:"createStripeInstance",value:function(){var e=this;try{var t=this.config.paymentInfo,n=t.configData,r=n.publicApiKey,o=n.stripeApiVersion,i=n.accountId,a=n.accountCountry,c=t.channelSdkInitConfig,s=this.config.paymentInfo.settleCurrency||"",u=s6.filter(function(t){return t!==e.paymentMethod}),l={};try{l=JSON.parse(c)}catch(e){this.logger.error("解析渠道配置JSON字符串失败",{error:e,data:{channelSdkInitConfig:c}})}this.instance=window.Stripe(void 0===r?"":r,{apiVersion:o,stripeAccount:i});var d=this.instance.paymentRequest(ut(ut({},l),{},{currency:un(s),country:void 0===a?"":a,total:ur(9999,!0),disableWallets:u}));this.paymentRequest=d}catch(e){this.handleError(Error("Failed to create channel instance"),aq.Init,{channelMsg:e.message})}}},{key:"onPaymentAuthorized",value:(i=aE(aH.mark(function e(t){var n,r,o,i,a,c,s,u,l,d,p,f,h=this;return aH.wrap(function(e){for(var y;;)switch(e.prev=e.next){case 0:if(ck(n=this.config.createOrder)){e.next=3;break}return e.abrupt("return");case 3:return r=t.paymentMethod,o=t.shippingAddress,i=t.shippingOption,a=t.payerName,c=t.payerPhone,s=t.payerEmail,l=void 0===(u=r.id)?"":u,d=r.billing_details,p=ut(ut({},this.payChannelData),{},{paymentMethod:l,billing_details:d,shippingAddress:o,shippingOption:i,payerInfo:{name:a,phone:c,email:s}}),e.prev=6,e.next=9,n(this.config.paymentInfo,{payChannelData:p,token:p});case 9:if(!(y=f=e.sent)||!y.error){e.next=13;break}throw f.error;case 13:return e.next=15,c3(f.nextAction,{payOptions:{hooks:{channelConfirm:function(e){return h.channelConfirm(e,t)}}}});case 15:e.next=22;break;case 17:e.prev=17,e.t0=e.catch(6),t.complete("fail"),this.handleError(e.t0,aq.Pay),this.afterCreateOrder(aJ.Fail);case 22:case"end":return e.stop()}},e,this,[[6,17]])})),function(e){return i.apply(this,arguments)})},{key:"channelConfirm",value:(o=aE(aH.mark(function e(t,n){var r,o,i;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(null===(r=t.data)||void 0===r?void 0:r.clientSecret)||"",this.instance){e.next=3;break}throw Error("stripe instance not found");case 3:if(o){e.next=9;break}if(!t.nextAction){e.next=8;break}return e.next=7,c3(t.nextAction);case 7:return e.abrupt("return");case 8:throw Error("The interface does not return clientSecret, and the sdk`s confirm cannot be called");case 9:return e.prev=9,e.next=12,this.instance.confirmCardPayment(o);case 12:(i=e.sent.error)?(n.complete("fail"),this.afterCreateOrder(aJ.Fail),this.handleError(Error("confirm error"),aq.Pay,{error:i,clientSecret:o})):(n.complete("success"),this.afterCreateOrder(aJ.Success));case 15:if(e.prev=15,!t.nextAction){e.next=19;break}return e.next=19,c3(t.nextAction);case 19:return e.finish(15);case 20:case"end":return e.stop()}},e,this,[[9,,15,20]])})),function(e,t){return o.apply(this,arguments)})},{key:"renderButton",value:function(){if(this.instance&&this.paymentRequest)try{var e,t,n=document.getElementById(this.config.paymentInfo.currentDomId);if(!n)throw Error("Container not found: #".concat(this.config.paymentInfo.currentDomId));var r=this.instance.elements(),o=null===(e=this.config.props.styleOptions)||void 0===e?void 0:e.height;if(uo(this.paymentMethod)){var i,a=document.createElement("style");a.innerHTML="\n    .applepay-confirm-modal-header {\n      margin-bottom: 12px;\n    }\n\n    .applepay-confirm-modal-content {\n      font-family: 'Helvetica Neue';\n      font-style: normal;\n      font-weight: 400;\n      font-size: 16px;\n      line-height: 24px;\n      color: #2c2c2c;\n    }\n\n    .applepay-confirm-modal-action {\n      margin-top: 24px;\n      display: flex;\n      flex-direction: column;\n    }\n\n    .applepay-confirm-modal-action > button {\n      border: 0;\n      text-align: center;\n      border-radius: 4px;\n      cursor: pointer;\n      font-style: normal;\n      line-height: 24px;\n    }\n\n    .applepay-confirm-modal-action-ok {\n      padding: 9px 0;\n      color: #fff;\n      background: #000;\n      font-size: 19px;\n      font-weight: 500;\n    }\n\n    .applepay-confirm-modal-action-ok > span {\n      vertical-align: middle;\n      font-family: 'SF Pro', 'Helvetica Neue';\n    }\n\n    .applepay-confirm-modal-action-ok > svg {\n      vertical-align: middle;\n    }\n\n    .applepay-confirm-modal-action-cancel {\n      padding: 0;\n      margin-top: 24px;\n      color: rgba(44, 44, 44, 0.5);\n      background: transparent;\n      font-size: 16px;\n      font-weight: 500;\n      font-family: 'Helvetica Neue';\n    }\n  ",null===(i=n.parentElement)||void 0===i||i.insertBefore(a,n)}var c=null===(t=this.config.props.styleOptions)||void 0===t?void 0:t["border-radius"];if(void 0===c){var s,u=document.querySelector("[data-button_style]"),l=null==u?void 0:u.getAttribute("data-button_style");this.logger.info("buttonStyle",{data:{buttonStyle:l}}),c=null!==(s=s9[l])&&void 0!==s?s:s9.default}var d={height:o?"".concat(o,"px"):"",theme:"dark",borderRadius:"".concat(c,"px")},p=r.create("paymentRequestButton",{paymentRequest:this.paymentRequest,style:{paymentRequestButton:d}});this.prButton=p,this.initButtonListener(this.paymentRequest,this.prButton),this.buttonElement=new s7(n,{height:o}),this.prButton.mount(n);var f=n.querySelector(".__PrivateStripeElement");f&&(f.style.display="block")}catch(e){this.handleError(Error("Failed to render button"),aq.Init,{channelMsg:e.message})}}},{key:"initButtonListener",value:function(e,t){var n,r=this;e.on("shippingaddresschange",function(e){var t=e.shippingAddress,n=e.updateWith;r.handleFormDataChange(aX.ChangeAddress,{shippingAddress:t},n)}),e.on("shippingoptionchange",(n=aE(aH.mark(function e(t){var n,o;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.shippingOption,o=t.updateWith,r.handleFormDataChange(aX.ChangeDeliveryMethod,{shippingOption:n},o);case 2:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})),e.on("cancel",function(){r.logger.info("用户关闭渠道支付弹窗")}),e.on("paymentmethod",this.onPaymentAuthorized.bind(this)),t.on("click",function(e){e.preventDefault(),r.handleStripeOtherButtonClick()})}},{key:"handleFormDataChange",value:(r=aE(aH.mark(function e(t,n,r){var o,i,a,c,s,u,l,d;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.logger.info("handleFormDataChange: ".concat(t),{data:{params:n}}),ck(o=this.config.onFormDataChange)){e.next=5;break}return r({status:"fail"}),e.abrupt("return");case 5:return e.prev=5,e.next=8,o(ut(ut({},this.payChannelData),n),t);case 8:if((i=e.sent)&&!i.error){e.next=11;break}throw Error(null==i||null===(a=i.error)||void 0===a?void 0:a.message);case 11:if(this.payChannelData=i,u=void 0===(s=(c=this.payChannelData).amount)?0:s,l=c.shippingOptions,d=c.displayItems,null!=l&&l.length){e.next=16;break}return r({status:"invalid_shipping_address"}),e.abrupt("return");case 16:r({status:"success",total:ur(u,!1),displayItems:d,shippingOptions:l}),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(5),r({status:"fail"}),this.handleError(Error("Failed to update abandonedOrder info"),aq.Pay,{error:e.t0});case 23:case"end":return e.stop()}},e,this,[[5,19]])})),function(e,t,n){return r.apply(this,arguments)})},{key:"handleStripeOtherButtonClick",value:(n=aE(aH.mark(function e(){var t,n,r,o,i,a,c,s,u=this;return aH.wrap(function(e){for(var l;;)switch(e.prev=e.next){case 0:if(this.instance&&this.paymentRequest&&!this.loading&&!this.disabled){e.next=2;break}return e.abrupt("return");case 2:return t=this.config.props.expressOptimizationSwitch,n=function(){var e=null;try{u.paymentRequest&&(e=setTimeout(function(){u.onChannelModalSuccess()},1e3),u.paymentRequest.show(),u.logger.info("弹窗拉起成功"))}catch(t){e&&(clearTimeout(e),e=null),u.handleError(Error("Failed to pull up the channel"),aq.PullUpChannel,{error:t})}},this.setLoading(!0),uo(this.paymentMethod)&&t&&setTimeout(function(){n()}),e.next=8,this.beforeCreateOrder().catch(function(e){u.handleError(e,aq.PullUpChannel)});case 8:if(r=e.sent,this.setLoading(!1),(l=r)&&!1!==l.valid&&r.paymentConfig&&r.paymentConfig.payChannelData){e.next=13;break}return e.abrupt("return");case 13:i=(o=r.paymentConfig.payChannelData).amount,a=o.currency,c=o.shippingOptions,s=o.displayItems,this.payChannelData=ut({},o),this.logger.info("更新渠道弹窗信息",{data:{amount:i,shippingOptions:c,displayItems:s}}),this.paymentRequest.update({currency:un(a),total:ur(i,!1),shippingOptions:c,displayItems:s}),uo(this.paymentMethod)?t||sq({ok:n,cancel:function(){u.logger.info("用户取消了支付")}}).then(function(e){e.show()}).catch(function(e){u.handleError(e,aq.Pay)}):setTimeout(function(){n()});case 19:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"handleError",value:function(e,t,n){window[window.__sl_console__?"__sl_console__":"console"].error("StripeOther 统一错误处理：",{error:e,type:t,extData:n}),t!==aq.CreateExpected&&this.logger.error("handleError",{action:t,error:e,data:ut({},n)}),t===aq.Init&&(this.initSuccess=!1,this.hideButton()),ck(this.config.onError)&&this.config.onError(e,t,n)}}]),l}(),ua=function(e){aN(r,ui);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=aF(r);return e=t?Reflect.construct(n,arguments,aF(this).constructor):n.apply(this,arguments),aB(this,e)});function r(e){var t;return aI(this,r),aR(aL(t=n.call(this,e)),"name","GOOGLE_PAY"),t}return aD(r)}(),uc=function(e){aN(r,ui);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=aF(r);return e=t?Reflect.construct(n,arguments,aF(this).constructor):n.apply(this,arguments),aB(this,e)});function r(e){var t;return aI(this,r),aR(aL(t=n.call(this,e)),"name","APPLE_PAY"),t}return aD(r)}();function us(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function uu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?us(Object(n),!0).forEach(function(t){aR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):us(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ul=function(e){var t,n,r,o=e.paymentInfo,i=o.configData,a=o.channelSdkInitConfig,c=o.captureInfo.autoCapture,s=e.props.payMode===a$.Continue,u=e.props.isSubscription,l=(t=JSON.parse(a),n="",r=function(e){var t=e.key,r=e.value,o=e.isCoverAll,i=e.whitelist,a=e.blacklist,c=(Shopline||{}).storeId;o?Array.isArray(a)&&!a.includes(c)&&(n=cH(n,aR({},t,r))):Array.isArray(i)&&i.includes(c)&&(n=cH(n,aR({},t,r)))},Array.isArray(t)&&(null==t||t.forEach(function(e){e.scope===a$.All?r(e):(s&&e.scope===a$.Continue&&r(e),s||e.scope!==a$.PayNow||r(e))})),n);return cH(l,uu(uu({},{currency:e.paymentInfo.settleCurrency||"USD",commit:!!s,"merchant-id":i.paypalMerchantId,"client-id":i.clientId}),u?{intent:"tokenize",vault:!0}:{intent:c?"capture":"authorize"}))},ud=function(e){if(null!=e&&e.paymentInfo){var t=e.paymentInfo.configData;e.props=uu(uu({},e.props),{},{queryParams:ul(e)},t)}return e},up=function(e,t){var n,r=t.props.isSubscription;return{abandonedOrderInfo:e.abandonedOrderInfo,orderFrom:e.orderFrom||e.abandonedOrderInfo.orderFrom,channelCode:aV.Paypal,spbCurrencyCode:t.paymentInfo.settleCurrency,payInfo:{cancelUrl:window.location.href,returnUrl:e.returnUrl,captureInfo:null===(n=t.paymentInfo)||void 0===n?void 0:n.captureInfo,paymentScenes:r?a0.PAY_AND_BIND:a0.PAY_NORMAL},dataReportReq:e.dataReportReq}},uf=function(e){var t=Math.floor(e);return t>=5e3&&t<=1e4?"warn":t>1e4?"error":"info"};function uh(e){var t;return(aR(t={},"".concat(aV.Paypal,"-").concat(aW.Paypal),{validate:function(){return e.props&&cP(e.props)?{result:!0}:{result:!1,errorTip:"props illegal"}},getConfig:function(){return e},component:uE}),aR(t,"".concat(aV.SLpayments,"-").concat(aW.GooglePay),{validate:function(){return e.props&&cP(e.props)?{result:!0}:{result:!1,errorTip:"props illegal"}},getConfig:function(){return e},component:si}),aR(t,"".concat(aV.SLpayments,"-").concat(aW.ApplePay),{validate:function(){return e.props&&cP(e.props)?{result:!0}:{result:!1,errorTip:"props illegal"}},getConfig:function(){return e},component:s5}),aR(t,"".concat(aV.StripeOther,"-").concat(aW.ApplePay),{validate:function(){return e.props&&cP(e.props)?{result:!0}:{result:!1,errorTip:"props illegal"}},getConfig:function(){return e},component:uc}),aR(t,"".concat(aV.StripeOther,"-").concat(aW.GooglePay),{validate:function(){return e.props&&cP(e.props)?{result:!0}:{result:!1,errorTip:"props illegal"}},getConfig:function(){return e},component:ua}),t)["".concat(e.channelCode,"-").concat(e.paymentInfo.methodCode)]}function uy(e){var t=!0;return e&&e.type||(t=!1),t}function um(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function uv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?um(Object(n),!0).forEach(function(t){aR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):um(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ug,ub,u_,uw=function(e){var t,n=e.node,r=e.domId,o=e.height,i=e.isContinueMode,a=e.isVerticalLayout,c=e.wrapperClass,s=e.wrapperStyle,u=document.createElement("div");u.classList.add("paypal__skeleton--animated");var l=document.createElement("style");if(uC({styleTag:l,domId:r,height:o,isContinueMode:i,isVerticalLayout:a}),n){if(c&&n.classList.add(c),s){var d,p,f={},h=(null===(p=n.getAttribute("style"))||void 0===p?void 0:p.replace(/\s+/g,""))||"",y=function(e){var t={};return e.split(";").forEach(function(e){var n=cx(e.split(":"),2),r=n[0],o=n[1],i=null==r?void 0:r.replace(/-[^0-9]/g,function(e){return e.charAt(1).toUpperCase()});i&&(t[i]=o)}),t};"string"==typeof s?f=uv(uv({},y(h)),y(s)):"object"===iE(s)&&(f=uv(uv({},y(h)),s)),n.style="object"!==iE(d=f)?"":Object.entries(d).map(function(e){return e.join(":")}).join(";").replace(/[A-Z]/g,function(e){return"-".concat(e.charAt(0).toLowerCase())})}return null===(t=n.parentElement)||void 0===t||t.insertBefore(l,n),n.appendChild(u),u}},uC=function(e){var t=e.styleTag,n=e.domId,r=e.height,o=e.isContinueMode,i=e.isVerticalLayout;t.innerHTML=o&&!i?"\n        #".concat(n," {\n          overflow: hidden;\n          text-align: center;\n          height: ").concat(r,"px;\n          z-index: 1;\n        }\n        /** paypal background color */\n        #").concat(n,".paypal__bg::before,\n        #").concat(n,".paypal__bg::after {\n          content:'';\n          position: absolute;\n          top: 0;\n          bottom: 0;\n          left: 0;\n          width: calc(50% - 3px);\n          border-radius: 4px;\n          background-color: #ffc439;\n        }\n        #").concat(n,".paypal__bg::after {\n          left: unset;\n          right: 0;\n        }\n        [data-button_style=square] #").concat(n,".paypal__bg::before,\n        [data-button_style=square] #").concat(n,".paypal__bg::after{\n          border-radius: 0 !important;\n        }\n        [data-button_style=rounded] #").concat(n,".paypal__bg{\n          border-radius: 9999px !important;\n        }\n      "):"\n        #".concat(n," {\n          min-height: ").concat(r,"px;\n        }\n        "),t.innerHTML+="\n      #".concat(n," {\n        position: relative;\n        user-select: none;\n      }\n      #").concat(n," .paypal__skeleton--animated {\n        margin: 0 auto;\n        border-radius: 4px;\n        width: 100%;\n        height: ").concat(r,"px;\n        position: absolute;\n      }\n\n      .paypal__skeleton--animated {\n        background: linear-gradient(").concat("90deg, hsla(0, 0%, 74.5%, 0.2) 25%, hsla(0, 0%, 50.6%, 0.24) 37%, hsla(0, 0%, 74.5%, 0.2) 63%",");\n        background-size: 400% 100%;\n        animation: skeleton 2s linear infinite;\n      }\n\n      ").concat("\n            @keyframes skeleton {\n              0% {\n                background-position: 100% 50%;\n              }\n              100% {\n                background-position: 0 50%;\n              }\n            }\n          ","\n      ")};function uO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function uS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uO(Object(n),!0).forEach(function(t){aR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ux,uk={loadingStatus:aK.Await,info:{},promise:null},uP=function(e){aN(s,cU);var t,n,r,o,i,a,c=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=aF(s);return e=t?Reflect.construct(n,arguments,aF(this).constructor):n.apply(this,arguments),aB(this,e)});function s(e){var t,n;return aI(this,s),aR(aL(n=c.call(this,e)),"name","PAY_PAL"),aR(aL(n),"config",void 0),aR(aL(n),"payMode",void 0),aR(aL(n),"isHidePayPalButton",void 0),aR(aL(n),"isRendered",void 0),aR(aL(n),"element",void 0),aR(aL(n),"initTimer",void 0),aR(aL(n),"initActions",void 0),aR(aL(n),"createOrderParams",void 0),aR(aL(n),"returnUrl",void 0),aR(aL(n),"orderInfoMap",{}),aR(aL(n),"initTime",0),aR(aL(n),"skeleton",void 0),aR(aL(n),"initSuccess",!0),aR(aL(n),"loadResourceFail",!1),aR(aL(n),"logger",void 0),aR(aL(n),"dynamicJsonpCallback",function(e){uk=uS(uS({},uk),{},{info:e,loadingStatus:aK.Done}),n.handleDynamicNotify(e)}),n.payMode=e.props.payMode||a$.Continue,n.returnUrl="",ak.set(null===(t=e.loggerFn)||void 0===t?void 0:t.call(e)),n.logger=ak.get().pipeOwner("payment-common.PayPal").pipeData({domId:"".concat(e.props.domId)}),n.config=ud(cI(a5,e)),n.handleDomHeight(),n.validate(e)?n:aB(n)}return aD(s,[{key:"validate",value:function(e){var t=uh(e);if(!t)return!1;var n=t.validate(),r=n.result,o=n.errorTip;return!!r||(this.logger.error("constructor error ".concat(o)),!1)}},{key:"handleDomHeight",value:function(){var e,t=(null===(e=this.config.props.styleOptions)||void 0===e?void 0:e.height)||45;t>55&&(this.logger.warn("按钮高度传入异常",{data:{height:t}}),t=55),t<25&&(this.logger.warn("按钮高度传入异常",{data:{height:t}}),t=25),this.config.props.styleOptions=uS(uS({},this.config.props.styleOptions),{},{height:t})}},{key:"isContinueMode",get:function(){return this.payMode===a$.Continue}},{key:"isVerticalLayout",get:function(){var e;return"vertical"===(null===(e=this.config.props.styleOptions)||void 0===e?void 0:e.layout)}},{key:"isSubscription",get:function(){return this.config.props.isSubscription}},{key:"handleError",value:function(e,t,n){this.initTimer&&clearTimeout(this.initTimer),t!==aq.CreateExpected&&this.logger.error("handleError",{action:t,error:e,data:{type:t,extData:n},tags:null==n?void 0:n.tags}),t===aq.Init&&(this.initSuccess=!1,this.hideButton()),ck(this.config.onError)&&this.config.onError(e,t,n)}},{key:"handleDynamicNotify",value:function(e){var t=(e||{}).paypal;this.isHidePayPalButton=!t,t||(ck(this.config.onDynamicNotify)&&this.config.onDynamicNotify(uS(uS({},e),{},{isHidePayPalButton:!0})),this.handleError(Error("Dynamic button loading failed"),aq.Init))}},{key:"handleDynamic",value:(a=aE(aH.mark(function e(){var t,n,r=this;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return aR(t={},aK.Done,function(){r.handleDynamicNotify(uk.info)}),aR(t,aK.Fail,function(){}),aR(t,aK.Pending,aE(aH.mark(function e(){return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uk.promise;case 2:r.handleDynamicNotify(uk.info);case 3:case"end":return e.stop()}},e)}))),aR(t,aK.Await,function(){return uk.loadingStatus=aK.Pending,window[a4]=r.dynamicJsonpCallback,uk.promise=a2(["https://www.paypal.com/checkoutnow/remembered?callback=".concat(a4)],{returnPromise:!0}).catch(function(){r.loadResourceFail=!0,r.handleError(Error("[Failed to load remember script]:".concat(a4)),aq.Init)}),uk.promise}),n=t[uk.loadingStatus],e.abrupt("return",n());case 3:case"end":return e.stop()}},e)})),function(){return a.apply(this,arguments)})},{key:"handlePay",value:function(e){var t=e.nextAction,n=e.context,r=(void 0===n?{returnUrl:""}:n).returnUrl;if(this.returnUrl=r,this.isSubscription){var o=t.data.popupData.tokenId;return this.orderInfoMap[o||""]={returnUrl:r},o||""}var i=t.data.popupData.id;return this.orderInfoMap[i||""]={returnUrl:r},i||""}},{key:"continueMode",value:(i=aE(aH.mark(function e(t,n){var r,o,i,a,c,s,u,l,d,p,f,h;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.createOrderParams&&!1!==this.createOrderParams.valid){e.next=2;break}return e.abrupt("return","");case 2:return e.prev=2,s=up(this.createOrderParams,this.config),e.next=6,cC.post("/leproxy/api/trade/center/pay/fast-checkout/prepare-pay",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cO(Object(n),!0).forEach(function(t){aR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},s));case 6:if(null==(l=null===(r=(u=e.sent).data)||void 0===r?void 0:r.data)||!l.errorInfo){e.next=11;break}return this.handleError(Error("Place order failed"),aq.CreateExpected,{errorInfo:null==l?void 0:l.errorInfo}),e.abrupt("return","");case 11:if(!(d=(null===(o=u.data)||void 0===o?void 0:o.code)||(null===(i=u.data)||void 0===i||null===(a=i.data)||void 0===a||null===(c=a.paymentError)||void 0===c?void 0:c.code))||"SUCCESS"===d){e.next=15;break}return this.handleError(Error("prepare-pay request failed"),aq.Pay,{tags:{code:d},res:u.data}),e.abrupt("return","");case 15:if(uy(p=JSON.parse((null==l?void 0:l.nextAction)||"{}"))){e.next=19;break}return this.handleError(Error("prepare-pay response illegal"),aq.Pay,{res:u.data}),e.abrupt("return","");case 19:return f={nextAction:p,context:null==l?void 0:l.context},this.logger.info("continueMode",{data:{data:l,payOptions:f,actions:n}}),e.next=23,this.handlePay(f);case 23:return(h=e.sent)&&ck(this.config.onChannelModalSuccess)&&this.config.onChannelModalSuccess(this.config.paymentInfo),e.abrupt("return",h);case 28:return e.prev=28,e.t0=e.catch(2),this.handleError(e.t0,aq.Pay),e.abrupt("return","");case 32:case"end":return e.stop()}},e,this,[[2,28]])})),function(e,t){return i.apply(this,arguments)})},{key:"payNowMode",value:(o=aE(aH.mark(function e(t,n){var r;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!ck(this.config.createOrder)){e.next=13;break}return e.next=4,this.config.createOrder(this.config.paymentInfo,t,n);case 4:if(r=e.sent,this.logger.info("payNowMode，createOrder 入参",{data:uS({},r)}),!1!==r.valid){e.next=9;break}return this.logger.log("业务方入参异常，中断流程",{data:uS({},r)}),e.abrupt("return","");case 9:if(uy(null==r?void 0:r.nextAction)){e.next=12;break}return this.handleError(Error("prepare-pay response illegal"),aq.Pay,{res:r}),e.abrupt("return","");case 12:return e.abrupt("return",this.handlePay(r));case 13:return e.abrupt("return","");case 16:return e.prev=16,e.t0=e.catch(0),this.handleError(e.t0,aq.Pay),e.abrupt("return","");case 20:case"end":return e.stop()}},e,this,[[0,16]])})),function(e,t){return o.apply(this,arguments)})},{key:"handleRenderTimeout",value:function(e){var t,n,r=this;u_&&(u_.disconnect(),u_=null),this.initTimer=setTimeout(function(){var t,n,o,i;r.element&&(r.element.innerHTML=""),u_=new(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)(function(e){e.forEach(function(){r.element&&(r.element.innerHTML="")})}),r.element&&u_.observe(r.element,{childList:!0,attributes:!1,subtree:!1}),setTimeout(function(){u_&&(u_.disconnect(),u_=null)},5e3),r.handleError(Error("[Init rendering failed][Call onInit timeout][Current timeout time: ".concat(null===(t=r.config.props)||void 0===t||null===(n=t.timeout)||void 0===n?void 0:n.delay,"ms]")),aq.Init),e(Error("[Init rendering failed][Call onInit timeout][Current timeout time: ".concat(null===(o=r.config.props)||void 0===o||null===(i=o.timeout)||void 0===i?void 0:i.delay,"ms]")))},null===(t=this.config.props)||void 0===t||null===(n=t.timeout)||void 0===n?void 0:n.delay)}},{key:"setDisabled",value:function(e){if(this.element)try{if(e)return this.initActions&&this.initActions.disable(),void this.element.classList.add(cN);this.initActions&&this.initActions.enable(),this.element.classList.remove(cN)}catch(e){window[window.__sl_console__?"__sl_console__":"console"].error("此处报错不影响功能，无需关注",e)}}},{key:"beforeInit",value:function(){this.initTime=cT.now(),ck(this.config.beforeInit)&&this.config.beforeInit()}},{key:"afterInit",value:function(e,t){try{this.initSuccess=!0,this.showButton();var n=cT.now()-this.initTime;this.logger.info("afterInit",{data:{data:e,actions:t,duration:n,level:uf(n)}}),ck(this.config.afterInit)&&this.config.afterInit()}catch(e){this.handleError(e)}}},{key:"beforeCreateOrder",value:(r=aE(aH.mark(function e(){var t,n,r,o,i;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ck(this.config.beforeCreateOrder)){e.next=2;break}return e.abrupt("return");case 2:return n=(t=this.config.paymentInfo).channelCode,r=t.methodCode,o=t.paymentId,e.next=5,this.config.beforeCreateOrder({channelCode:n,methodCode:r,paymentId:o});case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"afterCreateOrder",value:function(e){ck(this.config.afterCreateOrder)&&this.config.afterCreateOrder(e,{channelCode:aV.Paypal,methodCode:aW.Paypal})}},{key:"removeSkeleton",value:function(e){var t=this;setTimeout(function(){e&&(t.skeleton&&e.removeChild(t.skeleton),t.isContinueMode&&e.classList.add("paypal__bg"))},300)}},{key:"specialParamsByScenes",get:function(){var e,t,n=this;return this.isSubscription?{actions:{createBillingAgreement:(e=aE(aH.mark(function e(t,r){var o;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.logger.log("createBillingAgreement PayPal开始下单",{data:{data:t,actions:r}}),e.prev=1,!n.isContinueMode){e.next=8;break}return e.next=5,n.continueMode(t,r);case 5:e.t1=e.sent,e.next=11;break;case 8:return e.next=10,n.payNowMode(t,r);case 10:e.t1=e.sent;case 11:if(e.t0=e.t1,e.t0){e.next=14;break}e.t0="";case 14:return o=e.t0,n.afterCreateOrder(o?aJ.Success:aJ.Fail),e.abrupt("return",o);case 19:return e.prev=19,e.t2=e.catch(1),n.afterCreateOrder(aJ.Fail),e.abrupt("return","");case 23:case"end":return e.stop()}},e,null,[[1,19]])})),function(t,n){return e.apply(this,arguments)})}}:{actions:{createOrder:(t=aE(aH.mark(function e(t,r){var o;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.logger.log("createOrder PayPal开始下单",{data:{data:t,actions:r}}),e.prev=1,!n.isContinueMode){e.next=8;break}return e.next=5,n.continueMode(t,r);case 5:e.t1=e.sent,e.next=11;break;case 8:return e.next=10,n.payNowMode(t,r);case 10:e.t1=e.sent;case 11:if(e.t0=e.t1,e.t0){e.next=14;break}e.t0="";case 14:return o=e.t0,n.afterCreateOrder(o?aJ.Success:aJ.Fail),e.abrupt("return",o);case 19:return e.prev=19,e.t2=e.catch(1),n.afterCreateOrder(aJ.Fail),e.abrupt("return","");case 23:case"end":return e.stop()}},e,null,[[1,19]])})),function(e,n){return t.apply(this,arguments)})}}}},{key:"render",value:(n=aE(aH.mark(function e(){var t,n,r,o,i,a,c=this;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=this.config).props,o=n.paymentInfo,i=document.getElementById(o.currentDomId),!r.dynamic){e.next=5;break}return e.next=5,this.handleDynamic();case 5:if(!this.isHidePayPalButton){e.next=7;break}return e.abrupt("return",null);case 7:if(!this.isRendered){e.next=9;break}return e.abrupt("return",null);case 9:if(i){e.next=12;break}return this.handleError(Error("[onError][Initialization failed][Could not find mounted DOM]"),aq.Init,{domId:o.currentDomId}),e.abrupt("return",null);case 12:return this.element=i,a=uw({node:i,domId:o.currentDomId,height:(null===(t=r.styleOptions)||void 0===t?void 0:t.height)||"",isContinueMode:this.isContinueMode,isVerticalLayout:this.isVerticalLayout,wrapperClass:r.wrapperClass,wrapperStyle:r.wrapperStyle}),this.skeleton=a,this.logger.log("render start",{data:{config:this.config}}),this.beforeInit(),e.abrupt("return",new Promise(function(e,t){r.timeout&&r.timeout.switch&&c.handleRenderTimeout(t);var n,a,s,u=null;(u=new cd(uS({domId:o.currentDomId,clientId:r.clientId,currency:o.settleCurrency,queryParams:r.queryParams,scriptParams:r.scriptParams,style:uS(uS({},r.styleOptions),{},{disableMaxWidth:!0}),onInit:function(t,n){c.logger.info("onInit"),c.afterInit(t,n),c.initTimer&&clearTimeout(c.initTimer),c.initActions=n,e(u)},onClick:(s=aE(aH.mark(function e(t,n){var r,o;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.beforeCreateOrder();case 2:if(o=e.sent,c.logger.log("onClick 用户点击了按钮",{data:{data:t,params:o,actions:n}}),o){e.next=6;break}return e.abrupt("return");case 6:if(!1!==o.valid){e.next=8;break}return e.abrupt("return",n.reject());case 8:null===(r=c.initActions)||void 0===r||r.enable(),c.isContinueMode&&(c.createOrderParams=o);case 10:case"end":return e.stop()}},e)})),function(e,t){return s.apply(this,arguments)}),onApprove:(a=aE(aH.mark(function e(t,n){var r,o,i;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(o=null===(r=c.orderInfoMap[t.orderID])||void 0===r?void 0:r.returnUrl)!==c.returnUrl&&c.logger.error("前端记录map的returnUrl与this.returnUrl不匹配",{action:aq.Pay,data:{orderId:t.orderID,map:c.orderInfoMap,url:c.returnUrl}}),i=o||c.returnUrl,c.logger.log("onApprove PayPal 下单成功，触发回调",{data:{data:t,returnUrl:i,actions:n}}),ck(c.config.onApprove)&&c.config.onApprove(t,n),window.location.href=i;case 6:case"end":return e.stop()}},e)})),function(e,t){return a.apply(this,arguments)}),onCancel:(n=aE(aH.mark(function e(t,n){var r;return aH.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c.logger.log("用户取消了支付",{data:t}),!ck(null==n?void 0:n.redirect)||!ck(c.config.onCancel)){e.next=6;break}return e.next=4,c.config.onCancel(t);case 4:r=e.sent,null==n||n.redirect(r);case 6:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)}),onError:function(e,n,r){c.handleError(e,n,r),t(e)}},c.specialParamsByScenes.actions))).render().then(function(){c.loadResourceFail=!1}).catch(function(e){c.loadResourceFail=!0,c.handleError(Error("Load Paypal resource failed"),aq.Init,{error:e}),t(e)}),u&&c.removeSkeleton(i)}));case 18:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})}]),s}(),uE=uP=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":iE(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([cL],uP),uI={Android:["(?:(?:Orca-)?Android|Adr)[ /](?:[a-z]+ )?(\\d+[\\.\\d]*)","Android|Silk-Accelerated=[a-z]{4,5}","(?:TwitterAndroid).*[ /](?:[a-z]+ )?(\\d+[\\.\\d]*)","FB4A.*FBSV/(\\d+[\\.\\d]*);","BeyondPod|AntennaPod|Podkicker|DoggCatcher|Player FM|okhttp|Podcatcher Deluxe"],Linux:["Arch ?Linux(?:[ /\\-](\\d+[\\.\\d]+))?","VectorLinux(?: package)?(?:[ /\\-](\\d+[\\.\\d]+))?","Linux(?:OS)?[^a-z]"],iOS:["CFNetwork/889","CFNetwork/887","CFNetwork/811","CFNetwork/808\\.3","CFNetwork/808\\.2","CFNetwork/808\\.1","CFNetwork/808\\.0","CFNetwork/808","CFNetwork/758\\.4\\.3","CFNetwork/758\\.3\\.15","CFNetwork/758\\.2\\.[78]","CFNetwork/758\\.1\\.6","CFNetwork/758\\.0\\.2","CFNetwork/711\\.5\\.6","CFNetwork/711\\.4\\.6","CFNetwork/711\\.3\\.18","CFNetwork/711\\.2\\.23","CFNetwork/711\\.1\\.1[26]","CFNetwork/711\\.0\\.6","CFNetwork/672\\.1","CFNetwork/672\\.0","CFNetwork/609\\.1","CFNetwork/60[29]","CFNetwork/548\\.1","CFNetwork/548\\.0","CFNetwork/485\\.13","CFNetwork/485\\.12","CFNetwork/485\\.10","CFNetwork/485\\.2","CFNetwork/467\\.12","CFNetwork/459","(?:CPU OS|iPh(?:one)?[ _]OS|iOS)[ _/](\\d+(?:[_\\.]\\d+)*)","FBIOS.*FBSV/(\\d+[\\.\\d]*);","(?:Apple-)?(?:iPhone|iPad|iPod)(?:.*Mac OS X.*Version/(\\d+\\.\\d+)|; Opera)?","Podcasts/(?:[\\d\\.]+)|Instacast(?:HD)?/(?:\\d\\.[\\d\\.abc]+)|Pocket Casts, iOS|Overcast|Castro|Podcat|i[cC]atcher|RSSRadio/","iTunes-(iPod|iPad|iPhone)/(?:[\\d\\.]+)"],MacOS:["CFNetwork/887.*(x86_64)","CFNetwork/811.*(x86_64)","CFNetwork/807","CFNetwork/760","CFNetwork/720","CFNetwork/673","CFNetwork/596","CFNetwork/520","CFNetwork/454","CFNetwork/(?:438|422|339|330|221|220|217)","CFNetwork/12[89]","CFNetwork/1\\.2","CFNetwork/1\\.1","Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?","Mac (\\d+(?:[_\\.]\\d+)+)","Darwin|Macintosh|Mac_PowerPC|PPC|Mac PowerPC|iMac|MacBook"],Windows:["CYGWIN_NT-10.0|Windows NT 10.0|Windows 10","CYGWIN_NT-6.4|Windows NT 6.4|Windows 10","CYGWIN_NT-6.3|Windows NT 6.3|Windows 8.1","CYGWIN_NT-6.2|Windows NT 6.2|Windows 8","CYGWIN_NT-6.1|Windows NT 6.1|Windows 7","CYGWIN_NT-6.0|Windows NT 6.0|Windows Vista","CYGWIN_NT-5.2|Windows NT 5.2|Windows Server 2003 / XP x64","CYGWIN_NT-5.1|Windows NT 5.1|Windows XP","CYGWIN_NT-5.0|Windows NT 5.0|Windows 2000","CYGWIN_NT-4.0|Windows NT 4.0|WinNT|Windows NT","CYGWIN_ME-4.90|Win 9x 4.90|Windows ME","CYGWIN_98-4.10|Win98|Windows 98","CYGWIN_95-4.0|Win32|Win95|Windows 95|Windows_95","Windows 3.1","Windows"],HarmonyOS:[],Other:[]},uT=(ux={},{set:function(e,t){ux[e]=t},get:function(e){if(Object.prototype.hasOwnProperty.call(ux,e))return ux[e]}}),uA=function(e,t){try{var n=(function(e){var t=uT.get(e);if(t)return t.value;var n=RegExp("(?:^|[^A-Z0-9-_]|[^A-Z0-9-]_|sprd-)(?:".concat(e,")"),"i");return uT.set(e,{value:n}),n})(e).exec(t);return n?n.slice(1):null}catch(e){return null}};function uD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var uL=aD(function e(){aI(this,e),aR(this,"parse",function(e){for(var t=null,n=0,r=Object.keys(uI);n<r.length;n++){var o=r[n];if(o&&Object.prototype.hasOwnProperty.call(uI,o)){var i,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return uD(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uD(e,void 0):void 0}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(uI[o]);try{for(a.s();!(i=a.n()).done;){var c=i.value;if(uA(c,e))return t=o}}catch(e){a.e(e)}finally{a.f()}}}return t}),aR(this,"getVersion",function(e,t){switch(t){case"MacOS":return e.replace(/^.*Mac OS X ([\d_]+).*$/,"$1").replace(/_/g,".");case"iOS":return e.replace(/^.*OS ([\d_]+) like.*$/,"$1").replace(/_/g,".");case"Windows":return e.replace(/^.*Windows NT ([\d.]+);.*$/,"$1");case"Android":return e.replace(/^.*Android ([\d.]+);.*$/,"$1")}return""})}),uj=function(){var e,t,n=window.navigator,r=n.userAgent,o=n.language,i=window.screen,a=i.colorDepth,c=i.width,s=i.height,u=window.navigator.javaEnabled().toString(),l=(t=(e=new uL).parse(navigator.userAgent)||"Other",e.getVersion(navigator.userAgent,t));return{transactionWebSite:window.location.href,javaEnabled:u,colorDepth:a.toString(),screenHeight:c.toString(),screenWidth:s.toString(),timeZoneOffset:(new Date).getTimezoneOffset().toString(),accept:"application/json",userAgent:r,language:o,javaScriptEnabled:"true",deviceOsVersion:l}};function uN(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uB(e,t){return(uB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uF(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uB(e,t)}function uR(e,t){if(t&&("object"===ib(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return uN(e)}function uM(e){return(uM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var uU,uH,uY,uq,u$={BUY_NOW:"pay-button-buy-now",MORE_OPTIONS:"pay-button-more-options",CHECKOUT:"pay-button-checkout",PAY_PAL:"pay-button-Paypal",APPLE_PAY:"pay-button-ApplePay",GOOGLE_PAY:"pay-button-GooglePay",SHOP_BY_FAST_CHECKOUT:"pay-button-shop-by",COMMON_ITEM:"pay-button-common-item",COMMON_ITEM_EXPRESS:"pay-button-common-item-express",BUTTON_SUBSCRIPTION:"pay-button-subscription",BUTTON_CUSTOM:"pay-button-custom",BUTTON_LOADING:"pay-button-loading",BUTTON_DISABLED:"pay-button-disabled",BUTTON_HIDE:"pay-button-hide",BUTTON_MASK:"pay-button-mask",BUTTON_SKELETON:"pay-button-skeleton",BUTTON_COLLAPSE:"pay-button-collapse",PAY_PAL_BG_BEFORE:"pay-button-Paypal-bg-before",PAY_PAL_BG_AFTER:"pay-button-Paypal-bg-after"},uV={height:48,width:null,"border-radius":0},uW=sU(),uG=function(){function e(t){var n=this;ig(this,e),iO(this,"needRender",!1),iO(this,"buttonElement",null),iO(this,"isLoading",!1),iO(this,"isDisabled",!1),iO(this,"isVisible",!1),iO(this,"disabledMessage",uW("products.product_list.select_product_all_options")),iO(this,"setLoading",function(e){n.logger.info("setLoading",{data:{bool:e}}),n.isLoading=e;var t=n.buttonElement;e?null==t||t.classList.add(u$.BUTTON_LOADING):null==t||t.classList.remove(u$.BUTTON_LOADING)}),iO(this,"setDisabled",function(e,t){if(n.logger.info("setDisabled",{data:{value:e,options:t}}),n.needRender){n.isDisabled=e,null!=t&&t.message&&(n.disabledMessage=t.message);var r=n.buttonElement;e?null==r||r.classList.add(u$.BUTTON_DISABLED):null==r||r.classList.remove(u$.BUTTON_DISABLED)}}),iO(this,"setVisible",function(e){if(n.logger.info("setVisible",{data:{value:e}}),n.needRender){n.isVisible=e;var t=n.buttonElement;e?null==t||t.classList.remove(u$.BUTTON_HIDE):null==t||t.classList.add(u$.BUTTON_HIDE)}}),iO(this,"renderedList",[]),this.config=t,this.container=document.getElementById(t.domId),this.logger=this.config.props.logger}return iC(e,[{key:"getRenderedList",value:function(){return this.isVisible?this.renderedList:[]}}]),e}();(uz=uH||(uH={})).ProductDetail="productDetail",uz.Cart="cart",uz.Checkout="checkout",(uK=uY||(uY={})).Normal="normalButton",uK.Express="expressCheckoutButton",uK.Fast="fastCheckoutButton",(uJ=uq||(uq={})).BUY_NOW="BUY_NOW",uJ.MORE_OPTIONS="MORE_OPTIONS",uJ.CHECKOUT="CHECKOUT",uJ.PAY_PAL="PAY_PAL",uJ.APPLE_PAY="APPLE_PAY",uJ.GOOGLE_PAY="GOOGLE_PAY",uJ.SHOP_BY_FAST_CHECKOUT="SHOP_BY_FAST_CHECKOUT";var uz,uK,uJ,uX,uZ=(iO(uU={},aW.Paypal,uq.PAY_PAL),iO(uU,aW.ApplePay,uq.APPLE_PAY),iO(uU,aW.GooglePay,uq.GOOGLE_PAY),uU);(uQ=uX||(uX={})).ButtonClick="buttonClick",uQ.ModalOpen="modalOpen";var uQ,u0,u1=[uq.PAY_PAL,uq.APPLE_PAY,uq.GOOGLE_PAY];(u3=u0||(u0={})).Column="column",u3.Row="row",u3.BuyNowRow="buyNowRow",u3.Checkout="checkout";var u3,u2,u4,u5,u6=function(e){return e.buttonTypeDataList.map(function(e){return e.buttonNameDataList}).flat().map(function(e){return e.buttonName})},u9=function(e){return e.isSystem},u8={exports:{}};!function(e){function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var n,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==iS?iS:"undefined"!=typeof self?self:{},o=1/0,i=NaN,a=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt,d="object"==ib(r)&&r&&r.Object===Object&&r,p="object"==("undefined"==typeof self?"undefined":ib(self))&&self&&self.Object===Object&&self,f=d||p||Function("return this")(),h=Object.prototype.toString,y=f.Symbol,m=Math.min,v=y?y.prototype:void 0,g=v?v.toString:void 0;function b(e){var t=ib(e);return!!e&&("object"==t||"function"==t)}function _(e){return"symbol"==ib(e)||!!e&&"object"==ib(e)&&"[object Symbol]"==h.call(e)}function w(e){if("number"==typeof e)return e;if(_(e))return i;if(b(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=b(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=s.test(e);return n||u.test(e)?l(e.slice(2),n?2:8):c.test(e)?i:+e}function C(e){return null==e?"":function(e){if("string"==typeof e)return e;if(_(e))return g?g.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}(e)}var O,S,x,k,P,E,I=(O=Math.round,function(e,t){var n,r,i;if(e=w(e),t=m((i=(r=(n=t)?(n=w(n))===o||n===-o?(n<0?-1:1)*17976931348623157e292:n==n?n:0:0===n?n:0)%1,r==r?i?r-i:r:0),292)){var a=(C(e)+"e").split("e");return+((a=(C(O(a[0]+"e"+(+a[1]+t)))+"e").split("e"))[0]+"e"+(+a[1]-t))}return O(e)}),T={amount:{value:"amount",decimalSymbol:".",groupSymbol:",",format:"amount"},amount_no_decimals:{value:"amount_no_decimals",decimalSymbol:"",groupSymbol:",",format:"amount_no_decimals"},amount_with_comma_separator:{value:"amount_with_comma_separator",decimalSymbol:",",groupSymbol:".",format:"amount_with_comma_separator"},amount_no_decimals_with_comma_separator:{value:"amount_no_decimals_with_comma_separator",decimalSymbol:"",groupSymbol:".",format:"amount_no_decimals_with_comma_separator"},amount_with_apostrophe_separator:{value:"amount_with_apostrophe_separator",decimalSymbol:".",groupSymbol:"'",format:"amount_with_apostrophe_separator"},amount_no_decimals_with_space_separator:{value:"amount_no_decimals_with_space_separator",decimalSymbol:"",groupSymbol:" ",format:"amount_no_decimals_with_space_separator"},amount_with_space_separator:{value:"amount_with_space_separator",decimalSymbol:",",groupSymbol:" ",format:"amount_with_space_separator"}},A=/.*\{\{(.*)\}\}/,D=/(\{\{.*\}\})/,L="amount";(n=S||(S={})).PREFIX="prefix",n.SUFFIX="suffix";var j=Object.entries(T).map(function(e){return(function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),2!==i.length);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,2)||function(e,n){if(e){if("string"==typeof e)return t(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,2):void 0}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1].value}),N=new Map,B=new Map,F=new Map,R=new Map,M=new Map,U=new Map,H=new Map,Y=new Map,q=new Map,V=function(){N.clear(),B.clear(),F.clear(),R.clear(),M.clear(),U.clear(),H.clear(),Y.clear(),q.clear()},W=function(e){P=e},G=function(){return P},z=function(){return E},K=function(e){return j.includes(e||"")},J=function(e){var t=e.match(A);if(t&&t.length){var n=(t[1]||"").trim();return K(n)?T[n]:null}return null},X=function(e,t,n){var r=J(t),o=(n?U:M).get(e),i=o&&o.format;return r||(K(i)?T[i]:T[L])},Z=function(e){return J(e)||T[L]},Q=function(e,t){N.set(e,t)},ee=function(e,t){B.set(e,t)},et=function(e,t,n){var r,o,i=e.match(A);return null!=i&&i.length&&j.includes((null==i||null===(r=i[1])||void 0===r?void 0:r.trim())||"")?e:(null===(o=(n?U:M).get(t))||void 0===o?void 0:o.origin)||"{{amount}}"},en=function(e,t){var n=Z(t).format;M.set(e,{format:n,origin:t})},er=function(e,t){var n=Z(t).format;U.set(e,{format:n,origin:t})},eo=function(e,t){var n=X(e,t,!1),r=n.format,o=n.decimalSymbol,i=n.groupSymbol;Y.set(e,o),q.set(e,i),F.set(e,{format:r,origin:et(t,e,!1)})},ei=function(e,t){var n=X(e,t,!0),r=n.format,o=n.decimalSymbol,i=n.groupSymbol;Y.set(e,o),q.set(e,i),R.set(e,{format:r,origin:et(t,e,!0)})},ea=function(e,t){t?(null==t?void 0:t.replace(/^\s+/,"").indexOf("{{"))>0?H.set(e,S.PREFIX):H.set(e,S.SUFFIX):window[window.__sl_console__?"__sl_console__":"console"].error("".concat(e,"无对应的messageWithoutDefaultCurrency配置"))},ec=function(e){var t=z().find(function(t){return t.currencyCode===e});if(t){var n=t.messageWithoutDefaultCurrency,r=t.messageWithCurrency,o=t.messageWithoutCurrency,i=t.messageWithDefaultCurrency,a=t.currencyCode,c=t.rate,s=t.currencySymbol;Q(a,void 0===c?2:c),ee(a,s),ea(a,n),en(a,n),er(a,i),eo(a,o),ei(a,r)}else window[window.__sl_console__?"__sl_console__":"console"].error("获取".concat(e,"对应的货币配置失败"))},es=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").replace(D,e)},eu=function(e,t,n){var r,o,i,a,c=T[t],s=c.groupSymbol,u=c.decimalSymbol,l=e<0,d=(i=I(l?-e:e,n),0!==n&&u?(r=Math.floor(i),o="".concat(I(i-r,n)).replace(/^0?\.?/,"").padEnd(n,"0")):(r=I(i),o=""),{integerPart:r,fractionPart:o}),p=d.fractionPart,f=(a=d.integerPart,"".concat(a||0).replace(/(\d)(?=(?:\d{3})+$)/g,"$1".concat(s)));return{integer:"".concat(l?"-":"").concat(f),fraction:p,groupSymbol:s,decimalSymbol:u}},el=function(e,t){var n,r=(null==t?void 0:t.code)||x||"CNY";F.get(r)||ec(r);var o=ew(r),i=e_(r),a=em(r),c=ev(r),s=(F.get(r)||{}).format,u=eu(e,K(s)?s:L,2),l=u.integer,d=u.fraction,p=[],f=(null==l?void 0:l.split(o))||[];return f.forEach(function(e,t){p.push({type:"integer",value:e}),t!==f.length-1&&p.push({type:"group",value:o})}),p.push({type:"decimal",value:i}),p.push({type:"fraction",value:null!==(n=null==d?void 0:d.trim())&&void 0!==n?n:""}),"prefix"===c?p.unshift({type:"currency",value:a}):p.push({type:"currency",value:a}),p},ed=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CNY",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k,i=(arguments.length>3?arguments[3]:void 0)||G();return r===o?e:e*(null!==(t=i[o])&&void 0!==t?t:1)/(null!==(n=i[r])&&void 0!==n?n:1)},ep=function(e,t,n){var r=t?R:F,o=t?eh:ey,i=n||{},a=i.from,c=void 0===a?x:a,s=i.to,u=void 0===s?k:s,l=i.currencyRates;return r.get(c)||ec(c),r.get(u)||ec(u),o(ed(e,c,u,l||G()),{code:u})},ef=function(e,t,n){var r,o=t?R:F,i=(null==n?void 0:n.code)||x||"CNY";o.get(i)||ec(i);var a=o.get(i)||{},c=a.format,s=a.origin,u=null!==(r=null==n?void 0:n.digits)&&void 0!==r?r:2,l=eu(e/Math.pow(10,u),K(c)?c:L,u),d=l.integer,p=l.fraction,f=l.decimalSymbol;return es(f&&u?"".concat(d).concat(f).concat(p):d,s)},eh=function(e,t){return ef(e,!0,t)},ey=function(e,t){return ef(e,!1,t)},em=function(e){var t;return F.get(e)||ec(e),null!==(t=B.get(e))&&void 0!==t?t:""},ev=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CNY";return F.get(e)||ec(e),H.get(e)},eg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return("number"!=typeof e?Number(e):e)/Math.pow(10,t)},eb=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return I(("number"!=typeof e?Number(e):e)*Math.pow(10,t),0)},e_=function(e){var t;return F.get(e)||ec(e),null!==(t=Y.get(e))&&void 0!==t?t:""},ew=function(e){var t;return F.get(e)||ec(e),null!==(t=q.get(e))&&void 0!==t?t:""};e.convertCalc=ed,e.convertFormat=function(e,t){return ep(e,!0,t)},e.convertFormatWithoutCurrency=function(e,t){return ep(e,!1,t)},e.covertCalc=ed,e.defaultCurrency="CNY",e.defaultCurrencyDigit=2,e.defaultPresentDigit=2,e.format=eh,e.formatCurrency=function(e){return eg(e,2)},e.formatMoneyWithoutCurrency=function(e,t){var n=(null==t?void 0:t.code)||x||"CNY";F.get(n)||ec(n);var r=(F.get(n)||{}).format,o=eu(e/100,K(r)?r:L,2),i=o.integer,a=o.fraction,c=o.decimalSymbol;return c?"".concat(i).concat(c).concat(a):i},e.formatNumber=eg,e.formatPercent=function(e){return eg(e,2)},e.formatWithoutCurrency=ey,e.getConvertPrice=function(e,t){var n=null!=t?t:{},r=n.from,o=n.code,i=n.to,a=n.currencyRates,c=r||x||"CNY";F.get(c)||ec(c);var s=i||o||k;F.get(s)||ec(s);var u=el(ed(eg(e),c,s,a||P),{code:s}),l={group:"",integer:"",decimal:"",fraction:"",symbolOrder:"",currencySymbol:""},d=ev(s);return d&&(l.symbolOrder=d),u.forEach(function(e){var t=e.value;"currency"===e.type&&(l.currencySymbol=t),"integer"===e.type&&(l.integer?l.integer="".concat(l.integer).concat(l.group).concat(t):l.integer=t),"group"===e.type&&(l.group=t),"decimal"===e.type&&(l.decimal=t),"fraction"===e.type&&(l.fraction=t)}),l},e.getCurrencyConfig=z,e.getCurrencyRates=G,e.getDecimalSymbolByCode=e_,e.getDefaultToCurrency=function(){return k},e.getDigitsByCode=function(e){return F.get(e)||ec(e),N.get(e)},e.getFormatParts=el,e.getGroupSymbolByCode=ew,e.getStoreCurrency=function(){return x},e.getSymbolByCode=em,e.getSymbolOrderByCode=ev,e.parseCustomFormat=X,e.parseCustomFormatWithCurrency=ei,e.parseCustomFormatWithoutCurrency=eo,e.parseDefaultFormat=Z,e.parseDefaultFormatWithCurrency=er,e.parseDefaultFormatWithoutCurrency=en,e.setCurrencyConfig=function(e){var t={};(E=e).forEach(function(e){t[e.currencyCode]=e.exchangeRate}),W(t),"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)&&V()},e.setCurrencyRates=W,e.setDefaultToCurrency=function(e){k=e},e.setStoreCurrency=function(e){x=e},e.unformatCurrency=function(e){return eb(e,2)},e.unformatNumber=eb,e.unformatPercent=function(e){return eb(e,2)},Object.defineProperty(e,"__esModule",{value:!0})}(u8.exports),(lr=u5||(u5={})).PayButtonView="View",lr.PayButtonClick="",lr.InitiateCheckout="InitiateCheckout",lr.AddCustomerInfo="AddCustomerInfo",lr.AddShippingInfo="AddShippingInfo",lr.AddPaymentInfo="AddPaymentInfo",lr.FastCheckout="FastCheckout";var u7=(iO(u2={FastCheckout:158},uH.ProductDetail,159),iO(u2,uH.Cart,162),iO(u2,uH.Checkout,163),u2),le=(iO(u4={Other:-999},uq.BUY_NOW,102),iO(u4,uq.MORE_OPTIONS,102),iO(u4,uq.PAY_PAL,103),iO(u4,uq.APPLE_PAY,180),iO(u4,uq.GOOGLE_PAY,181),iO(u4,uq.SHOP_BY_FAST_CHECKOUT,182),u4);function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach(function(t){iO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}for(var lr,lo,li=function(e){window.HdSdk&&window.HdSdk.shopTracker&&window.HdSdk.shopTracker.collect(e)},la={reportConversionEvent:function(e,t){var n=t.currency,r=t.orderAmount,o=t.productInfos,i=t.shipping_method;li(this.generateReportData(e,{currency:n,orderAmount:r,productInfos:o,shipping_method:i}))},reportAddPaymentInfo:function(e){var t=e.currency,n=e.orderAmount,r=e.productInfos,o=e.payment_method,i=e.coupon_code,a=e.shipping_method,c=e.basicInfo;li(ln(ln({},this.generateReportData(u5.AddPaymentInfo,{currency:t,orderAmount:n,productInfos:r,basicInfo:c,shipping_method:a})),{},{payment_method:o,coupon_code:i}))},generateReportData:function(e,t){if(e){var n=this.generateProductParams(e,{productInfos:t.productInfos||[]}),r=t.orderAmount||0,o=ln(ln({page:-999,component:le.Other,module:u7.FastCheckout,action_type:-999,billing_address_status:1,event_name:e,value:u8.exports.formatNumber(r).toString(),currency:t.currency,referral_code:""},n),{},{payment_method:t.payment_method,coupon_code:"",shipping_method:t.shipping_method});if(e===u5.AddPaymentInfo){var i=sessionStorage.getItem("tradeAttributeInfo");if(i){var a=(JSON.parse(i)||{}).referralCode;o.referral_code=a?a.value:void 0}}else delete o.referral_code,delete o.payment_method,delete o.coupon_code;return e!==u5.AddPaymentInfo&&delete o.billing_address_status,e!==u5.AddShippingInfo&&delete o.shipping_method,o}},generateProductParams:function(e,t){var n=t.productInfos,r=new Set,o=[],i=0;return n.forEach(function(e){i+=e.productNum||0,o.push(e.productSku||""),r.add(e.productSeq||"")}),{content_ids:ih(r.values()).join(","),variantion_id:o.join(","),quantity:i.toString()}},reportPayButtonView:function(e,t){li({event_name:u5.PayButtonView,page:"",module:u7[t],component:le[e],action_type:101})},reportPayButtonClick:function(e,t){li({event_name:"",page:"",module:u7[t],component:le[e],action_type:102})}},lc=new Uint8Array(16),ls=[],lu=0;lu<256;++lu)ls.push((lu+256).toString(16).slice(1));var ll={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},ld=function(){return Number(Math.random().toString().slice(2)+Date.now()).toString(36)},lp=function(e){var t=document.cookie.split("; "),n={};return t.forEach(function(e){var t=iy(e.split("="),2),r=t[0],o=t[1];r&&(n[r]=o||"")}),n[e]||""},lf=function(){return"".concat(Date.now(),"_").concat((function(e,t,n){if(ll.randomUUID&&!t&&!e)return ll.randomUUID();var r=(e=e||{}).random||(e.rng||function(){if(!lo&&!(lo="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return lo(lc)})();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(ls[e[t+0]]+ls[e[t+1]]+ls[e[t+2]]+ls[e[t+3]]+"-"+ls[e[t+4]]+ls[e[t+5]]+"-"+ls[e[t+6]]+ls[e[t+7]]+"-"+ls[e[t+8]]+ls[e[t+9]]+"-"+ls[e[t+10]]+ls[e[t+11]]+ls[e[t+12]]+ls[e[t+13]]+ls[e[t+14]]+ls[e[t+15]]).toLowerCase()}(r)})().replace(/-/g,""))},lh=function(e){return null===e.offsetParent},ly=function(e){var t=document.createElement("style");return t.innerHTML=e.replace(/\/\*(.*?)\*\//g,"").replace(/\s+/g," ").replace(/\s*([{}:;,])\s*/g,"$1"),{style:t,cssInsertBefore:function(e){var n;return null===(n=e.parentNode)||void 0===n?void 0:n.insertBefore(t,e)}}};function lm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var lv=sU(),lg=function(e){uF(r,uG);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=uM(r);return e=t?Reflect.construct(n,arguments,uM(this).constructor):n.apply(this,arguments),uR(this,e)});function r(e){ig(this,r),iO(uN(o=n.call(this,e)),"customHandleClick",null),iO(uN(o),"render",(t=iv(iP.mark(function e(t){var n;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.logger.info("render"),o.needRender){e.next=3;break}return e.abrupt("return",[]);case 3:return n=o.insertDom(t),o.addListener(),o.renderedList=n,e.abrupt("return",n);case 7:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})),iO(uN(o),"setSubscription",function(e){var t;if(o.logger.info("setSubscription",{data:{value:e}}),o.needRender){var n=null===(t=o.container)||void 0===t?void 0:t.querySelectorAll(".".concat(u$.COMMON_ITEM_EXPRESS)),r=u9(o.config.paymentConfig);n&&r&&(ih(n).find(function(e){return!lh(e)})?o.render(uq.MORE_OPTIONS):o.render(uq.BUY_NOW),o.setVisible(!0))}}),iO(uN(o),"customButton",function(e,t){var n,r;if(o.logger.log("customBuyNow",{data:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lm(Object(n),!0).forEach(function(t){iO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lm(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({buttonName:e},t)}),o.needRender){var i,a,c,s,u,l,d=t.className,p=t.handle;(e!==uq.BUY_NOW||null!==(n=o.buttonElement)&&void 0!==n&&n.className.includes(u$.BUY_NOW))&&(e!==uq.MORE_OPTIONS||null!==(r=o.buttonElement)&&void 0!==r&&r.className.includes(u$.MORE_OPTIONS))&&(d&&(null===(i=o.buttonElement)||void 0===i||(a=i.classList).add.apply(a,ih(d.split(" ")))),p&&(null===(c=o.buttonElement)||void 0===c||c.classList.add(u$.BUTTON_CUSTOM),null===(s=o.buttonElement)||void 0===s||s.removeEventListener("click",o.handleClick),o.customHandleClick&&(null===(u=o.buttonElement)||void 0===u||u.removeEventListener("click",o.customHandleClick)),o.customHandleClick=function(){return p(o.handleClick)},null===(l=o.buttonElement)||void 0===l||l.addEventListener("click",o.customHandleClick)))}}),iO(uN(o),"insertDom",function(e){var t,n=o.config,r=n.paymentConfig,i=n.props,a=i.layout,c=i.extraBuyNowDomId,s=u6(r),u=u9(r),l=s.includes(uq.BUY_NOW);o.logger.info("insertDom data",{data:{isDynamic:u,hasBuyNow:l}});var d,p,f,h=(d=u$.BUTTON_HIDE,'<button type="button" class="btn btn-primary '.concat(u$.COMMON_ITEM," ").concat(u$.BUY_NOW," ").concat(null!=d?d:"",'" type="button">\n    <span class="').concat(u$.BUY_NOW,'-text">').concat(lv("cart.cart.buy_now"),'</span><span class="loading-icon" /></button>')),y='\n      <div class="'.concat(u$.MORE_OPTIONS," ").concat(u$.BUTTON_HIDE,'">\n        ').concat(lv("products.product_details.more_payment_options"),"\n      </div>\n    ");if(null===(t=o.container)||void 0===t||t.querySelectorAll(".".concat(u$.BUY_NOW,", .").concat(u$.MORE_OPTIONS)).forEach(function(e){return e.remove()}),e===uq.BUY_NOW||!e&&l){if(a===u0.BuyNowRow&&c){o.logger.info("BuyNowRow layout render buy now");var m,v,g=document.getElementById(c);g&&(g.innerHTML=h,o.buttonElement=(null==g?void 0:g.querySelector(".".concat(u$.BUY_NOW)))||null)}else o.logger.info("normal render buy now"),null===(m=o.container)||void 0===m||m.insertAdjacentHTML("afterbegin",h),o.buttonElement=(null===(v=o.container)||void 0===v?void 0:v.querySelector(".".concat(u$.BUY_NOW)))||null;return[uq.BUY_NOW]}return e===uq.MORE_OPTIONS||u?(o.logger.info("render more payment options"),null===(p=o.container)||void 0===p||p.insertAdjacentHTML("beforeend",y),o.buttonElement=(null===(f=o.container)||void 0===f?void 0:f.querySelector(".".concat(u$.MORE_OPTIONS)))||null,[uq.MORE_OPTIONS]):[]}),iO(uN(o),"addListener",function(){var e=uN(o).buttonElement;e&&(e.removeEventListener("click",o.handleClick),e.addEventListener("click",o.handleClick))}),iO(uN(o),"handleClick",iv(iP.mark(function e(){var t,n,r,i,a,c,s,u,l;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(t=o.config).paymentConfig.buttonLocation,r=t.saveAbandonedOrder,a=(i=t.props).isPreview,c=i.toast,la.reportPayButtonClick(uq.BUY_NOW,n),!a){e.next=6;break}return o.logger.info("预览模式，按钮点击触发toast提示"),c(lv("products.product_details.link_preview_does_not_support")),e.abrupt("return");case 6:if(!o.isDisabled){e.next=10;break}return o.logger.info("按钮禁用",{data:{isDisabled:o.isDisabled}}),c(o.disabledMessage),e.abrupt("return");case 10:if(!o.isLoading){e.next=13;break}return o.logger.info("按钮点击中",{data:{isLoading:o.isLoading}}),e.abrupt("return");case 13:return o.setLoading(!0),e.next=16,r(o.renderedList[0]||uq.BUY_NOW);case 16:if(u=(s=e.sent).canContinue,l=s.url,u){e.next=22;break}return o.setLoading(!1),e.abrupt("return");case 22:l&&(o.logger.info("jump to checkout",{data:l}),window.location.href=l);case 23:case"end":return e.stop()}},e)})));var t,o,i=e.buttonTypes;return o.logger=o.config.props.logger.pipeOwner("NormalButton"),o.needRender=!i||i.includes(uY.Normal),o}return iC(r)}();function lb(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l_(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l_(e,void 0)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function l_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function lw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lw(Object(n),!0).forEach(function(t){iO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var lO=function(){var e,t,n;function r(e){var t,n,o=this;ig(this,r),iO(this,"renderList",[]),iO(this,"checkAllButtonsInitFail",function(){var e=0===o.renderList.filter(function(e){return e.instance.isVisible}).length;o.logger.info("checkAllButtonsInitFail",{data:{isAllButtonInitFail:e}}),e&&ck(o.configData.onAllButtonsInitFail)&&o.configData.onAllButtonsInitFail()}),this.configData=e,ak.set(null===(t=(n=this.configData).loggerFn)||void 0===t?void 0:t.call(n)),this.logger=ak.get().pipeOwner("SmartPayment")}return iC(r,[{key:"handleElement",value:function(){var e,t,n;cR({styleOptions:t=(e={styleOptions:this.configData.props.styleOptions,domId:this.configData.props.domId}).styleOptions,domId:n=e.domId}),cM({styleOptions:t,domId:n})}},{key:"renderPaymentItem",value:(n=iv(iP.mark(function e(t){var n,r,o,i,a,c,s=this;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=uh(lC(lC({channelCode:t.channelCode,paymentInfo:t},this.configData),{},{onError:function(e,n,r){ck(s.configData.onError)&&s.configData.onError(e,n,lC(lC({},r),{},{channelCode:t.channelCode,methodCode:t.methodCode}))}}))){e.next=4;break}return e.abrupt("return");case 4:return o=(r=n.validate()).result,i=r.errorTip,o||this.logger.error("render error ".concat(i)),a=n.getConfig(),c=new n.component(lC({},a)),e.next=11,c.render();case 11:this.renderList.push({channelCode:a.channelCode,params:a,instance:c}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),this.logger.error("render error",{error:e.t0});case 17:case"end":return e.stop()}},e,this,[[0,14]])})),function(e){return n.apply(this,arguments)})},{key:"render",value:(t=iv(iP.mark(function e(){var t,n,r;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.logger.log("render",{data:{config:this.configData}}),this.configData.payments&&Array.isArray(this.configData.payments)||this.logger.error("render error 传值有误[payments]"),e.next=5,sH(this.configData.language||"en");case 5:this.handleElement(),t=lb(this.configData.payments),e.prev=8,t.s();case 10:if((n=t.n()).done){e.next=16;break}return r=n.value,e.next=14,this.renderPaymentItem(r);case 14:e.next=10;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(8),t.e(e.t0);case 21:return e.prev=21,t.f(),e.finish(21);case 24:this.checkAllButtonsInitFail(),e.next=30;break;case 27:e.prev=27,e.t1=e.catch(0),this.logger.error("render error",{error:e.t1});case 30:case"end":return e.stop()}},e,this,[[0,27],[8,18,21,24]])})),function(){return t.apply(this,arguments)})},{key:"rerender",value:(e=iv(iP.mark(function e(t){var n,r,o,i,a,c,s,u,l,d,p=this;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=this.renderList,this.logger.info("rerender start",{action:aq.ReRender,data:{renderList:n.map(function(e){return e.channelCode})}}),r=lb(n),e.prev=4,r.s();case 6:if((o=r.n()).done){e.next=14;break}if(!(i=o.value.instance).loadResourceFail){e.next=12;break}return e.next=12,i.render();case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:a=lb(t),e.prev=23,s=iP.mark(function e(){var t,r,o,i,a,s;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.value,r=n.find(function(e){var n,r=(null===(n=e.instance.config)||void 0===n?void 0:n.paymentInfo)||{},o=r.channelCode,i=r.methodCode;return o===t.channelCode&&i===t.methodCode})){e.next=6;break}return e.next=5,p.renderPaymentItem(t);case 5:return e.abrupt("return","continue");case 6:r.instance.initSuccess&&!r.instance.isVisible&&(null===(o=(i=r.instance).showButton)||void 0===o||o.call(i),null===(a=(s=p.configData).afterInit)||void 0===a||a.call(s));case 7:case"end":return e.stop()}},e)}),a.s();case 26:if((c=a.n()).done){e.next=33;break}return e.delegateYield(s(),"t1",28);case 28:if("continue"!==e.t1){e.next=31;break}return e.abrupt("continue",31);case 31:e.next=26;break;case 33:e.next=38;break;case 35:e.prev=35,e.t2=e.catch(23),a.e(e.t2);case 38:return e.prev=38,a.f(),e.finish(38);case 41:u=lb(n),e.prev=42,d=iP.mark(function e(){var n,r,o;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=l.value,t.find(function(e){var t,r=(null===(t=n.instance.config)||void 0===t?void 0:t.paymentInfo)||{},o=r.channelCode,i=r.methodCode;return o===e.channelCode&&i===e.methodCode})||null===(r=(o=n.instance).hideButton)||void 0===r||r.call(o);case 3:case"end":return e.stop()}},e)}),u.s();case 45:if((l=u.n()).done){e.next=49;break}return e.delegateYield(d(),"t3",47);case 47:e.next=45;break;case 49:e.next=54;break;case 51:e.prev=51,e.t4=e.catch(42),u.e(e.t4);case 54:return e.prev=54,u.f(),e.finish(54);case 57:this.checkAllButtonsInitFail(),e.next=63;break;case 60:e.prev=60,e.t5=e.catch(0),this.logger.error("rerender error",{action:aq.ReRender,error:e.t5});case 63:case"end":return e.stop()}},e,this,[[0,60],[4,16,19,22],[23,35,38,41],[42,51,54,57]])})),function(t){return e.apply(this,arguments)})},{key:"getPaymentMethods",value:function(){return this.renderList.map(function(e){return{channelCode:e.channelCode,params:e.params}})}},{key:"setDisabled",value:function(e){try{this.logger.info("setDisabled start",{data:{disabled:e}}),this.renderList.forEach(function(t){t.instance.setDisabled(e)})}catch(e){this.logger.error("setDisabled error",{error:e})}}}]),r}(),lS=lO=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ib(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([cL],lO);function lx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lx(Object(n),!0).forEach(function(t){iO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lx(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}u8.exports.setCurrencyConfig(window.Shopline.currencyConfig.currencyDetailList);var lP,lE=function(e,t){return t.isSubscription?"".concat(e.channelCode,"_").concat(e.methodCode,"_").concat(t.uniqueId,"_subscription"):"".concat(e.channelCode,"_").concat(e.methodCode,"_").concat(t.uniqueId)},lI=function(e){var t;return(null===(t=e.buttonTypeDataList.find(function(e){return e.buttonType===uY.Express}))||void 0===t?void 0:t.buttonNameDataList.map(function(e){return e.buttonConfigData}))||[]},lT=function(e){if(e.redirect&&e.fullUri){var t="".concat(window.location.protocol,"//").concat(window.location.host).concat(e.fullUri);return window.location.href=t,!0}return!1},lA=function(e,t){var n=t.expressCheckoutChannelInfo,r=lk({},e);if(n.channelCode===aV.SLpayments){if(n.methodCode===aW.GooglePay){var o=r.transactionInfo,i=r.newTransactionInfo,a=(o||i).currencyCode,c=function(e){var t=lk({},e),n=u8.exports.getGroupSymbolByCode(a);return t.totalPrice=u8.exports.formatMoneyWithoutCurrency(Number(t.totalPrice),{code:a}).replaceAll(n,""),Array.isArray(t.displayItems)&&t.displayItems.length&&(t.displayItems=t.displayItems.map(function(e){return lk(lk({},e),{},{price:u8.exports.formatMoneyWithoutCurrency(Number(e.price),{code:a}).replaceAll(n,"")})})),t},s=function(e){var t=lk({},e);return Array.isArray(t.shippingOptions)&&t.shippingOptions.length&&(t.shippingOptions=t.shippingOptions.map(function(e){return lk(lk({},e),{},{description:"".concat(a,": ").concat(u8.exports.formatWithoutCurrency(Number(e.description),{code:a}))})})),t};return r.newTransactionInfo&&(r.newTransactionInfo=c(r.newTransactionInfo)),r.transactionInfo&&(r.transactionInfo=c(r.transactionInfo)),r.newShippingOptionParameters&&(r.newShippingOptionParameters=s(r.newShippingOptionParameters)),r.shippingOptionParameters&&(r.shippingOptionParameters=s(r.shippingOptionParameters)),r}if(n.methodCode===aW.ApplePay){var u=r.paymentRequest,l=r.newTotal,d=u.currencyCode,p=u8.exports.getGroupSymbolByCode(d),f=function(e){return u8.exports.formatMoneyWithoutCurrency(Number(e),{code:d}).replaceAll(p,"")};return Array.isArray(r.newShippingMethods)&&(r.newShippingMethods=r.newShippingMethods.map(function(e){return lk(lk({},e),{},{amount:f(e.amount)})})),Array.isArray(null==u?void 0:u.shippingMethods)&&(u.shippingMethods=u.shippingMethods.map(function(e){return lk(lk({},e),{},{amount:f(e.amount)})})),l&&(l.amount=f(l.amount)),u.total&&(u.total.amount=f(u.total.amount)),Array.isArray(r.newLineItems)&&(r.newLineItems=r.newLineItems.map(function(e){return lk(lk({},e),{},{amount:f(e.amount)})})),Array.isArray(u.lineItems)&&(u.lineItems=u.lineItems.map(function(e){return lk(lk({},e),{},{amount:f(e.amount)})})),r}}return r},lD=function(e,t){var n=t.expressCheckoutChannelInfo;if(n.channelCode===aV.SLpayments)return function(e){if(e){var t=e.defaultSelectedOptionId,n=e.shippingOptions;if(t&&Array.isArray(n)){var r=n.find(function(e){return e.id===t});if(r)return r.label}}}(e.newShippingOptionParameters||e.shippingOptionParameters);if(n.channelCode===aV.StripeOther&&Array.isArray(e.shippingOptions)){var r=e.shippingOptions.find(function(e){return e.selected});if(r)return r.label}},lL=function(e,t){var n,r=uZ[t.methodCode];if(r){var o={type:e,data:{buttonName:r,buttonLocation:t.buttonLocation}},i=new CustomEvent("PayButton::Update",{bubbles:!0,detail:o});document.dispatchEvent(i),null===(n=window.Shopline.event)||void 0===n||n.emit("PayButton::Update",o)}},lj=function(e){var t=uq.PAY_PAL;switch(e){case aW.GooglePay:t=uq.GOOGLE_PAY;break;case aW.ApplePay:t=uq.APPLE_PAY;break;default:t=uq.PAY_PAL}return t},lN=function(){var e={sid:"",createAt:Date.now()};try{var t=window.localStorage.getItem("tracker_sid");if(!t)return e;var n=JSON.parse(t).value;return{sid:n.sid,createAt:n.createAt}}catch(t){return window[window.__sl_console__?"__sl_console__":"console"].error("get session info error: ",t),e}},lB={},lF="%[a-f0-9]{2}",lR=RegExp("("+lF+")|([^%]+?)","gi"),lM=RegExp("("+lF+")+","gi"),lU=function(e){if("string"!=typeof e)throw TypeError("Expected `encodedURI` to be of type `string`, got `"+ib(e)+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=lM.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=function(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(lR)||[],n=1;n<t.length;n++)t=(e=(function e(t,n){try{return[decodeURIComponent(t.join(""))]}catch(e){}if(1===t.length)return t;n=n||1;var r=t.slice(0,n),o=t.slice(n);return Array.prototype.concat.call([],e(r),e(o))})(t,n).join("")).match(lR)||[];return e}}(n[0]);r!==n[0]&&(t[n[0]]=r)}n=lM.exec(e)}t["%C2"]="�";for(var o=Object.keys(t),i=0;i<o.length;i++){var a=o[i];e=e.replace(RegExp(a,"g"),t[a])}return e}(e)}},lH=function(e,t){if("string"!=typeof e||"string"!=typeof t)throw TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var n=e.indexOf(t);return -1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]},lY=function(e,t){for(var n={},r=Object.keys(e),o=Array.isArray(t),i=0;i<r.length;i++){var a=r[i],c=e[a];(o?-1!==t.indexOf(a):t(a,c,e))&&(n[a]=c)}return n};function lq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}!function(e){var t=Symbol("encodeFragmentIdentifier");function n(e){if("string"!=typeof e||1!==e.length)throw TypeError("arrayFormatSeparator must be single character string")}function r(e,t){return t.encode?t.strict?encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())}):encodeURIComponent(e):e}function o(e,t){return t.decode?lU(e):e}function i(e){var t=e.indexOf("#");return -1!==t&&(e=e.slice(0,t)),e}function a(e){var t=(e=i(e)).indexOf("?");return -1===t?"":e.slice(t+1)}function c(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):t.parseBooleans&&null!==e&&("true"===e.toLowerCase()||"false"===e.toLowerCase())&&(e="true"===e.toLowerCase()),e}function s(e,t){n((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);var r=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"colon-list-separator":return function(e,n,r){t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return function(t,n,r){var i="string"==typeof n&&n.includes(e.arrayFormatSeparator),a="string"==typeof n&&!i&&o(n,e).includes(e.arrayFormatSeparator);n=a?o(n,e):n;var c=i||a?n.split(e.arrayFormatSeparator).map(function(t){return o(t,e)}):null===n?n:o(n,e);r[t]=c};case"bracket-separator":return function(t,n,r){var i=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),i){var a=null===n?[]:n.split(e.arrayFormatSeparator).map(function(t){return o(t,e)});void 0!==r[t]?r[t]=[].concat(r[t],a):r[t]=a}else r[t]=n?o(n,e):n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),i=Object.create(null);if("string"!=typeof e||!(e=e.trim().replace(/^[?#&]/,"")))return i;var a,s=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return lq(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lq(e,void 0)}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(e.split("&"));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(""!==u){var l=iy(lH(t.decode?u.replace(/\+/g," "):u,"="),2),d=l[0],p=l[1];p=void 0===p?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?p:o(p,t),r(o(d,t),p,i)}}}catch(e){s.e(e)}finally{s.f()}for(var f=0,h=Object.keys(i);f<h.length;f++){var y=h[f],m=i[y];if("object"===ib(m)&&null!==m)for(var v=0,g=Object.keys(m);v<g.length;v++){var b=g[v];m[b]=c(m[b],t)}else i[y]=c(m,t)}return!1===t.sort?i:(!0===t.sort?Object.keys(i).sort():Object.keys(i).sort(t.sort)).reduce(function(e,t){var n=i[t];return n&&"object"===ib(n)&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"===ib(t)?e(Object.keys(t)).sort(function(e,t){return Number(e)-Number(t)}).map(function(e){return t[e]}):t}(n):e[t]=n,e},Object.create(null))}e.extract=a,e.parse=s,e.stringify=function(e,t){if(!e)return"";n((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);for(var o=function(e){switch(e.arrayFormat){case"index":return function(t){return function(n,o){var i=n.length;return void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?n:[].concat(ih(n),null===o?[[r(t,e),"[",i,"]"].join("")]:[[r(t,e),"[",r(i,e),"]=",r(o,e)].join("")])}};case"bracket":return function(t){return function(n,o){return void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?n:[].concat(ih(n),null===o?[[r(t,e),"[]"].join("")]:[[r(t,e),"[]=",r(o,e)].join("")])}};case"colon-list-separator":return function(t){return function(n,o){return void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?n:[].concat(ih(n),null===o?[[r(t,e),":list="].join("")]:[[r(t,e),":list=",r(o,e)].join("")])}};case"comma":case"separator":case"bracket-separator":var t="bracket-separator"===e.arrayFormat?"[]=":"=";return function(n){return function(o,i){return void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?o:(i=null===i?"":i,0===o.length?[[r(n,e),t,r(i,e)].join("")]:[[o,r(i,e)].join(e.arrayFormatSeparator)])}};default:return function(t){return function(n,o){return void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?n:[].concat(ih(n),null===o?[r(t,e)]:[[r(t,e),"=",r(o,e)].join("")])}}}}(t),i={},a=0,c=Object.keys(e);a<c.length;a++){var s=c[a];t.skipNull&&null==e[s]||t.skipEmptyString&&""===e[s]||(i[s]=e[s])}var u=Object.keys(i);return!1!==t.sort&&u.sort(t.sort),u.map(function(n){var i=e[n];return void 0===i?"":null===i?r(n,t):Array.isArray(i)?0===i.length&&"bracket-separator"===t.arrayFormat?r(n,t)+"[]":i.reduce(o(n),[]).join("&"):r(n,t)+"="+r(i,t)}).filter(function(e){return e.length>0}).join("&")},e.parseUrl=function(e,t){t=Object.assign({decode:!0},t);var n=iy(lH(e,"#"),2),r=n[0],i=n[1];return Object.assign({url:r.split("?")[0]||"",query:s(a(e),t)},t&&t.parseFragmentIdentifier&&i?{fragmentIdentifier:o(i,t)}:{})},e.stringifyUrl=function(n,o){o=Object.assign(iO({encode:!0,strict:!0},t,!0),o);var a,c,s,u=i(n.url).split("?")[0]||"",l=e.extract(n.url),d=Object.assign(e.parse(l,{sort:!1}),n.query),p=e.stringify(d,o);p&&(p="?".concat(p));var f=(a=n.url,c="",-1!==(s=a.indexOf("#"))&&(c=a.slice(s)),c);return n.fragmentIdentifier&&(f="#".concat(o[t]?r(n.fragmentIdentifier,o):n.fragmentIdentifier)),"".concat(u).concat(p).concat(f)},e.pick=function(n,r,o){o=Object.assign(iO({parseFragmentIdentifier:!0},t,!1),o);var i=e.parseUrl(n,o),a=i.url,c=i.query,s=i.fragmentIdentifier;return e.stringifyUrl({url:a,query:lY(c,r),fragmentIdentifier:s},o)},e.exclude=function(t,n,r){var o=Array.isArray(n)?function(e){return!n.includes(e)}:function(e,t){return!n(e,t)};return e.pick(t,o,r)}}(lB);var l$,lV=(iO(lP={},uH.ProductDetail,"detail"),iO(lP,uH.Cart,"cart"),iO(lP,uH.Checkout,void 0),lP);(lW=l$||(l$={})).InitFail="initFail",lW.UpdateFail="updateFail",lW.NoShippingOption="noShippingOption",lW.InvalidDiscountCode="invalidDiscountCode",lW.DiscountCodeExists="discountCodeExists",lW.CreateFail="createFail",lW.CreateTimeout="createTimeout";var lW,lG,lz,lK,lJ,lX,lZ,lQ={maxCount:3,interval:1e3},l0=(lG=iv(iP.mark(function e(t){var n,r,o,i,a,c,s,u,l,d,p,f;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.products,i=void 0!==(o=t.associateCart)&&o,c=void 0===(a=t.discountCodes)?[]:a,s=t.useMemberPoint,u=t.notSupportSubscriptionCheck,l=window.Shopline.locale,d=lp("userSelectLocale"),p={useRetry:!0,action:a3.SaveAbandonOrder,retryOptions:lQ},e.next=6,cC.post("/leproxy/api/trade/center/order/abandoned/save",{products:r,associateCart:i,discountCodes:c,orderFrom:"web",languageInfo:{marketLanguage:l,displayLanguage:d},useMemberPoint:s,notSupportSubscriptionCheck:u},p);case 6:if(null!==(n=(f=e.sent).data)&&void 0!==n&&n.success){e.next=9;break}throw f.data;case 9:return e.abrupt("return",f.data.data);case 10:case"end":return e.stop()}},e)})),function(e){return lG.apply(this,arguments)}),l1=(lz=iv(iP.mark(function e(t){var n,r,o,i;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.notSupportSubscriptionCheck,o={useRetry:!0,action:a3.SaveAbandonOrder,retryOptions:lQ},e.next=4,cC.post("/leproxy/api/trade/center/checkout/save/base-on-cart-cookie/return-data",{notSupportSubscriptionCheck:r},o);case 4:if(null!==(n=(i=e.sent).data)&&void 0!==n&&n.success){e.next=7;break}throw i.data;case 7:return e.abrupt("return",i.data.data);case 8:case"end":return e.stop()}},e)})),function(e){return lz.apply(this,arguments)}),l3=(lK=iv(iP.mark(function e(t){var n,r,o;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={useRetry:!0,action:a3.ExpressFirstLoad,retryOptions:lQ},t.expressCheckoutChannelInfo.methodCode===aW.GooglePay&&(r.useRetry=!1),e.next=4,cC.post("/leproxy/api/trade/center/express/checkout/first-load",t,r);case 4:if(null!==(n=(o=e.sent).data)&&void 0!==n&&n.success){e.next=7;break}throw o.data;case 7:return e.abrupt("return",o.data.data);case 8:case"end":return e.stop()}},e)})),function(e){return lK.apply(this,arguments)}),l2=(lJ=iv(iP.mark(function e(t){var n,r,o;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={useRetry:!0,action:a3.ExpressUpdateDetail,retryOptions:lQ},e.next=3,cC.post("/leproxy/api/trade/center/express/checkout/detail",t,r);case 3:if(null!==(n=(o=e.sent).data)&&void 0!==n&&n.success){e.next=6;break}throw o.data;case 6:return e.abrupt("return",o.data.data);case 7:case"end":return e.stop()}},e)})),function(e){return lJ.apply(this,arguments)}),l4=(lX=iv(iP.mark(function e(t){var n,r;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cC.post("/leproxy/api/trade/center/express/checkout/create",t);case 2:if(null!==(n=(r=e.sent).data)&&void 0!==n&&n.success){e.next=5;break}throw r.data;case 5:return e.abrupt("return",r.data.data);case 6:case"end":return e.stop()}},e)})),function(e){return lX.apply(this,arguments)});(dx=lZ||(lZ={})).DiscountCode="TCTD0122",dx.NoShippingOption="TC_000000_B0019",dx.IllegalAmount="TC_000000_B0046";var l5=["DISCOUNT_CODE_OR_GIFT_CARD_INVALID","DISCOUNT_CODE_INVALID","DISCOUNT_CODE_EXPIRED","DISCOUNT_CODE_USER_INVALID","DISCOUNT_CODE_USE_TIMES_LIMIT","DISCOUNT_CODE_NO_REACH","UN_MATCH_PAYMENT","UN_MATCH_LOGISTICS"],l6=["DISCOUNT_CODE_REPEAT"],l9=function(e){return(e||[]).map(function(e){return{spuId:e.productSeq,skuId:e.productSku,skuItemNo:e.itemNo,title:e.productName,variant:(e.productSkuAttrList||[]).join(","),price:e.finalPrice,quantity:e.productNum,category:e.customCategoryName}})},l8=function(e){var t,n,r,o=e.seq,i=e.amount,a=e.productInfos,c=(t=void 0===o?"":o,(n=JSON.parse(decodeURIComponent(lp("".concat(t,"_fb_data")))||"{}"))&&n.ed?n.ed:lf());null===(r=window.Shopline.Analytics)||void 0===r||r.track({name:"orderStart",payload:{eventId:"initiateCheckout".concat(c),value:i,list:l9(a)}})},l7=function(e){var t,n=e.eventId,r=e.amount,o=e.price,i=e.productInfos,a=e.channelCode;null===(t=window.Shopline.Analytics)||void 0===t||t.track({name:"orderAddPaymentInfo",payload:{eventId:n,value:r,paymentType:a,productPrice:o,list:l9(i)}})},de=function(e){var t,n=e.shipping_method,r=e.amount,o=e.productInfos;null===(t=window.Shopline.Analytics)||void 0===t||t.track({name:"orderCompleteStep",payload:{checkout_option:n,checkout_step:3,value:r,list:l9(o)},whitelistTransports:["GoogleAnalytics4"]})};function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach(function(t){iO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var dr=sU(),di=iC(function e(t,n){var r,o,i,a=this;ig(this,e),iO(this,"checkoutUrl",""),iO(this,"abandonedInfo",null),iO(this,"createOrderParams",{basicInfo:null,otherInfo:null,buyerInfo:null,marketInfo:null,priceInfo:null,productInfos:null,passThrough:""}),iO(this,"expressCheckoutChannelInfo",null),iO(this,"shippingMethodName",""),iO(this,"firstLoadRes",{status:aK.Await,promise:null}),iO(this,"getConfig",function(){var e=a.config,t=e.domId,n=e.paymentConfig,r=e.props,o=r.style,i=r.layout,c=r.expressOptimizationSwitch,s=a.extra,u=s.uniqueId,l=s.isSubscription,d=lI(n).map(function(e){var t=lE({channelCode:e.channelCode,methodCode:e.methodCode},{uniqueId:u,isSubscription:l});return dn(dn({},e),{},{currentDomId:t})});return l&&(d=d.filter(function(e){return e.methodCode===aW.Paypal})),a.logger.info("获取快捷支付按钮配置 payments",{data:{payments:d}}),{language:window.Shopline.locale,payments:d,props:{dynamic:n.isSystem,domId:t,styleOptions:{height:o.height,"border-radius":o["border-radius"],layout:i===u0.Checkout?"horizontal":"vertical"},timeout:{switch:!0},isSubscription:l,scriptParams:l?{"data-namespace":"subscriptionDynamicPaypal"}:void 0,expressOptimizationSwitch:c},loggerFn:function(){return a.logger.withOwner("")},beforeCreateOrder:a.beforeCreateOrder,onChannelModalSuccess:a.onChannelModalSuccess,onFormDataChange:a.onFormDataChange,createOrder:a.createOrder,onError:a.onError,onAllButtonsInitFail:a.onAllButtonsInitFail}}),iO(this,"updateCreateOrderParams",function(e){var t,n,r,o,i=(null===(t=a.createOrderParams.otherInfo)||void 0===t?void 0:t.clientLang)||(null===(n=e.otherInfo)||void 0===n||null===(r=n.checkoutLanguageInfo)||void 0===r?void 0:r.displayLanguage)||(null===(o=e.otherInfo)||void 0===o?void 0:o.clientLang);a.createOrderParams.basicInfo=e.basicInfo||null,a.createOrderParams.otherInfo=dn(dn({},e.otherInfo),{},{clientLang:i}),a.createOrderParams.buyerInfo=e.buyerInfo||null,a.createOrderParams.marketInfo=e.marketInfo||null,a.createOrderParams.passThrough=e.passThrough||"",e.priceInfo&&(a.createOrderParams.priceInfo=e.priceInfo),e.productInfos&&(a.createOrderParams.productInfos=e.productInfos)}),iO(this,"beforeCreateOrder",(r=iv(iP.mark(function e(t){var n;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(function(){var e=iv(iP.mark(function e(t){var n,r,o,i,c,s,u,l,d,p,f,h,y,m,v,g,b;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t||{}).channelCode,o=n.methodCode,i=n.paymentId,s=(c=a.config).saveAbandonedOrder,u=c.paymentConfig,l=c.props.toast,d={valid:!1},a.logger.info("beforeCreateOrder",{data:{channelCode:r,methodCode:o,paymentId:i}}),a.reportButtonClick(o),lL(uX.ButtonClick,{methodCode:o,buttonLocation:u.buttonLocation}),e.prev=6,a.firstLoadRes.status=aK.Pending,e.next=10,s(lj(o));case 10:if(f=(p=e.sent).canContinue,h=p.abandonedInfo,y=p.url,f&&h){e.next=17;break}return a.logger.info("save abandon order process terminated",{data:{abandonedInfo:h,url:y}}),e.abrupt("return",d);case 17:if(a.checkoutUrl=y||"",m={abandonedOrderInfo:h,returnUrl:y||""},r!==aV.SLpayments&&r!==aV.StripeOther||o!==aW.ApplePay&&o!==aW.GooglePay){e.next=40;break}return a.abandonedInfo=h,a.expressCheckoutChannelInfo={channelCode:r,methodCode:o,paymentId:i||"",storeWebsiteUrl:window.location.origin},v={abandonedOrderInfo:{seq:h.seq,checkoutToken:h.checkoutToken,abandonedOrderType:"SETTLE",orderFrom:"MAIN_SITE"},expressCheckoutChannelInfo:a.expressCheckoutChannelInfo,otherInfo:{buyScence:lV[u.buttonLocation]}},a.logger.info("快捷支付请求firstLoad接口",{data:dn({},v)}),e.next=27,l3(v);case 27:if(g=e.sent,a.logger.info("快捷支付firstLoad接口返回",{data:dn({},g)}),!g){e.next=38;break}if(!lT(g)){e.next=33;break}return a.logger.log("需要跳转"),e.abrupt("return",d);case 33:a.updateCreateOrderParams(g),(b=dn({},g)).payChannelData=lA(b.payChannelData,{expressCheckoutChannelInfo:a.expressCheckoutChannelInfo}),a.shippingMethodName=lD(b.payChannelData,{expressCheckoutChannelInfo:a.expressCheckoutChannelInfo})||"",m.paymentConfig=b;case 38:a.logger.info("快捷支付firstLoad接口返回",{data:dn({},g)}),a.firstLoadRes.status=aK.Done;case 40:return a.logger.info("beforeCreateOrder返回值",{data:dn({},m)}),e.abrupt("return",m);case 44:return e.prev=44,e.t0=e.catch(6),a.firstLoadRes.status=aK.Fail,window[window.__sl_console__?"__sl_console__":"console"].error("beforeCreateOrder error: ",e.t0),a.logger.error("beforeCreateOrder执行出错",{error:e.t0}),e.t0.code===lZ.NoShippingOption?l(dr("cart.error.noshipping")):l(dr("cart.error.default")),e.abrupt("return",d);case 51:case"end":return e.stop()}},e,null,[[6,44]])}));return function(t){return e.apply(this,arguments)}})()(t),a.firstLoadRes.promise=n,e.next=5,n;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})),iO(this,"onChannelModalSuccess",function(e){var t=a.config.paymentConfig.buttonLocation;if(lL(uX.ModalOpen,{methodCode:e.methodCode,buttonLocation:t}),e.methodCode!==aW.Paypal)try{var n,r=a.createOrderParams,o=r.priceInfo,i=r.productInfos,c=(null==o?void 0:o.originalSettleSumAmount)||(null==o?void 0:o.orderAmount),s=e.settleCurrency;l8({seq:null===(n=a.abandonedInfo)||void 0===n?void 0:n.seq,amount:c,productInfos:i}),la.reportConversionEvent(u5.InitiateCheckout,{currency:s,orderAmount:c,productInfos:i})}catch(e){a.logger.error("开始结账事件上报出错",{error:e})}}),iO(this,"onFormDataChange",(o=iv(iP.mark(function e(t,n){var r,o,i,c,s,u;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={code:l$.UpdateFail,message:dr("cart.error.renew")},a.logger.log("onFormDataChange",{data:{firstLoadRes:a.firstLoadRes}}),iO(r={},aK.Await,function(){}),iO(r,aK.Done,iv(iP.mark(function e(){return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))),iO(r,aK.Fail,function(){}),iO(r,aK.Pending,iv(iP.mark(function e(){return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.firstLoadRes.promise;case 2:case"end":return e.stop()}},e)}))),i=r[a.firstLoadRes.status],e.next=6,i();case 6:return c={abandonedOrderInfo:a.abandonedInfo,expressCheckoutChannelInfo:a.expressCheckoutChannelInfo,basicInfo:dn(dn({},a.createOrderParams.basicInfo),{},{action:n}),otherInfo:a.createOrderParams.otherInfo,buyerInfo:a.createOrderParams.buyerInfo,payChannelData:t,passThrough:a.createOrderParams.passThrough},a.logger.info("快捷支付请求弃单更新参数",{data:dn({},c)}),e.next=10,l2(c).catch(function(e){return a.logger.error("快捷支付弃单更新失败",{error:e}),e.code===lZ.NoShippingOption&&(o.message=dr("cart.error.noshipping")),e.code===lZ.DiscountCode&&l5.includes(e.msg)&&(o.message=dr("transaction.discount.code_error")),e.code===lZ.DiscountCode&&l6.includes(e.msg)&&(o.message=dr("cart.couponCode.existCode")),{error:o}});case 10:if(s=e.sent,a.logger.info("快捷支付弃单更新返回值",{data:dn({},s)}),a.isValidReturn(s)){e.next=14;break}return e.abrupt("return",s);case 14:if(!lT(s)){e.next=17;break}return a.logger.log("需要跳转"),e.abrupt("return",{error:{code:l$.UpdateFail,message:dr("cart.error.renew")}});case 17:if(a.updateCreateOrderParams(s),!a.expressCheckoutChannelInfo){e.next=22;break}return u=lA(s.payChannelData,{expressCheckoutChannelInfo:a.expressCheckoutChannelInfo}),a.shippingMethodName=lD(u,{expressCheckoutChannelInfo:a.expressCheckoutChannelInfo})||"",e.abrupt("return",u);case 22:return e.abrupt("return",s.payChannelData);case 23:case"end":return e.stop()}},e)})),function(e,t){return o.apply(this,arguments)})),iO(this,"createOrder",(i=iv(iP.mark(function e(t,n){var r,o,i,c,s,u,l,d,p,f,h,y,m,v,g,b,_,w,C,O,S,x,k,P,E,I,T,A,D,L,j;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.payChannelData,i=n.token,c="",window.__DF__&&"function"==typeof window.__DF__.getToken&&(c=window.__DF__.getToken()),u=(s=lN()).sid,l=s.createAt,d="",window.HdSdk&&window.HdSdk.shopTracker&&"function"==typeof window.HdSdk.shopTracker.getDataId&&(d=window.HdSdk.shopTracker.getDataId()),p="addPaymentInfo".concat(lf()),f={abandonedOrderInfo:a.abandonedInfo,expressCheckoutChannelInfo:a.expressCheckoutChannelInfo,basicInfo:a.createOrderParams.basicInfo,otherInfo:dn(dn({},a.createOrderParams.otherInfo),{},{dfpToken:c}),buyerInfo:a.createOrderParams.buyerInfo,marketInfo:a.createOrderParams.marketInfo,passThrough:a.createOrderParams.passThrough,payChannelData:o,instrumentOption:i,sessionInfo:{sessionId:u,sessionCreateTime:l},dataReportReq:{eventName:"AddPaymentInfo",dataId:d,eventTime:Date.now(),eventId:p,currency:t.settleCurrency,payAmount:null===(r=a.createOrderParams.priceInfo)||void 0===r?void 0:r.originalSettleSumAmount},clientInfo:uj()},h={error:{code:l$.CreateFail,message:dr("cart.error.order")}},a.logger.info("快捷支付请求下单",{data:dn({},f)}),e.next=12,l4(f).catch(function(e){if(a.logger.error("快捷支付下单失败",{error:e}),e.code===lZ.IllegalAmount){var t=window.Shopline.storeId,n="".concat(window.location.protocol,"//").concat(window.location.host,"/").concat(t,"/checkouts/").concat(f.abandonedOrderInfo.checkoutToken);a.logger.info("下单金额不一致，跳转结算页",{data:{url:n}}),window.location.href=n}return h});case 12:if(y=e.sent,a.logger.info("快捷支付请求下单返回值",{data:dn({},y)}),a.isValidReturn(y)){e.next=16;break}return e.abrupt("return",y);case 16:if(!lT(y)){e.next=19;break}return a.logger.info("需要跳转"),e.abrupt("return",h);case 19:try{b=(g=a.createOrderParams).basicInfo,_=g.otherInfo,w=g.priceInfo,C=g.productInfos,de({amount:null==w?void 0:w.originalSettleSumAmount,productInfos:C,shipping_method:a.shippingMethodName}),l7({eventId:p,amount:null==w?void 0:w.originalSettleSumAmount,price:null==w?void 0:w.productSumAmount,productInfos:C,channelCode:null===(m=a.expressCheckoutChannelInfo)||void 0===m?void 0:m.channelCode}),O=(null==w?void 0:w.originalSettleSumAmount)||(null==w?void 0:w.orderAmount),S=t.settleCurrency||"",x={payment_method:null===(v=a.expressCheckoutChannelInfo)||void 0===v?void 0:v.channelCode,shipping_method:a.shippingMethodName,coupon_code:null==b?void 0:b.discountCode,currency:S,orderAmount:O,productInfos:y.productInfos||[],basicInfo:b,otherInfo:_},la.reportConversionEvent(u5.AddCustomerInfo,x),la.reportConversionEvent(u5.AddShippingInfo,x),la.reportAddPaymentInfo(x)}catch(e){a.logger.error("完成订单事件上报出错",{error:e})}return e.prev=20,E=y.orderMark,I=y.orderSeq,T=y.transactionId,A=y.paySeq,D=y.nextAction,L={orderMark:E,orderSeq:I,transactionId:T,paySeq:A,abOrderSeq:null===(k=a.abandonedInfo)||void 0===k?void 0:k.seq,abOrderMark:null===(P=a.abandonedInfo)||void 0===P?void 0:P.mark},sessionStorage.setItem("processing_data",JSON.stringify(L)),j=JSON.parse(D),e.abrupt("return",{nextAction:j});case 28:return e.prev=28,e.t0=e.catch(20),a.logger.error("快捷支付下单，解析数据失败",{error:e.t0,data:y}),e.abrupt("return",h);case 32:case"end":return e.stop()}},e,null,[[20,28]])})),function(e,t){return i.apply(this,arguments)})),iO(this,"onError",function(e,t,n){var r=a.config.props.toast;if("createExpected"===t){var o=lB.exclude(a.checkoutUrl,["spb"]);return a.logger.warn("下单异常，跳到结算页",{data:{url:o}}),void(window.location.href=o)}a.logger.error("快捷支付流程出错",{error:e,data:{type:t,extData:n}}),t===aq.PullUpChannel&&r(dr("cart.error.default"))}),iO(this,"onAllButtonsInitFail",function(){u9(a.config.paymentConfig)&&(a.logger.info("所有快捷支付按钮渲染失败，渲染兜底buy now按钮"),a.extra.onAllButtonsInitFail())}),iO(this,"isValidReturn",function(e){return!(!e||e.error)}),iO(this,"reportButtonClick",function(e){var t=a.config.paymentConfig.buttonLocation,n=uZ[e]||"";n?la.reportPayButtonClick(n,t):window[window.__sl_console__?"__sl_console__":"console"].warn("快捷支付按钮点击上报，未知的按钮支付方式: ".concat(e))}),this.config=t,this.extra=n,this.logger=this.config.props.logger.pipeOwner("ExpressConfig")});function da(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function dc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ds(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dc(Object(n),!0).forEach(function(t){iO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var du=sU(),dl=function(e){uF(r,uG);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=uM(r);return e=t?Reflect.construct(n,arguments,uM(this).constructor):n.apply(this,arguments),uR(this,e)});function r(e){ig(this,r),iO(uN(i=n.call(this,e)),"expressInstance",null),iO(uN(i),"subscriptionExpressInstance",null),iO(uN(i),"isVisible",!1),iO(uN(i),"isSubscription",!1),iO(uN(i),"isAllButtonsInitFail",!1),iO(uN(i),"render",iv(iP.mark(function e(){var t,n,r,o;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.logger.info("render"),i.needRender){e.next=3;break}return e.abrupt("return",[]);case 3:if(n=(t=i.config.props).isPreview,r=t.isSubscription,o=t.isVisible,i.isVisible=o,i.isSubscription=!!r,i.insertButtonContainer(i.configList),n&&(i.logger.info("预览模式，渲染按钮遮罩层，阻断下单"),i.addMaskListener()),!r){e.next=14;break}return i.logger.info("订阅模式，渲染订阅和普通按钮"),e.next=12,Promise.all([i.renderSceneButton(!0),i.renderSceneButton(!1)]);case 12:e.next=17;break;case 14:return i.logger.info("普通模式，渲染普通按钮"),e.next=17,i.renderSceneButton(!1);case 17:if(!i.isAllButtonsInitFail){e.next=19;break}return e.abrupt("return",Promise.reject(Error("all button init failed.")));case 19:return e.abrupt("return",i.getRenderedList());case 20:case"end":return e.stop()}},e)}))),iO(uN(i),"rerender",(t=iv(iP.mark(function e(t){var n,r,o,a,c,s,u;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:var l,d;if(i.logger.info("rerender"),n=i.configList,r=lI(t),l=n,d=r,l.map(function(e){return"".concat(e.channelCode,"_").concat(e.methodCode)}).sort().join(",")!==d.map(function(e){return"".concat(e.channelCode,"_").concat(e.methodCode)}).sort().join(",")||i.renderedList.length!==r.length){e.next=6;break}return i.logger.info("same paymentConfig, no need to rerender"),e.abrupt("return");case 6:if(o=function(e){return lE({channelCode:e.channelCode,methodCode:e.methodCode},{uniqueId:i.uniqueId,isSubscription:i.isSubscription})},(a=r.filter(function(e){if(n.find(function(t){return t.channelCode===e.channelCode&&t.methodCode===e.methodCode}))return!1;var t,r=o(e);return null===(t=i.container)||void 0===t||!t.querySelector("#".concat(r))})).length&&i.insertButtonContainer(a),c=r.map(function(e){var t=o(e);return ds(ds({},e),{},{currentDomId:t})}),!i.isSubscription){e.next=15;break}return e.next=13,null===(s=i.subscriptionExpressInstance)||void 0===s?void 0:s.rerender(c.filter(function(e){return e.methodCode===aW.Paypal}));case 13:e.next=17;break;case 15:return e.next=17,null===(u=i.expressInstance)||void 0===u?void 0:u.rerender(c);case 17:i.setVisible(!0),i.configList=r;case 19:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})),iO(uN(i),"setDisabled",function(e){var t,n;i.logger.info("setDisabled",{data:e}),i.needRender&&(null===(t=i.expressInstance)||void 0===t||t.setDisabled(e),null===(n=i.subscriptionExpressInstance)||void 0===n||n.setDisabled(e))}),iO(uN(i),"setVisible",function(e){var t,n;if(i.logger.info("setVisible",{data:e}),i.needRender){i.isVisible=e,i.setPaypalBgVisible(!1);var r,o=u9(i.config.paymentConfig),a=null===(t=i.container)||void 0===t?void 0:t.querySelectorAll(".".concat(u$.COMMON_ITEM_EXPRESS,":not(.").concat(u$.BUTTON_SUBSCRIPTION,")"));o&&(a=i.getDynamicButtonElements()),i.isSubscription&&(i.logger.info("订阅模式：只控制paypal按钮"),a=null===(r=i.container)||void 0===r?void 0:r.querySelectorAll(".".concat(u$.COMMON_ITEM_EXPRESS,".").concat(u$.BUTTON_SUBSCRIPTION))),null===(n=a)||void 0===n||n.forEach(function(t){e?null==t||t.classList.remove(u$.BUTTON_HIDE):null==t||t.classList.add(u$.BUTTON_HIDE)}),i.setPaypalBgVisible(!0)}}),iO(uN(i),"setSubscription",function(e){var t,n,r;if(i.logger.info("setSubscription",{data:e}),i.needRender&&(i.isSubscription=e,i.setPaypalBgVisible(!1),i.isVisible)){var o,a=u9(i.config.paymentConfig),c=null===(t=i.container)||void 0===t?void 0:t.querySelectorAll(".".concat(u$.COMMON_ITEM_EXPRESS,".").concat(u$.BUTTON_SUBSCRIPTION)),s=null===(n=i.container)||void 0===n?void 0:n.querySelectorAll(".".concat(u$.COMMON_ITEM_EXPRESS,":not(.").concat(u$.BUTTON_SUBSCRIPTION,")"));if(a&&(s=i.getDynamicButtonElements()),e)return null==c||c.forEach(function(e){null==e||e.classList.remove(u$.BUTTON_HIDE)}),null===(o=s)||void 0===o||o.forEach(function(e){null==e||e.classList.add(u$.BUTTON_HIDE)}),void(i.subscriptionExpressInstance||i.renderSceneButton(!0));null===(r=s)||void 0===r||r.forEach(function(e){null==e||e.classList.remove(u$.BUTTON_HIDE)}),null==c||c.forEach(function(e){null==e||e.classList.add(u$.BUTTON_HIDE)}),i.expressInstance||i.renderSceneButton(!1),i.setPaypalBgVisible(!0)}}),iO(uN(i),"insertButtonContainer",function(e){var t,n=i.config,r=n.paymentConfig,o=n.props,a=o.isPreview,c=o.style,s=o.isSubscription,u=function(e,t){return'\n      <div\n        class="'.concat(u$.COMMON_ITEM," ").concat(u$.COMMON_ITEM_EXPRESS," pay-button-").concat(e.methodCode," ").concat(t?u$.BUTTON_SUBSCRIPTION:""," ").concat(s!==t?u$.BUTTON_HIDE:""," ").concat(u$.BUTTON_HIDE,'"\n        id="').concat(lE(e,{uniqueId:i.uniqueId,isSubscription:t}),'"\n      >').concat(a?'<div class="'.concat(u$.BUTTON_MASK,'"></div>'):"").concat(e.methodCode===aW.Paypal&&0===c["border-radius"]?'<div class="'.concat(u$.PAY_PAL_BG_BEFORE,'"></div><div class="').concat(u$.PAY_PAL_BG_AFTER,'"></div>'):"","</div>\n    ")},l=u6(r).includes(uq.PAY_PAL),d=e.map(function(e){return u(e)}).join("\n");l&&(d+=u({channelCode:aV.Paypal,methodCode:aW.Paypal},!0)),null===(t=i.container)||void 0===t||t.insertAdjacentHTML("beforeend",d)}),iO(uN(i),"getExpressPaymentConfig",function(e){return new di(i.config,{uniqueId:i.uniqueId,onAllButtonsInitFail:function(){return i.isAllButtonsInitFail=!0},isSubscription:e}).getConfig()}),iO(uN(i),"addMaskListener",function(){var e,t=i.config.props.toast,n=null===(e=i.container)||void 0===e?void 0:e.querySelectorAll(".".concat(u$.COMMON_ITEM_EXPRESS));null==n||n.forEach(function(e){e.addEventListener("click",function(){t(du("products.product_details.link_preview_does_not_support"))})})}),iO(uN(i),"renderSceneButton",(o=iv(iP.mark(function e(t){var n,r;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.logger.info("renderSceneButton",{data:t}),n=i.getExpressPaymentConfig(t),i.logger.info("expressPaymentConfig",{data:ds({},n)}),r=new lS(n),e.next=6,r.render();case 6:t?i.subscriptionExpressInstance=r:i.expressInstance=r;case 7:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)})),iO(uN(i),"getDynamicButtonElements",function(){i.logger.info("动态结算模式：只控制一种渠道的按钮 paypal/gp/ap");var e,t=void 0,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return da(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return da(e,void 0)}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(u1);try{for(n.s();!(e=n.n()).done;){var r,o,a=e.value,c=u$[a],s=null===(o=i.container)||void 0===o?void 0:o.querySelector(".".concat(c,":not(.").concat(u$.BUTTON_SUBSCRIPTION,")"));if(s&&!s.className.includes("smart-payment-hide")){i.logger.info("控制支付方式: ".concat(a)),t=null===(r=i.container)||void 0===r?void 0:r.querySelectorAll(".".concat(c,":not(.").concat(u$.BUTTON_SUBSCRIPTION,")"));break}}}catch(e){n.e(e)}finally{n.f()}return t}),iO(uN(i),"setPaypalBgVisible",function(e){var t,n=null===(t=i.container)||void 0===t?void 0:t.querySelectorAll(".".concat(u$.PAY_PAL_BG_BEFORE,", .").concat(u$.PAY_PAL_BG_AFTER));e?setTimeout(function(){null==n||n.forEach(function(e){e.style.opacity="1"})},200):null==n||n.forEach(function(e){e.style.opacity="0"})});var t,o,i,a=e.buttonTypes;return i.logger=i.config.props.logger.pipeOwner("ExpressButton"),i.needRender=!a||a.includes(uY.Express),i.configList=lI(e.paymentConfig),i.uniqueId=ld(),i}return iC(r,[{key:"getRenderedList",value:function(){if(!this.isVisible||!this.needRender)return[];var e=this.expressInstance;return this.isSubscription&&(e=this.subscriptionExpressInstance),e&&e.renderList.filter(function(e){return e.instance.initSuccess&&e.instance.isVisible}).map(function(e){return e.instance.name})||[]}}]),r}(),dd=function(e){var t,n=e.buttonTypeDataList.find(function(e){return e.buttonType===uY.Fast});if(!n)return"";var r=n.buttonNameDataList.find(function(e){return e.buttonName===uq.SHOP_BY_FAST_CHECKOUT});return r&&(null===(t=r.buttonConfigData.configData)||void 0===t?void 0:t.checkoutUrl)||""},dp=sU(),df='<svg width="68" height="18" viewBox="0 0 68 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M14.3554 0.772522L14.3313 0.488281H11.2835L11.2668 0.781076C11.2627 0.852932 11.2607 0.926892 11.2607 1.0029V14.5641H14.3657V8.86666C14.4287 8.35695 14.6465 7.95264 15.0213 7.63644L15.0234 7.63464L15.0255 7.6328C15.4044 7.30127 15.8744 7.13003 16.4563 7.13003C16.8955 7.13003 17.2325 7.22397 17.4873 7.39011L17.4938 7.39433L17.5005 7.39823C17.7749 7.55832 17.9804 7.78526 18.1202 8.08814C18.2633 8.39812 18.34 8.77287 18.34 9.22071V14.5641H21.4243V9.24141C21.4243 8.23355 21.2225 7.33936 20.8076 6.56883C20.3967 5.80576 19.8351 5.20518 19.1236 4.7748C18.4085 4.3284 17.5992 4.10787 16.7047 4.10787C16.0374 4.10787 15.4469 4.25649 14.9475 4.56832C14.7377 4.69697 14.5435 4.83297 14.3657 4.97654V1.0236C14.3657 0.937544 14.3623 0.853814 14.3554 0.772522Z" fill="#052855"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M25.4418 4.03229C26.1167 3.73912 26.8347 3.5932 27.5927 3.5932C28.6108 3.5932 29.542 3.84101 30.3789 4.33978C31.2108 4.82179 31.8762 5.48035 32.3719 6.31141C32.8722 7.15015 33.1195 8.09606 33.1195 9.14074C33.1195 9.96627 32.9673 10.7276 32.6578 11.4202L32.6573 11.4213L32.6568 11.4225C32.3507 12.0929 31.9342 12.678 31.4076 13.1752L31.406 13.1768L31.4043 13.1784C30.8803 13.6587 30.2898 14.0306 29.6342 14.293C28.9905 14.5562 28.3231 14.6883 27.6341 14.6883C26.9319 14.6883 26.245 14.5564 25.5752 14.2943L25.5713 14.2928L25.5675 14.2912C24.9128 14.0148 24.3169 13.6293 23.7809 13.1367L23.7793 13.1353L23.7777 13.1338C23.2524 12.6376 22.8298 12.0543 22.5102 11.3861L22.509 11.3836L22.5079 11.3811C22.198 10.7023 22.0452 9.96097 22.0452 9.16144C22.0452 8.3899 22.191 7.66441 22.4849 6.98836C22.7762 6.31833 23.1777 5.72684 23.6886 5.21593C24.1991 4.70539 24.784 4.31025 25.4418 4.03229ZM27.572 6.65676C27.1143 6.65676 26.7078 6.76736 26.3449 6.98511L26.3416 6.9871L26.3382 6.989C25.9745 7.19508 25.6826 7.48553 25.4609 7.86695C25.2559 8.22928 25.1501 8.64431 25.1501 9.12004C25.1501 9.6505 25.2694 10.0955 25.4965 10.4669C25.7309 10.8364 26.0298 11.1228 26.395 11.3309C26.7783 11.5277 27.1763 11.6247 27.5927 11.6247C27.995 11.6247 28.3791 11.5279 28.7491 11.3309C29.1274 11.1231 29.4326 10.8307 29.667 10.4482L29.6689 10.4451L29.6709 10.4421C29.9102 10.0712 30.0353 9.62772 30.0353 9.09934C30.0353 8.61079 29.9231 8.19116 29.7069 7.83081L29.7049 7.82749L29.703 7.82414C29.4961 7.45903 29.2123 7.17519 28.8472 6.9683C28.4857 6.76348 28.0637 6.65676 27.572 6.65676Z" fill="#052855"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M33.7459 8.26328H33.7403V17.2702H36.7832V13.5593C36.8987 13.618 37.0167 13.6728 37.137 13.7236C37.8118 14.0168 38.5298 14.1627 39.2878 14.1627C40.3059 14.1627 41.2371 13.9149 42.074 13.4161C42.9059 12.9341 43.5713 12.2756 44.0671 11.4445C44.5674 10.6058 44.8147 9.65985 44.8147 8.61517C44.8147 7.78964 44.6624 7.02827 44.353 6.33573L44.3525 6.33459L44.352 6.33345C44.0459 5.66302 43.6293 5.07796 43.1028 4.58068L43.1011 4.57909L43.0994 4.57753C42.5755 4.09726 41.985 3.7253 41.3294 3.46289C40.6856 3.19971 40.0182 3.06764 39.3292 3.06764C38.627 3.06764 37.9401 3.19949 37.2703 3.46158L37.2665 3.46308L37.2627 3.46468C36.6079 3.74115 36.0121 4.12657 35.476 4.61919L35.4744 4.62062L35.4729 4.62208C34.9475 5.11827 34.525 5.70164 34.2054 6.36983L34.2042 6.37233L34.203 6.37485C33.9412 6.94852 33.7912 7.56669 33.7512 8.22799C33.7504 8.23174 33.7498 8.2349 33.7494 8.23729L33.7488 8.24116L33.7487 8.24134C33.7475 8.249 33.7467 8.25541 33.7463 8.25929L33.7459 8.26328ZM37.1916 7.28898C37.426 6.91948 37.725 6.63309 38.0902 6.42503C38.4735 6.22821 38.8715 6.1312 39.2878 6.1312C39.6901 6.1312 40.0743 6.22802 40.4442 6.42501C40.8225 6.63281 41.1277 6.9252 41.3622 7.30774L41.3641 7.3108L41.366 7.31382C41.6053 7.68474 41.7304 8.12819 41.7304 8.65657C41.7304 9.14512 41.6183 9.56475 41.4021 9.92511L41.4001 9.92842L41.3982 9.93178C41.1913 10.2969 40.9075 10.5807 40.5424 10.7876C40.1809 10.9924 39.7588 11.0991 39.2672 11.0991C38.8095 11.0991 38.4029 10.9886 38.04 10.7708L38.0367 10.7688L38.0333 10.7669C37.6697 10.5608 37.3778 10.2704 37.156 9.88896C36.951 9.52663 36.8453 9.1116 36.8453 8.63587C36.8453 8.10542 36.9645 7.66038 37.1916 7.28898Z" fill="#052855"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M48.4788 0.731349H45.436V8.98816C45.436 9.63584 45.6305 10.289 45.8987 10.8766L45.8999 10.8791L45.9011 10.8816C46.2206 11.5498 46.6432 12.1332 47.1686 12.6294L47.1701 12.6308L47.1717 12.6322C47.7078 13.1249 48.3036 13.5103 48.9584 13.7868L48.9622 13.7884L48.966 13.7899C49.6358 14.0519 50.3227 14.1838 51.0249 14.1838C51.7139 14.1838 52.3813 14.0517 53.0251 13.7885C53.6807 13.5261 54.2712 13.1542 54.7951 12.6739L54.7968 12.6723L54.7985 12.6708C55.325 12.1735 55.7416 11.5884 56.0476 10.918L56.0481 10.9168L56.0487 10.9157C56.3581 10.2232 56.5104 9.46179 56.5104 8.63626C56.5104 7.59159 56.263 6.64568 55.7627 5.80694C55.267 4.97588 54.6016 4.31733 53.7697 3.83532C52.9328 3.33654 52.0016 3.08873 50.9835 3.08873C50.2255 3.08873 49.5075 3.23465 48.8327 3.52781C48.7123 3.57866 48.5944 3.63345 48.4788 3.69218V0.731349ZM49.7357 6.48064C50.0986 6.26289 50.5051 6.15229 50.9628 6.15229C51.4545 6.15229 51.8766 6.259 52.238 6.46383C52.6031 6.67072 52.887 6.95456 53.0939 7.31966L53.0958 7.32302L53.0977 7.32633C53.314 7.68669 53.4261 8.10632 53.4261 8.59487C53.4261 9.12325 53.301 9.56669 53.0617 9.93762L53.0597 9.94064L53.0579 9.9437C52.8234 10.3262 52.5182 10.6186 52.1399 10.8264C51.7699 11.0234 51.3858 11.1202 50.9835 11.1202C50.5672 11.1202 50.1691 11.0232 49.7858 10.8264C49.4207 10.6184 49.1217 10.332 48.8873 9.96246C48.6602 9.59106 48.541 9.14602 48.541 8.61557C48.541 8.13984 48.6467 7.72481 48.8517 7.36248C49.0735 6.98105 49.3653 6.69061 49.729 6.48453L49.7324 6.48263L49.7357 6.48064Z" fill="#052855"/>\n<path d="M56.2303 15.1868L56.3274 15.0898L54.6696 13.432L54.5726 13.529C54.1048 13.9968 53.5494 14.3679 52.9382 14.621C52.327 14.8742 51.6719 15.0045 51.0104 15.0045C50.3488 15.0045 49.6937 14.8742 49.0825 14.621C48.4713 14.3679 47.916 13.9968 47.4482 13.529L47.3511 13.432L45.6934 15.0898L45.7904 15.1868C46.4759 15.8723 47.2897 16.4161 48.1853 16.7871C49.081 17.158 50.0409 17.349 51.0104 17.349C51.9798 17.349 52.9398 17.158 53.8354 16.7871C54.731 16.4161 55.5448 15.8723 56.2303 15.1868Z" fill="#052855"/>\n<path d="M56.2101 3.96665H59.2163L61.9071 9.98946L64.6136 3.96665H67.6248L61.5697 17.2792H58.5541L60.3986 13.3416L56.2101 3.96665Z" fill="#052855"/>\n<path d="M3.03671 1.04181C3.69296 0.702008 4.43508 0.53557 5.2564 0.53557C5.774 0.53557 6.24259 0.585665 6.65971 0.689121C7.07665 0.777637 7.4409 0.899338 7.74776 1.05804C8.04854 1.19592 8.30366 1.34427 8.50743 1.5054C8.69941 1.63749 8.85568 1.76297 8.96249 1.88132C9.10051 2.0124 9.23762 2.16318 9.37706 2.34031C9.81301 2.89408 10.0908 3.60793 10.1819 4.40262L10.217 4.7084H7.39709L7.34038 4.50901C7.33619 4.49427 7.33183 4.47997 7.32732 4.4661L7.32448 4.45736L7.32223 4.44846C7.20991 4.00354 6.92075 3.65909 6.49182 3.45493L6.48403 3.45123L6.47649 3.44704C6.3431 3.37294 6.19646 3.31545 6.03549 3.27533L6.03385 3.27492L6.03221 3.27449C5.82951 3.22131 5.56668 3.19185 5.23802 3.19185C5.0208 3.19185 4.80967 3.22427 4.60364 3.28913L4.59908 3.29057L4.59447 3.29184C4.40825 3.34342 4.25463 3.42385 4.12843 3.53031L4.12355 3.53443L4.11848 3.53832C3.99314 3.63444 3.89079 3.75449 3.81102 3.90155C3.74657 4.04195 3.71129 4.20689 3.71129 4.40165C3.71129 4.66354 3.7798 4.859 3.90033 5.00816C4.0521 5.16745 4.26069 5.31014 4.53538 5.43116C4.83087 5.5488 5.16385 5.66147 5.5349 5.76887C5.91659 5.87935 6.30434 5.99594 6.69815 6.11863L6.70062 6.1194L6.70307 6.12022C7.11768 6.25801 7.5258 6.42078 7.9274 6.60846C8.34285 6.80262 8.71492 7.04943 9.04217 7.34916C9.3803 7.64647 9.64687 8.02121 9.84443 8.46721C10.0484 8.91539 10.1442 9.45101 10.1442 10.0639C10.1442 10.7711 10.0086 11.402 9.72789 11.9485C9.45148 12.4865 9.07411 12.9296 8.59649 13.2736C8.1287 13.6104 7.60941 13.8562 7.04052 14.0112C6.47758 14.1768 5.90713 14.2598 5.32992 14.2598C4.75639 14.2598 4.22726 14.19 3.74478 14.047L3.74378 14.0467L3.74279 14.0464C3.56682 13.9927 3.39763 13.9333 3.23535 13.868L3.22469 13.8911L2.97547 13.7761C2.40551 13.513 1.74507 13.1129 1.22848 12.4567C0.691295 11.7743 0.386719 10.9129 0.386719 9.87693V9.60244H3.20241V9.87693C3.20241 9.92922 3.20403 9.97851 3.20705 10.025L3.20844 10.0463L3.2065 10.0677C3.20371 10.0982 3.2023 10.1291 3.2023 10.1603C3.2023 10.7928 3.82094 11.4104 4.78746 11.5557L4.79397 11.5567L4.80041 11.558C4.95298 11.5884 5.10489 11.6036 5.2564 11.6036C5.70989 11.6036 6.09378 11.5457 6.41303 11.4366C6.727 11.3172 6.9561 11.15 7.11522 10.9417L7.11767 10.9385L7.12022 10.9354C7.28063 10.7378 7.37128 10.4733 7.37128 10.1189C7.37128 9.85231 7.28969 9.65672 7.13951 9.50699L7.1338 9.5013L7.12843 9.49528C6.96362 9.31042 6.73485 9.14812 6.43178 9.01383L6.42796 9.01214L6.4242 9.01033C6.10892 8.85898 5.74944 8.72353 5.34458 8.60481L5.33989 8.60343L5.33525 8.60189C4.92876 8.4668 4.51638 8.31957 4.09813 8.16021C3.7962 8.05964 3.49484 7.94056 3.19407 7.80312L3.18985 7.80119L3.18569 7.79912C2.87931 7.64639 2.59127 7.47416 2.32184 7.28228L2.31924 7.28044L2.31669 7.27853C2.05266 7.0811 1.81549 6.85107 1.60531 6.58913L1.60062 6.58329L1.59626 6.5772C1.39496 6.29623 1.23605 5.97801 1.11796 5.6248C0.996191 5.26061 0.938373 4.84524 0.938373 4.38333C0.938373 3.64028 1.12203 2.97647 1.49689 2.40199C1.86828 1.82062 2.38431 1.36742 3.03671 1.04181Z" fill="#052855"/>\n</svg>\n',dh='<button class="btn '.concat(u$.SHOP_BY_FAST_CHECKOUT,"-item ").concat(u$.SHOP_BY_FAST_CHECKOUT,'-securey">\n  <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M10.4851 3.19066C8.89661 3.19066 7.60892 4.47835 7.60892 6.06679V6.98466H13.3612V6.06679C13.3612 4.47835 12.0735 3.19066 10.4851 3.19066ZM6.01787 6.06679V6.98466H5.5895C4.23763 6.98466 3.14172 8.08056 3.14172 9.43243V15.5519C3.14172 16.9037 4.23763 17.9996 5.5895 17.9996H15.3806C16.7324 17.9996 17.8284 16.9037 17.8284 15.5519V9.43243C17.8284 8.08056 16.7324 6.98466 15.3806 6.98466H14.9522V6.06679C14.9522 3.59964 12.9522 1.59961 10.4851 1.59961C8.0179 1.59961 6.01787 3.59964 6.01787 6.06679ZM5.5895 8.57571H15.3806C15.8537 8.57571 16.2373 8.95927 16.2373 9.43243V15.5519C16.2373 16.025 15.8537 16.4086 15.3806 16.4086H5.5895C5.11634 16.4086 4.73278 16.025 4.73278 15.5519V9.43243C4.73278 8.95927 5.11634 8.57571 5.5895 8.57571ZM11.2194 12.7853C11.6584 12.5313 11.9538 12.0567 11.9538 11.513C11.9538 10.7019 11.2962 10.0444 10.4851 10.0444C9.67399 10.0444 9.01645 10.7019 9.01645 11.513C9.01645 12.0566 9.31176 12.5312 9.75071 12.7852V14.4504C9.75071 14.8559 10.0795 15.1847 10.485 15.1847C10.8906 15.1847 11.2194 14.8559 11.2194 14.4504V12.7853Z" fill="#052855"/>\n  </svg>\n  <span>').concat(dp("unvisiable.shopby.button.show"),"</span>\n</button>"),dy=function(e){uF(r,uG);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=uM(r);return e=t?Reflect.construct(n,arguments,uM(this).constructor):n.apply(this,arguments),uR(this,e)});function r(e){ig(this,r),iO(uN(o=n.call(this,e)),"isCheckout",!1),iO(uN(o),"render",iv(iP.mark(function e(){var t;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.logger.info("render"),o.needRender){e.next=3;break}return e.abrupt("return",[]);case 3:return t=o.insertDom(),o.addListener(),o.isCheckout||o.createAnimateInterval(),o.renderedList=t,e.abrupt("return",t);case 8:case"end":return e.stop()}},e)}))),iO(uN(o),"insertDom",function(){var e,t,n=u6(o.config.paymentConfig).includes(uq.SHOP_BY_FAST_CHECKOUT);if(o.logger.info("insertDom hasShopby",{data:n}),!n)return[];var r='<div class="'.concat(u$.COMMON_ITEM," ").concat(u$.BUTTON_HIDE," ").concat(u$.SHOP_BY_FAST_CHECKOUT,'">\n      <div class="').concat(u$.SHOP_BY_FAST_CHECKOUT,'-group">\n        ').concat(dh,'\n        <button class="btn ').concat(u$.SHOP_BY_FAST_CHECKOUT,'-item shopby-text-btn">\n          ').concat(df,'\n          <span>Checkout</span>\n        </button>\n      </div>\n      <span class="loading-icon" />\n    </div>');return o.isCheckout&&(r='<div class="'.concat(u$.COMMON_ITEM," ").concat(u$.BUTTON_HIDE," ").concat(u$.SHOP_BY_FAST_CHECKOUT,' checkout">\n        <div class="').concat(u$.SHOP_BY_FAST_CHECKOUT,'-group">\n          <button class="btn ').concat(u$.SHOP_BY_FAST_CHECKOUT,'-item shopby-text-btn">\n            ').concat(df,'\n          </button>\n        </div>\n        <span class="loading-icon" />\n      </div>')),null===(e=o.container)||void 0===e||e.insertAdjacentHTML("beforeend",r),o.buttonElement=(null===(t=o.container)||void 0===t?void 0:t.querySelector(".".concat(u$.SHOP_BY_FAST_CHECKOUT)))||null,[uq.SHOP_BY_FAST_CHECKOUT]}),iO(uN(o),"addListener",function(){var e=uN(o).buttonElement;e&&(e.removeEventListener("click",o.handleClick),e.addEventListener("click",o.handleClick))}),iO(uN(o),"handleClick",(t=iv(iP.mark(function e(t){var n,r,i,a,c,s,u,l,d,p,f,h,y,m,v,g,b,_,w,C,O;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c=(a=o.config).paymentConfig.buttonLocation,s=a.saveAbandonedOrder,l=(u=a.props).isPreview,d=u.toast,la.reportPayButtonClick(uq.SHOP_BY_FAST_CHECKOUT,c),!l){e.next=7;break}return o.logger.info("预览模式，按钮点击触发toast提示"),d(dp("products.product_details.link_preview_does_not_support")),e.abrupt("return");case 7:if(!o.isDisabled&&!o.isLoading){e.next=10;break}return o.logger.info("按钮不可点击",{data:{isDisabled:o.isDisabled,isLoading:o.isLoading}}),e.abrupt("return");case 10:return o.setLoading(!0),e.next=13,s(uq.SHOP_BY_FAST_CHECKOUT);case 13:if(f=(p=e.sent).canContinue,h=p.abandonedInfo,f){e.next=19;break}return o.setLoading(!1),e.abrupt("return");case 19:if(y=dd(o.config.paymentConfig),m=lp("localization")||(null===(n=window.__PRELOAD_STATE__)||void 0===n||null===(r=n.request)||void 0===r||null===(i=r.cookie)||void 0===i?void 0:i.localization),o.isCheckout&&(m=null===(v=window.__PRELOAD_STATE__)||void 0===v||null===(g=v.tradeCheckout)||void 0===g||null===(b=g.marketInfo)||void 0===b?void 0:b.marketRegionCountryCode),h&&y&&m){e.next=25;break}return o.logger.error("跳转fc页面失败，跳转参数异常",{data:{abandonedInfo:h,domain:y,country:m},error:Error()}),e.abrupt("return");case 25:_=window.Shopline.storeId,w="".concat(y,"/checkouts/").concat(_,"/").concat(h.checkoutToken),C="?mark=".concat(h.mark,"&clientLang=").concat(window.Shopline.locale,"&country=").concat(m,"&domain=").concat(window.origin),O="".concat(w).concat(C),o.logger.info("跳转fc页面",{data:O}),window.location.href=O;case 31:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}));var t,o,i=e.buttonTypes;return o.logger=o.config.props.logger.pipeOwner("FastButton"),o.needRender=!i||i.includes(uY.Fast),o.isCheckout=o.config.paymentConfig.buttonLocation===uH.Checkout,o}return iC(r,[{key:"isButtonInViewPort",value:function(){if(!this.buttonElement)return!1;var e=window.innerWidth||document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight,n=this.buttonElement.getBoundingClientRect(),r=n.top,o=n.right,i=n.bottom,a=n.left;return r>=0&&a>=0&&o<=e&&i<=t}},{key:"createAnimateInterval",value:function(){this.timer=setInterval(this.addAnimateClass.bind(this),1e3)}},{key:"addAnimateClass",value:function(){var e,t=null===(e=this.buttonElement)||void 0===e?void 0:e.querySelector(".".concat(u$.SHOP_BY_FAST_CHECKOUT,"-group"));this.isButtonInViewPort()&&t&&(t.classList.add("shopby-button-slide"),this.timer&&window.clearInterval(this.timer))}}]),r}(),dm=iC(function e(t){var n=this;ig(this,e),iO(this,"needRender",!0),iO(this,"show",function(){var e;if(n.needRender){var t=n.config.props,r=t.layout,o=t.extraBuyNowDomId,i=u6(n.config.paymentConfig),a=u9(n.config.paymentConfig),c=i.includes(uq.SHOP_BY_FAST_CHECKOUT),s=i.includes(uq.BUY_NOW),u=1;a?u=c?2:1:c&&s?u=2:(c||s)&&(u=1),n.logger.info("渲染骨架屏",{data:u});var l='<div class="'.concat(u$.COMMON_ITEM," ").concat(u$.BUTTON_SKELETON,'"></div>');if(r===u0.BuyNowRow&&s&&o){var d=document.getElementById(o);null==d||d.insertAdjacentHTML("beforeend",l),u--}null===(e=n.container)||void 0===e||e.insertAdjacentHTML("beforeend",Array(u).fill('<div class="'.concat(u$.COMMON_ITEM," ").concat(u$.BUTTON_SKELETON,'"></div>')).join(""))}}),iO(this,"hide",function(){var e;if(n.needRender){var t=n.config.props,r=t.layout,o=t.extraBuyNowDomId,i=null===(e=n.container)||void 0===e?void 0:e.querySelectorAll(".".concat(u$.BUTTON_SKELETON));if(null==i||i.forEach(function(e){e.remove()}),r===u0.BuyNowRow&&o){var a,c=document.getElementById(o);null==c||null===(a=c.querySelector(".".concat(u$.BUTTON_SKELETON)))||void 0===a||a.remove()}}}),this.config=t,this.logger=this.config.props.logger;var r=this.config,o=r.domId,i=r.paymentConfig.buttonLocation;this.container=document.getElementById(o),this.needRender=i!==uH.Cart}),dv="pay-button-common-style-sheet-id",dg=function(e){var t,n,r,o,i=e.domId,a=e.props.layout,c=document.getElementById(i);c&&(c.dataset.payButtonLayout=a),function(){if(!document.getElementById(dv)){var e=document.createElement("style");e.setAttribute("id",dv),e.innerHTML="\n  /* ----- 骨架屏 ----- */\n  @keyframes skeleton {\n    0% {\n      background-position: 100% 50%;\n    }\n    100% {\n      background-position: 0 50%;\n    }\n  }\n  .".concat(u$.BUTTON_SKELETON," {\n    background: linear-gradient(\n      90deg,\n      hsla(0, 0%, 74.5%, 0.2) 25%,\n      hsla(0, 0%, 50.6%, 0.24) 37%,\n      hsla(0, 0%, 74.5%, 0.2) 63%\n    );\n    background-size: 400% 100%;\n    animation: skeleton 2s linear infinite;\n  }\n\n  /* ----- 按钮loading ----- */\n  @keyframes rotate {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(359deg);\n    }\n  }\n  .").concat(u$.BUTTON_LOADING," .loading-icon {\n    display: inline-block;\n    position: absolute;\n    border: 2px solid white;\n    top: calc(50% - 8px);\n    left: calc(50% - 8px);\n    width: 16px;\n    height: 16px;\n    border-radius: 16px;\n    clip-path: polygon(0% 0%, 100% 0%, 100% 70%, 0% 70%);\n    animation: rotate 1s linear infinite;\n  }\n  \n  /* ----- 按钮遮罩 ----- */\n  .").concat(u$.BUTTON_MASK," {\n    cursor: pointer;\n    position: absolute;\n    left: 0;\n    top: 0;\n    height: 100%;\n    width: 100%;\n    z-index: 101;\n  }\n\n  /* ----- 按钮公共 ----- */\n  .").concat(u$.BUTTON_HIDE," {\n    display: none !important;\n  }\n  .").concat(u$.COMMON_ITEM," {\n    position: relative;\n    overflow: hidden;\n  }\n\n  /* ----- buy now ----- */\n  .").concat(u$.BUY_NOW," {\n    line-height: 1;\n  }\n  .").concat(u$.BUY_NOW,".").concat(u$.BUTTON_LOADING," .").concat(u$.BUY_NOW,"-text{\n      opacity: 0;\n  }\n\n  /* ----- more options ----- */\n  .").concat(u$.MORE_OPTIONS," {\n    color: #000000;\n    cursor: pointer;\n    font-family: Helvetica Neue;\n    font-size: 14px;\n    font-weight: 500;\n    margin-top: 15px;\n    text-align: center;\n    text-decoration: underline;\n  }\n\n  /* ----- paypal ----- */\n  .").concat(u$.PAY_PAL," {\n    line-height: 0;\n  }\n  .").concat(u$.PAY_PAL," .").concat(u$.PAY_PAL_BG_BEFORE,",\n  .").concat(u$.PAY_PAL," .").concat(u$.PAY_PAL_BG_AFTER," {\n    position: absolute;\n    left: 0;\n    width: 100%;\n    height: calc(50% - 6px);\n    background-color: #ffc439;\n    opacity: 0;\n  }\n  .").concat(u$.PAY_PAL," .").concat(u$.PAY_PAL_BG_BEFORE," {\n    top: 0;\n  }\n  .").concat(u$.PAY_PAL," .").concat(u$.PAY_PAL_BG_AFTER," {\n    bottom: 0;\n  }\n\n  /* ----- shop by ----- */\n  @keyframes shopby-button-slide {\n    0% {\n      transform: translateX(50%);\n    }\n    25% {\n      transform: translateX(0%);\n    }\n    80% {\n      transform: translateX(0%);\n    }\n    100% {\n      transform: translateX(-50%);\n    }\n  }\n  .shopby-button-slide {\n    animation: shopby-button-slide 1.5s;\n    animation-fill-mode: forwards;\n  }\n  .").concat(u$.SHOP_BY_FAST_CHECKOUT," {\n    background-color: #60F5B2;\n  }\n  .").concat(u$.SHOP_BY_FAST_CHECKOUT,".").concat(u$.BUTTON_DISABLED," {\n    cursor: not-allowed;\n    opacity: .3;\n  }\n  .").concat(u$.SHOP_BY_FAST_CHECKOUT,".").concat(u$.BUTTON_DISABLED," button {\n    cursor: not-allowed;\n  }\n  .").concat(u$.SHOP_BY_FAST_CHECKOUT," .").concat(u$.SHOP_BY_FAST_CHECKOUT,"-group {\n    height: 100%;\n    width: 200%;\n    display: flex;\n    transform: translateX(50%);\n  }\n  .").concat(u$.SHOP_BY_FAST_CHECKOUT,".checkout .").concat(u$.SHOP_BY_FAST_CHECKOUT,"-group {\n    width: 100%;\n    height: 100%;\n    transform: none;\n  }\n  .").concat(u$.SHOP_BY_FAST_CHECKOUT," .").concat(u$.SHOP_BY_FAST_CHECKOUT,"-group .").concat(u$.SHOP_BY_FAST_CHECKOUT,"-item {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex: 1;\n    font-family: PingFang SC;\n    background-color: #60f5b2;\n    border: none;\n    cursor: pointer;\n    color: #052855;\n    margin: 0;\n  }\n  .").concat(u$.SHOP_BY_FAST_CHECKOUT," .").concat(u$.SHOP_BY_FAST_CHECKOUT,"-group .").concat(u$.SHOP_BY_FAST_CHECKOUT,"-item:hover {\n    background-color: #60e1b2;\n  }\n  .").concat(u$.SHOP_BY_FAST_CHECKOUT," .").concat(u$.SHOP_BY_FAST_CHECKOUT,"-group .").concat(u$.SHOP_BY_FAST_CHECKOUT,"-item:active, .").concat(u$.SHOP_BY_FAST_CHECKOUT," .").concat(u$.SHOP_BY_FAST_CHECKOUT,"-group .").concat(u$.SHOP_BY_FAST_CHECKOUT,"-item:focus {\n    background-color: #60ffb2;\n  }\n  .").concat(u$.SHOP_BY_FAST_CHECKOUT," .").concat(u$.SHOP_BY_FAST_CHECKOUT,"-group .").concat(u$.SHOP_BY_FAST_CHECKOUT,"-item svg {\n    margin-right: 6px;\n  }\n  .").concat(u$.SHOP_BY_FAST_CHECKOUT," .").concat(u$.SHOP_BY_FAST_CHECKOUT,"-group .").concat(u$.SHOP_BY_FAST_CHECKOUT,"-item span {\n    font-style: normal;\n    font-weight: 600;\n    line-height: normal;\n    letter-spacing: -0.02em;\n    font-size: 16px;\n  }\n  .").concat(u$.SHOP_BY_FAST_CHECKOUT," .").concat(u$.SHOP_BY_FAST_CHECKOUT,"-group .").concat(u$.SHOP_BY_FAST_CHECKOUT,"-securey {\n    background: #3dee9f;\n  }\n  .").concat(u$.SHOP_BY_FAST_CHECKOUT," .").concat(u$.SHOP_BY_FAST_CHECKOUT,"-group ").concat(u$.SHOP_BY_FAST_CHECKOUT,"-securey span {\n    font-weight: 600;\n  }\n  .").concat(u$.SHOP_BY_FAST_CHECKOUT,".").concat(u$.BUTTON_LOADING," {\n    opacity: 0.3;\n  }\n  .").concat(u$.SHOP_BY_FAST_CHECKOUT,".").concat(u$.BUTTON_LOADING," .loading-icon {\n    border-color: #052855;\n  }\n  .").concat(u$.SHOP_BY_FAST_CHECKOUT,".").concat(u$.BUTTON_LOADING," > div {\n    visibility: hidden;\n  }\n\n  /* ----- 布局 ----- */\n  .").concat(u$.BUY_NOW," {\n    order: 1;\n  }\n  .").concat(u$.PAY_PAL," {\n    order: 2;\n  }\n  .").concat(u$.GOOGLE_PAY," {\n    order: 3;\n  }\n  .").concat(u$.APPLE_PAY," {\n    order: 4;\n  }\n  .").concat(u$.SHOP_BY_FAST_CHECKOUT," {\n    order: 5;\n  }\n  .").concat(u$.MORE_OPTIONS,' {\n    order: 6;\n  }\n  [data-pay-button-layout="').concat(u0.Column,'"],\n  [data-pay-button-layout="').concat(u0.BuyNowRow,'"] {\n    display: flex;\n    flex-direction: column;\n    margin: -5px 0;\n  }\n  [data-pay-button-layout="').concat(u0.Column,'"] .').concat(u$.COMMON_ITEM,',\n  [data-pay-button-layout="').concat(u0.BuyNowRow,'"] .').concat(u$.COMMON_ITEM,' {\n    margin: 5px 0;\n    flex-shrink: 0;\n    flex-grow: 0;\n  }\n  [data-pay-button-layout="').concat(u0.Row,'"] {\n    display: flex;\n  }\n  [data-pay-button-layout="').concat(u0.Row,'"] > .').concat(u$.COMMON_ITEM,' {\n    margin-top: 0;\n    margin-right: 12px;\n  }\n  [data-pay-button-layout="').concat(u0.Checkout,'"] {\n    display: flex;\n    flex-wrap: wrap;\n    margin: -7px -6px;\n  }\n  [data-pay-button-layout="').concat(u0.Checkout,'"] .').concat(u$.COMMON_ITEM,' {\n    margin: 7px 6px;\n  }\n  [data-pay-button-layout="').concat(u0.Checkout,'"] .').concat(u$.COMMON_ITEM,":not(.").concat(u$.PAY_PAL,") {\n    flex-basis: 1px;\n    flex-grow: 1;\n    padding: 0;\n  }\n  "),document.body.appendChild(e)}}(),t=e.domId,n=e.props.extraBuyNowDomId,r=document.getElementById(t),(o=document.createElement("style")).innerHTML="\n  /* ----- 按钮公共 ----- */\n  #".concat(t," .").concat(u$.COMMON_ITEM," ").concat(n?",#".concat(n," .").concat(u$.COMMON_ITEM):""," {\n    height: ").concat(e.props.style.height,"px;\n    width: ").concat(e.props.style.width?"".concat(e.props.style.width,"px"):"100%",";\n    border-radius: ").concat(e.props.style["border-radius"],"px;\n  }\n\n  /* ----- paypal ----- */\n  #").concat(t," .").concat(u$.PAY_PAL," {\n    min-height: ").concat(e.props.style.height,"px;\n    height: auto;\n    border-radius: 0px;\n    z-index: 1;\n  }\n  "),null==r||r.appendChild(o)},db=function(){function e(t){ig(this,e),iO(this,"renderedButtonCount",0),this.config=t,this.container=this.getContainer(),this.logger=t.props.logger.pipeOwner("Collapse")}return iC(e,[{key:"getContainer",value:function(){if(!this.container){var e=document.getElementById(this.config.domId);if(!e)throw Error("Please check if the DOM node in the configuration is valid.");this.container=e}return this.container}},{key:"init",value:function(e){var t=this.config,n=t.displayButtonCount,r=t.props,o=r.layout,i=r.extraBuyNowDomId;if(!u9(t.paymentConfig)){this.renderedButtonCount=e;var a=o===u0.BuyNowRow&&i;if(a&&(this.renderedButtonCount=e-1),n)return this.renderedButtonCount>(a?1:2)&&this.renderedButtonCount>n?(this.addContainerAnimation(n),void this.createCollapseButton(n)):void 0}}},{key:"update",value:function(e){e!==this.renderedButtonCount&&(this.logger.info("update",{data:{renderedButtonCount:e}}),this.remove(),this.computedStyleCache=null,this.init(e))}},{key:"remove",value:function(){this.config.displayButtonCount&&(this.container.classList.add("remove"),this.removeCollapseButton())}},{key:"addContainerAnimation",value:function(e){var t=this.config.domId,n=this.computeStyle(e).collapseHeight;this.container.classList.remove("remove");var r=ly("\n      #".concat(t," {\n        height: ").concat(n,"px;\n        overflow: hidden;\n        transition: height 0.3s ease;\n      }\n\n      #").concat(t,".remove {\n        height: auto;\n      }\n    ")),o=r.style,i=r.cssInsertBefore;this.container.contains(o)||i(this.container)}},{key:"createCollapseButton",value:function(e){if(!this.collapseButton){var t=sU(),n=this.container,r=n.parentNode;r||this.logger.log("Cannot find the parent node, affecting the mounting of the collapse button",{data:{container:n}});var o=this.computeStyle(e),i=o.buttonHeight,a=o.containerHeight,c=o.collapseHeight;o.buttonMargin;var s=document.createElement("button");s.id="more-payment-".concat(ld(),"-button"),s.className=u$.BUTTON_COLLAPSE,s.innerHTML="".concat(t("sdk.button.show")).concat('<svg id="arrowIcon" class="flip-vertical" width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.899486 3.44971L4.94974 7.49996L9 3.44971" stroke="#29252C" stroke-width="1.5" stroke-linecap="round"/></svg>');var u=ly("\n      #".concat(s.id," {\n        height: ").concat(i,"px;\n        min-height: ").concat(i,"px;\n        width: 100%;\n        text-align: center;\n        background: transparent;\n        line-height: ").concat(i,"px;\n        margin-bottom: 0;\n        border: none;\n        font-weight: 500;\n        font-size: 14px;\n        color: #29252C;\n      }\n\n      #").concat(s.id,":active {\n        -webkit-tap-highlight-color: transparent;\n        -webkit-tap-highlight-color: rgba(0,0,0,0);\n      }\n\n      #").concat(s.id," svg {\n        margin-left: 10px;\n      }\n\n      #").concat(s.id," svg.flip-vertical {\n        transform: scaleY(-1);\n      }\n    ")),l=u.style,d=u.cssInsertBefore;null==r||r.insertBefore(s,n.nextSibling),d(s);var p=null==r?void 0:r.querySelector("#arrowIcon");s.addEventListener("click",function(){if(1>=Math.abs(Number.parseInt(n.style.height)-a))return n.style.height="".concat(c,"px"),void(null==p||p.classList.add("flip-vertical"));n.style.height="".concat(a,"px"),null==p||p.classList.remove("flip-vertical")}),l.id="collapse-button-style",this.collapseButton=s}}},{key:"removeCollapseButton",value:function(){var e,t;null===(e=this.collapseButton)||void 0===e||e.remove(),this.collapseButton=null,null===(t=this.container.querySelector("#collapse-button-style"))||void 0===t||t.remove()}},{key:"computeStyle",value:function(e){if(this.computedStyleCache)return this.logger.info("computeStyle cache",{data:{style:this.computedStyleCache}}),this.computedStyleCache;var t=this.config.props.style,n=this.container.querySelectorAll(".".concat(u$.COMMON_ITEM)),r=n[n.length-1];r||this.logger.warn("Unable to calculate container height accurately, will return offsetHeight.",{data:{container:this.container}});var o=(null==r?void 0:r.offsetHeight)||t.height,i=r?2*parseInt(window.getComputedStyle(r).marginTop):this.container.offsetHeight,a=(o+i)*this.renderedButtonCount,c={buttonHeight:o,containerHeight:a,buttonMargin:i,collapseHeight:a-(o+i)*(this.renderedButtonCount-e)};return this.computedStyleCache=c,this.logger.info("computeStyle",{data:{style:c}}),c}}]),e}(),d_=function(){var e;function t(){ig(this,t),iO(this,"queue",[]),iO(this,"running",!1)}return iC(t,[{key:"enqueue",value:function(e,t){this.queue.push(e),this.running||this.run(t)}},{key:"run",value:(e=iv(iP.mark(function e(t){var n;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.running=!0;case 1:if(!(this.queue.length>0)){e.next=9;break}if(n=this.queue.shift(),e.t0=n,!e.t0){e.next=7;break}return e.next=7,n();case 7:e.next=1;break;case 9:null==t||t(),this.running=!1;case 11:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})}]),t}();function dw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dw(Object(n),!0).forEach(function(t){iO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function dO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dO(Object(n),!0).forEach(function(t){iO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}iC(function e(t){var n,r,o,i,a,c=this;ig(this,e),iO(this,"renderPromise",null),iO(this,"rerenderAsyncQueue",new d_),iO(this,"isVisible",!0),iO(this,"render",iv(iP.mark(function e(){var t,n;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c.logger.info("支付按钮渲染"),t=c.config.domId,c.container){e.next=5;break}return c.logger.error("pay button can not find container",{data:c.container}),e.abrupt("return");case 5:if("true"!==c.container.dataset.rendered){e.next=8;break}return c.logger.warn("同一容器重复渲染支付按钮",{data:t}),e.abrupt("return");case 8:return c.container.dataset.rendered="true",n=function(){var e=iv(iP.mark(function e(){var t;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sH(window.Shopline.locale||"en");case 2:return dg(c.config),c.isVisible&&c.skeleton.show(),t=!0,e.next=7,c.expressButton.render().catch(function(e){c.logger.error("快捷支付按钮渲染失败",{error:e}),t=!1});case 7:return e.next=9,c.fastButton.render().catch(function(e){c.logger.error("快速结账按钮渲染失败",{error:e})});case 9:if(t){e.next=14;break}return e.next=12,c.normalButton.render(uq.BUY_NOW).catch(function(e){c.logger.error("普通支付按钮渲染失败",{error:e})});case 12:e.next=16;break;case 14:return e.next=16,c.normalButton.render().catch(function(e){c.logger.error("普通支付按钮渲染失败",{error:e})});case 16:c.collapse.init(c.getRenderedButtons().length),c.injectRenderedButtonsToContainer(),c.skeleton.hide(),c.isVisible&&c.setVisible(!0),c.logger.info("隐藏骨架屏，显示支付按钮");case 21:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),c.renderPromise=n(),e.next=13,c.renderPromise;case 13:case"end":return e.stop()}},e)}))),iO(this,"rerender",(n=iv(iP.mark(function e(t,n){var r;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.logger.info("rerender",{data:{paymentConfig:t}}),e.next=3,c.renderPromise;case 3:r=function(){var e=iv(iP.mark(function e(){return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.expressButton.rerender(t);case 2:c.injectRenderedButtonsToContainer();case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),c.rerenderAsyncQueue.enqueue(r,null==n?void 0:n.afterRerender);case 5:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)})),iO(this,"setDisabled",(r=iv(iP.mark(function e(t,n){return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.logger.info("setDisabled",{data:{value:t,options:n}}),e.next=3,c.renderPromise;case 3:c.normalButton.setDisabled(t,n),c.expressButton.setDisabled(t),c.fastButton.setDisabled(t,n);case 6:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)})),iO(this,"setVisible",(o=iv(iP.mark(function e(t,n){return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.logger.info("setVisible",{data:{value:t,options:n}}),c.isVisible=t,e.next=4,c.renderPromise;case 4:c.expressButton.setVisible(t),c.normalButton.setVisible(t),c.fastButton.setVisible(t),t&&c.reportButtonView(),c.collapse.update(c.getRenderedButtons().length),c.injectRenderedButtonsToContainer();case 10:case"end":return e.stop()}},e)})),function(e,t){return o.apply(this,arguments)})),iO(this,"setSubscription",(i=iv(iP.mark(function e(t){return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.logger.info("setSubscription",{data:{value:t}}),e.next=3,c.renderPromise;case 3:c.expressButton.setSubscription(t),c.normalButton.setSubscription(t),c.collapse.update(c.getRenderedButtons().length),c.injectRenderedButtonsToContainer();case 7:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})),iO(this,"customButtons",(a=iv(iP.mark(function e(t){var n,r,o,i,a,s,u,l,d;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.logger.log("自定义支付按钮customButtons",{data:dC({},t)}),e.next=3,c.renderPromise;case 3:n=0,r=Object.entries(t);case 4:if(!(n<r.length)){e.next=15;break}if(a=(i=iy(r[n],2))[0],u=(s=i[1]).className,l=null===(o=c.container)||void 0===o?void 0:o.querySelector(".".concat(u$[a])),![uq.BUY_NOW,uq.MORE_OPTIONS].includes(a)){e.next=11;break}return c.normalButton.customButton(a,s),e.abrupt("continue",12);case 11:u&&l&&(d=l.classList).add.apply(d,ih(u.split(" ")));case 12:n++,e.next=4;break;case 15:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)})),iO(this,"getButtonElement",function(e){var t,n=u$[e];return null===(t=c.container)||void 0===t?void 0:t.querySelectorAll(".".concat(n))}),iO(this,"preProcessConfig",function(e){var t,n=e.props.style,r=uV.height;"number"==typeof(null==n?void 0:n.height)&&(r=n.height<40?40:n.height>55?55:n.height);var o="number"==typeof(null==n?void 0:n.width)?n.width:uV.width,i="number"==typeof(null==n?void 0:n["border-radius"])?n["border-radius"]:uV["border-radius"];return dC(dC({},e),{},{props:dC(dC({},e.props),{},{isVisible:!1!==e.props.isVisible,layout:null!==(t=e.props.layout)&&void 0!==t?t:u0.Column,logger:e.props.logger.pipeOwner("@sl/pay-button"),style:{width:o,height:r,"border-radius":i}})})}),iO(this,"reportedButtonViewList",[]),iO(this,"reportButtonView",function(){var e,t=c.config.paymentConfig.buttonLocation,n=null===(e=c.container)||void 0===e?void 0:e.querySelectorAll(".".concat(u$.COMMON_ITEM,", .").concat(u$.MORE_OPTIONS));null==n||n.forEach(function(e){var n=e.className.includes(u$.BUY_NOW)?uq.BUY_NOW:e.className.includes(u$.MORE_OPTIONS)?uq.MORE_OPTIONS:e.className.includes(u$.PAY_PAL)?uq.PAY_PAL:e.className.includes(u$.GOOGLE_PAY)?uq.GOOGLE_PAY:e.className.includes(u$.APPLE_PAY)?uq.APPLE_PAY:e.className.includes(u$.SHOP_BY_FAST_CHECKOUT)?uq.SHOP_BY_FAST_CHECKOUT:void 0;lh(e)||!n||c.reportedButtonViewList.includes(n)||(c.reportedButtonViewList.push(n),la.reportPayButtonView(n,t))})});var s=this.preProcessConfig(t),u=s.domId,l=s.props.isVisible;this.config=s,this.container=document.getElementById(u),this.logger=s.props.logger.pipeOwner("PayButton"),this.logger.info("支付按钮实例化参数",{data:dC({},t)}),this.isVisible=l,this.skeleton=new dm(s),this.normalButton=new lg(s),this.expressButton=new dl(s),this.fastButton=new dy(s),this.collapse=new db(s)},[{key:"getRenderedButtons",value:function(){var e=[].concat(ih(this.expressButton.getRenderedList()),ih(this.normalButton.getRenderedList()),ih(this.fastButton.getRenderedList()));return this.config.paymentConfig.buttonLocation===uH.Cart&&e.push(uq.CHECKOUT),e}},{key:"injectRenderedButtonsToContainer",value:function(){var e;null===(e=this.container)||void 0===e||e.setAttribute("data-inject-rendered-buttons",this.getRenderedButtons().join(","))}}]);var dx,dk,dP,dE,dI={skipNull:!0,skipEmptyString:!0},dT={SignIn:(dk="/user/signIn",window.Shopline&&window.Shopline.redirectTo&&window.Shopline.redirectTo(dk)||dk),Checkout:"/trade/checkout",Checkouts:"/checkouts"},dA=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.query,r=t.fragmentIdentifier,o=t.fullQuery,i=lB.parseUrl(window.location.href,dS(dS({},dI),{},{parseFragmentIdentifier:!0})),a=void 0===o||o?dS(dS({},i.query||{}),n||{}):dS({},n),c=lB.stringifyUrl({url:e,query:a,fragmentIdentifier:r||i.fragmentIdentifier},dI),s="".concat(window.location.protocol,"//").concat(window.location.host).concat(c);return dS(dS({originUrl:e},i),{},{query:a,url:c,wholeUrl:s})};(s=dP||(dP={})).AMOUNT_EXCEEDS_LIMIT="TCTDEXCEEDED_MAX_AMOUNT_LIMIT",s.ABANDONED_RISK_CONTROL="TRD_123768_B1409",(u=dE||(dE={})).PRODUCT_VERIFY="product_verify",u.SAVE_ORDER="save_order";var dD=function(){var e;return window.Shopline.themeTypeVersion>=2.1?window.__tradeSettleConfig__:null===(e=window.__PRELOAD_STATE__)||void 0===e?void 0:e.tradeSettleConfig};function dL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dL(Object(n),!0).forEach(function(t){iO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dL(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var dN=sU(),dB=function(e,t){var n=t.logger,r=t.query,o=t.associateCart,i=dD(),a=(null==i?void 0:i.loginType)||"",c=!!lp("osudb_uid"),s="ONLY_LOGIN"===a,u=!c&&s;null==n||n.info("checkout/save 登录状态",{data:{isLogin:c,needLogin:s,redirectToSignIn:u}});var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.query,r=t.associateCart,o=t.abandonedOrderMark,i="".concat(window.location.protocol,"//").concat(window.location.host),a=e.storeId,c=e.checkoutToken,s=e.seq;return dA(c?"".concat(i,"/").concat(a).concat(dT.Checkouts,"/").concat(c):"".concat(i).concat(dT.Checkout,"/").concat(s),{query:dS(dS({buyScence:r?"cart":"detail"},void 0===n?{}:n),{},{mark:void 0===o?"":o}),fullQuery:!1}).url}({storeId:window.Shopline.storeId,checkoutToken:e.checkoutToken,seq:e.seq},{query:dj(dj({},r),{},{spb:u?null:null==r?void 0:r.spb}),associateCart:o});if(u){var d="".concat(window.location.protocol,"//").concat(window.location.host),p=dA("".concat(d).concat(dT.SignIn),{query:{redirectUrl:l},fullQuery:!1}).url;return null==n||n.info("checkout/save 需要登录",{data:{url:p,abandonedInfo:e,needLogin:!0}}),{url:p,abandonedInfo:e,needLogin:!0}}return null==n||n.info("checkout/save 正常返回",{data:{url:l,abandonedInfo:e,needLogin:!1}}),{url:l,abandonedInfo:e,needLogin:!1}},dF=function(e,t){var n=t.logger,r=t.toast,o=e||{},i=o.code,a=o.statusCode,c=o.message,s=null!=i?i:a;switch(null==n||n.error("[成单请求报错]".concat(void 0!==s?"[code: ".concat(s):"").concat(c?"[msg: ".concat(c,"]"):""),{error:e,data:{extra:t,from:"STANDARD_BUTTON"}}),i){case dP.AMOUNT_EXCEEDS_LIMIT:r(dN("cart.checkout.max_amount_limit"));break;case dP.ABANDONED_RISK_CONTROL:r(dN("general.abandon.Order.risk"));break;default:r(dN("cart.error.order"))}return Promise.resolve({errorType:dE.SAVE_ORDER})};iv(iP.mark(function e(t){var n,r,o,i,a,c,s,u,l,d;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.products,o=void 0!==(r=t.associateCart)&&r,i=t.discountCodes,a=t.useMemberPoint,t.query,t.toast,c=t.logger,u=void 0!==(s=t.notSupportSubscriptionCheck)&&s,e.prev=1,l=[],"function"!=typeof n){e.next=9;break}return e.next=6,n();case 6:l=e.sent,e.next=10;break;case 9:l=n;case 10:if(l){e.next=13;break}return null==c||c.log("业务方传入商品非法",{data:{products:l,getProducts:n}}),e.abrupt("return",Promise.resolve({errorType:dE.PRODUCT_VERIFY}));case 13:return null==c||c.info("checkout/save 保存弃单",{data:{products:l,associateCart:o,discountCodes:i}}),e.next=16,l0({products:l,associateCart:o,discountCodes:i,useMemberPoint:a,notSupportSubscriptionCheck:u});case 16:return d=e.sent,null==c||c.info("checkout/save 保存弃单返回值",{data:d}),e.abrupt("return",dB(d,t));case 21:return e.prev=21,e.t0=e.catch(1),e.abrupt("return",dF(e.t0,t));case 24:case"end":return e.stop()}},e,null,[[1,21]])})),iv(iP.mark(function e(t){var n,r,o,i;return iP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.logger,o=void 0!==(r=t.notSupportSubscriptionCheck)&&r,e.next=4,l1({notSupportSubscriptionCheck:o});case 4:return i=e.sent,null==n||n.info("cart save abandoned order response",{data:dj({},i)}),e.abrupt("return",dB(i,t));case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",dF(e.t0,t));case 12:case"end":return e.stop()}},e,null,[[0,9]])}));let dR="loading",dM=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=e.loadingColor||"black";return({[dR]:`
      <div class="mp-toast mp-toast--loading mp-toast--loading-style2 mp-toast__hidden ${e.fullscreen&&"mp-toast__fullscreen"} ${e.className||""}">
        <div class="mp-loading mp-loading--circular mp-toast__loading">
          <span class="mp-loading__spinner mp-loading__spinner--circular">
            <svg class="mp-loading__circular" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M18.3333 9.99999C18.3333 14.6024 14.6024 18.3333 10 18.3333C5.39762 18.3333 1.66666 14.6024 1.66666 9.99999C1.66666 5.39762 5.39762 1.66666 10 1.66666" stroke="${n}" stroke-width="2.5" stroke-linecap="round"/>
            </svg>
          </span>
        </div>
        <div class="mp-toast__content mp-toast__text">${e.content}</div>
      </div>
    `,showSuccess:`
      <div class="mp-toast mp-toast--loading mp-toast--success-container mp-toast--loading-style2 ${e.className||""}">
        <div class="mp-loading mp-loading--circular mp-toast__loading">
          <div class="mp-loading__success-box">
            <svg class="arrow" width="20" height="20" viewBox="0 0 20 20">
              <circle cx="10" cy="10" r="8.75" fill="none" stroke="${n}" stroke-width="2.5" class="circle"></circle>
              <polyline points="4.5,10 9,14 14.5,6.5" fill="none" stroke="${n}" stroke-width="2.5" class="hookmark" stroke-linecap="round" stroke-linejoin="round"
              ></polyline>
            </svg>
          </div>
        </div>
      </div>
    `,default:`
      <div class="comment-toast mp-toast mp-toast__hidden ${e.fullscreen&&"mp-toast__fullscreen"} ${e.className||""}">
        <div class="mp-toast__content mp-toast__inner">${e.content}</div>
      </div>
    `})[t]},dU="body",dH={duration:1500,content:"",target:dU},dY="mp-toast__hidden";class dq{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options={...dH,fullscreen:!e.target||e.target===dU,...e},this.$toast=null,this.$target=null,this.timer=null,this.instance=null,this.render()}static init(e){return this.getSingleton(e)}static loading(e){return this.getSingleton(e,dR)}static getSingleton(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,{instance:n}=this;return n||(n=new dq(e),this.instance=n),n.type!==t&&(n.type=t,n.$toast&&n.$toast.remove(),n.render()),n.open(e.content||"",e.duration),n}render(){let e=this.type||this.options.type,t=$(dM(this.options,e)),n=t.attr("class");this.$target=$(this.options.target);let{$target:r}=this;"static"===r.css("position")&&r.css("position","relative"),r.append(t),this.$toast=e===dR?r.find(`[class="${n}"]`):t}open(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,{options:n,$target:r}=this;"static"===r.css("position")&&r.css("position","relative"),this.timer&&(clearTimeout(this.timer),this.timer=null);let{$toast:o}=this;o.find(".mp-toast__content").html(e||this.options.content||""),o.removeClass(dY);let i="number"==typeof t?t:n.duration;0!==i&&(this.timer=setTimeout(this.close.bind(this),i))}close(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.$toast.addClass(dY),"function"==typeof this.options.onClose&&this.options.onClose(),this.$target.css("position","")}showSuccessAni(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,{$target:n}=this;this.close();let r=n.find(".pdp_button_text");r.addClass("showSuccessAni");let o=dM(e,"showSuccess");n.append(o);let i=n.find(".mp-toast--success-container"),a=n.find(".hookmark");if(a.length>0){let o=function(){let e,t=document.createElement("fakeelement"),n={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in n)if(void 0!==t.style[e])return console.log("anim..."),n[e]}();a.one(o,function(o){t&&"function"==typeof t&&setTimeout(()=>{i.remove(),r.removeClass("showSuccessAni"),t(o,n)},e.delay||0)})}}}dq.type=null;let d$={InitFail:"initFail",UpdateFail:"updateFail",NoShippingOption:"noShippingOption",InvalidDiscountCode:"invalidDiscountCode",DiscountCodeExists:"discountCodeExists",CreateFail:"createFail",CreateTimeout:"createTimeout"},dV={themes:{[d$.InitFail]:"cart.error.default",[d$.UpdateFail]:"cart.error.renew",[d$.NoShippingOption]:"cart.error.noshipping",[d$.InvalidDiscountCode]:"transaction.discount.code_error",[d$.DiscountCodeExists]:"cart.couponCode.existCode",[d$.CreateFail]:"cart.error.order",[d$.CreateTimeout]:"cart.error.order.overtime"},checkout:{[d$.InitFail]:"checkout&system.error.default",[d$.UpdateFail]:"checkout&system.error.renew",[d$.NoShippingOption]:"checkout&system.error.noshipping",[d$.InvalidDiscountCode]:"checkout&system.discount_code.error",[d$.DiscountCodeExists]:"checkout&system.discount_code.already_exist",[d$.CreateFail]:"checkout&system.error.order",[d$.CreateTimeout]:"checkout&system.error.order.overtime"}};r0.get("product.selling_plan_groups");let dW={GO_TO_CHECKOUT:"trade:goToCheckout:report",PAYPAL_CHECKOUT:"trade:spb:report",COUPON_INPUT:"trade:coupon:input:report",COUPON_APPLY:"trade:coupon:apply:report",COUPON_DELETE:"trade:coupon:delete:report",PAYPAL_CHECKOUT_V2:"trade:spb:report:hiidov2"},dG={SUCCESS:1,ERROR:0};function dz(e){return window.__SL_BUSINESS_DATA__&&window.__SL_BUSINESS_DATA__[e]||null}var dK=Object.prototype,dJ=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||dK)},dX=function(e,t){return function(n){return e(t(n))}},dZ=dX(Object.keys,Object),dQ=Object.prototype.hasOwnProperty,d0=rp(nJ,"DataView"),d1=rp(nJ,"Promise"),d3=rp(nJ,"Set"),d2=rp(nJ,"WeakMap"),d4="[object Map]",d5="[object Promise]",d6="[object Set]",d9="[object WeakMap]",d8="[object DataView]",d7=ra(d0),pe=ra(rw),pt=ra(d1),pn=ra(d3),pr=ra(d2),po=n5;(d0&&po(new d0(new ArrayBuffer(1)))!=d8||rw&&po(new rw)!=d4||d1&&po(d1.resolve())!=d5||d3&&po(new d3)!=d6||d2&&po(new d2)!=d9)&&(po=function(e){var t=n5(e),n="[object Object]"==t?e.constructor:void 0,r=n?ra(n):"";if(r)switch(r){case d7:return d8;case pe:return d4;case pt:return d5;case pn:return d6;case pr:return d9}return t});var pi=po,pa=function(e){return n6(e)&&"[object Arguments]"==n5(e)},pc=Object.prototype,ps=pc.hasOwnProperty,pu=pc.propertyIsEnumerable,pl=pa(function(){return arguments}())?pa:function(e){return n6(e)&&ps.call(e,"callee")&&!pu.call(e,"callee")},pd=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},pp=function(e){return null!=e&&pd(e.length)&&!rn(e)},pf={exports:{}};pf.exports,h=(f=(p=(d=(l=pf.exports)&&!l.nodeType&&l)&&pf&&!pf.nodeType&&pf)&&p.exports===d?nJ.Buffer:void 0)?f.isBuffer:void 0,pf.exports=h||function(){return!1};var ph=pf.exports,py={};py["[object Float32Array]"]=py["[object Float64Array]"]=py["[object Int8Array]"]=py["[object Int16Array]"]=py["[object Int32Array]"]=py["[object Uint8Array]"]=py["[object Uint8ClampedArray]"]=py["[object Uint16Array]"]=py["[object Uint32Array]"]=!0,py["[object Arguments]"]=py["[object Array]"]=py["[object ArrayBuffer]"]=py["[object Boolean]"]=py["[object DataView]"]=py["[object Date]"]=py["[object Error]"]=py["[object Function]"]=py["[object Map]"]=py["[object Number]"]=py["[object Object]"]=py["[object RegExp]"]=py["[object Set]"]=py["[object String]"]=py["[object WeakMap]"]=!1;var pm=function(e){return function(t){return e(t)}},pv={exports:{}};pv.exports,g=(v=(m=(y=pv.exports)&&!y.nodeType&&y)&&pv&&!pv.nodeType&&pv)&&v.exports===m&&nz.process,b=function(){try{var e=v&&v.require&&v.require("util").types;if(e)return e;return g&&g.binding&&g.binding("util")}catch(e){}}(),pv.exports=b;var pg=pv.exports,pb=pg&&pg.isTypedArray,p_=pb?pm(pb):function(e){return n6(e)&&pd(e.length)&&!!py[n5(e)]};function pw(e){var t=this.__data__=new r_(e);this.size=t.size}pw.prototype.clear=function(){this.__data__=new r_,this.size=0},pw.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},pw.prototype.get=function(e){return this.__data__.get(e)},pw.prototype.has=function(e){return this.__data__.has(e)},pw.prototype.set=function(e,t){var n=this.__data__;if(n instanceof r_){var r=n.__data__;if(!rw||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new rS(r)}return n.set(e,t),this.size=n.size,this};var pC=function(){try{var e=rp(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),pO=function(e,t,n){"__proto__"==t&&pC?pC(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},pS=Object.prototype.hasOwnProperty,px=function(e,t,n){var r=e[t];pS.call(e,t)&&rv(r,n)&&(void 0!==n||t in e)||pO(e,t,n)},pk=function(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var c=t[i],s=r?r(n[c],e[c],c,n,e):void 0;void 0===s&&(s=e[c]),o?pO(n,c,s):px(n,c,s)}return n},pP=/^(?:0|[1-9]\d*)$/,pE=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},pI=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&pP.test(e))&&e>-1&&e%1==0&&e<t},pT=Object.prototype.hasOwnProperty,pA=function(e,t){var n=nG(e),r=!n&&pl(e),o=!n&&!r&&ph(e),i=!n&&!r&&!o&&p_(e),a=n||r||o||i,c=a?pE(e.length,String):[],s=c.length;for(var u in e)(t||pT.call(e,u))&&!(a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||pI(u,s)))&&c.push(u);return c},pD=function(e){if(!dJ(e))return dZ(e);var t=[];for(var n in Object(e))dQ.call(e,n)&&"constructor"!=n&&t.push(n);return t},pL=function(e){return pp(e)?pA(e):pD(e)},pj=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},pN=Object.prototype.hasOwnProperty,pB=function(e){if(!re(e))return pj(e);var t=dJ(e),n=[];for(var r in e)"constructor"==r&&(t||!pN.call(e,r))||n.push(r);return n},pF=function(e){return pp(e)?pA(e,!0):pB(e)},pR={exports:{}};pR.exports,S=(O=(C=(w=(_=pR.exports)&&!_.nodeType&&_)&&pR&&!pR.nodeType&&pR)&&C.exports===w?nJ.Buffer:void 0)?O.allocUnsafe:void 0,pR.exports=function(e,t){if(t)return e.slice();var n=e.length,r=S?S(n):new e.constructor(n);return e.copy(r),r};var pM=pR.exports,pU=function(){return[]},pH=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i},pY=Object.prototype.propertyIsEnumerable,pq=Object.getOwnPropertySymbols,p$=pq?function(e){return null==e?[]:pH(pq(e=Object(e)),function(t){return pY.call(e,t)})}:pU,pV=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e},pW=dX(Object.getPrototypeOf,Object),pG=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)pV(t,p$(e)),e=pW(e);return t}:pU,pz=function(e,t,n){var r=t(e);return nG(e)?r:pV(r,n(e))},pK=function(e){return pz(e,pF,pG)},pJ=Object.prototype.hasOwnProperty,pX=nJ.Uint8Array,pZ=function(e){var t=new e.constructor(e.byteLength);return new pX(t).set(new pX(e)),t},pQ=/\w*$/,p0=nX?nX.prototype:void 0,p1=p0?p0.valueOf:void 0,p3=function(e,t){var n=t?pZ(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},p2=function(e){var t=new e.constructor(e.source,pQ.exec(e));return t.lastIndex=e.lastIndex,t},p4=function(e,t){var n=t?pZ(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},p5=Object.create,p6=function(){function e(){}return function(t){if(!re(t))return{};if(p5)return p5(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),p9=pg&&pg.isMap,p8=p9?pm(p9):function(e){return n6(e)&&"[object Map]"==pi(e)},p7=pg&&pg.isSet,fe=p7?pm(p7):function(e){return n6(e)&&"[object Set]"==pi(e)},ft=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},fn=function(e){return pz(e,pL,p$)},fr=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&pJ.call(e,"index")&&(n.index=e.index,n.input=e.input),n},fo=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return pZ(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return p3(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return p4(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return p2(e);case"[object Symbol]":return p1?Object(p1.call(e)):{}}},fi="[object Arguments]",fa="[object Function]",fc="[object Object]",fs={};fs[fi]=fs["[object Array]"]=fs["[object ArrayBuffer]"]=fs["[object DataView]"]=fs["[object Boolean]"]=fs["[object Date]"]=fs["[object Float32Array]"]=fs["[object Float64Array]"]=fs["[object Int8Array]"]=fs["[object Int16Array]"]=fs["[object Int32Array]"]=fs["[object Map]"]=fs["[object Number]"]=fs[fc]=fs["[object RegExp]"]=fs["[object Set]"]=fs["[object String]"]=fs["[object Symbol]"]=fs["[object Uint8Array]"]=fs["[object Uint8ClampedArray]"]=fs["[object Uint16Array]"]=fs["[object Uint32Array]"]=!0,fs["[object Error]"]=fs[fa]=fs["[object WeakMap]"]=!1;var fu=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i},fl=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},fd=Object.prototype,fp=Function.prototype.toString,ff=fd.hasOwnProperty,fh=fp.call(Object),fy=function(e){if(!n6(e)||"[object Object]"!=n5(e))return!1;var t=pW(e);if(null===t)return!0;var n=ff.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&fp.call(n)==fh},fm=nX?nX.isConcatSpreadable:void 0,fv=function(e){return nG(e)||pl(e)||!!(fm&&e&&e[fm])},fg=function e(t,n,r,o,i){var a=-1,c=t.length;for(r||(r=fv),i||(i=[]);++a<c;){var s=t[a];n>0&&r(s)?n>1?e(s,n-1,r,o,i):pV(i,s):o||(i[i.length]=s)}return i},fb=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},f_=Math.max,fw=pC?function(e,t){return pC(e,"toString",{configurable:!0,enumerable:!1,value:function(){return t},writable:!0})}:function(e){return e},fC=Date.now,fO=function e(t,n,r,o,i,a){var c,s=1&n,u=2&n,l=4&n;if(r&&(c=i?r(t,o,i,a):r(t)),void 0!==c)return c;if(!re(t))return t;var d=nG(t);if(d){if(c=fr(t),!s)return rH(t,c)}else{var p,f,h,y,m=pi(t),v=m==fa||"[object GeneratorFunction]"==m;if(ph(t))return pM(t,s);if(m==fc||m==fi||v&&!i){if(c=u||v?{}:"function"!=typeof t.constructor||dJ(t)?{}:p6(pW(t)),!s)return u?(f=(p=c)&&pk(t,pF(t),p),pk(t,pG(t),f)):(y=(h=c)&&pk(t,pL(t),h),pk(t,p$(t),y))}else{if(!fs[m])return i?t:{};c=fo(t,m,s)}}a||(a=new pw);var g=a.get(t);if(g)return g;a.set(t,c),fe(t)?t.forEach(function(o){c.add(e(o,n,r,o,t,a))}):p8(t)&&t.forEach(function(o,i){c.set(i,e(o,n,r,i,t,a))});var b=l?u?pK:fn:u?pF:pL,_=d?void 0:b(t);return ft(_||t,function(o,i){_&&(o=t[i=o]),px(c,i,e(o,n,r,i,t,a))}),c},fS=function(e,t){var n,r;return t=rB(t,e),n=e,null==(e=(r=t).length<2?n:rM(n,fu(r,0,-1)))||delete e[rR(fl(t))]},fx=function(e){return fy(e)?void 0:e};(x=0,k=0,function(){var e=fC(),t=16-(e-k);if(k=e,t>0){if(++x>=800)return arguments[0]}else x=0;return fw.apply(void 0,arguments)})((E=P=function(e,t){var n={};if(null==e)return n;var r=!1;t=rI(t,function(t){return t=rB(t,e),r||(r=t.length>1),t}),pk(e,pK(e),n),r&&(n=fO(n,7,fx));for(var o=t.length;o--;)fS(n,t[o]);return n},I=void 0,T=function(e){return(null==e?0:e.length)?fg(e,1):[]},I=f_(void 0===I?E.length-1:I,0),function(){for(var e=arguments,t=-1,n=f_(e.length-I,0),r=Array(n);++t<n;)r[t]=e[I+t];t=-1;for(var o=Array(I+1);++t<I;)o[t]=e[t];return o[I]=T(r),fb(E,this,o)}),P+"");let fk={AMOUNT_EXCEEDS_LIMIT:"TCTDEXCEEDED_MAX_AMOUNT_LIMIT",ABANDONED_RISK_CONTROL:"TRD_123768_B1409"},fP={STATION:"station",JUMP:"jump",PPINVALIDATE:"paypal-invalidate"};Array.isArray(A=["/trade/center/order/abandoned/save"])&&oJ.interceptors.response.use(void 0,e=>{let{config:t}=e;return t&&t.retry&&A.includes(t.url)?(t.retryCount=t.retryCount||0,t.retryCount>=t.retry)?Promise.reject(e):(t.retryCount+=1,oJ({headers:{retryCount:t.retryCount,...t.headers||{}},...t})):Promise.reject(e)});let{GO_TO_CHECKOUT:fE}=dW,fI={checkout:((e,t)=>{let n={debug:window.console.debug,error:window.console.error,info:window.console.info,log:window.console.log};if("undefined"==typeof window)return n;if(["product"].includes(te().APP_ENV)&&oz&&oz.disable(),!oK(oz))return;let r=t?` - ${t}`:"";return n.error=oz(`${e}:error${r}`).bind(console),n.debug=oz(`${e}:debug${r}`).bind(console),n.info=oz(`${e}:info${r}`).bind(console),n.log=oz(`${e}:log${r}`).bind(console),n})("checkout")},fT=ny.pipeOwner("checkout.js"),fA={save:async function(e){let{associateCart:t=!1,useMemberPoint:n=null,discountCode:r=null,bundledActivitySeq:o=null,orderFrom:i=null,notSupportSubscriptionCheck:a=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=`The old Checkout.Save has been discontinued.
    Please contact "liminyi" to integrate the new Checkout.Save. `;console.warn(c),fT.error(c,{error:Error(c),data:{url:window.location.href,products:e}});let s=window.Shopline.locale,u=rV.get("userSelectLocale")||r0.get("request.cookie.userSelectLocale");return oJ.post("/trade/center/order/abandoned/save",{products:e,associateCart:t,discountCodes:Array.isArray(r)?r:[r],bundledActivitySeq:o,useMemberPoint:n,orderFrom:i,languageInfo:{marketLanguage:s,displayLanguage:u},notSupportSubscriptionCheck:a})}},fD={SignIn:(r="/user/signIn",window.Shopline&&window.Shopline.redirectTo&&window.Shopline.redirectTo(r)||r),Checkout:"/trade/checkout",Checkouts:"/checkouts"},fL=function(e){let{query:t={},associateCart:n,abandonedOrderMark:r=""}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=`${window.location.protocol}//${window.location.host}`,{storeId:i,checkoutToken:a,seq:c}=e,{url:s}=nW(a?`${o}/${i}${fD.Checkouts}/${a}`:`${o}${fD.Checkout}/${c}`,{query:{buyScence:n?"cart":"detail",...t,mark:r},fullQuery:!1});return s},fj=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{stage:n,query:r={},associateCart:o=!1,abandonedOrderSeq:i,abandonedOrderMark:a,currency:c,totalPrice:s,from:u}=t;try{let i=r0.get("tradeSettleConfig"),a=r0.get("request.cookie.osudb_uid"),{onBeforeJump:u,report:l,needReport:d,abandonedOrderSeq:p,abandonedOrderMark:f}=t,h=i&&"ONLY_LOGIN"===i.loginType,{discountCode:y,...m}=t,v=y;if(!o){let e=sessionStorage.getItem("tradeExtraInfo"),t=!function(e){try{JSON.parse(e)}catch(e){return!1}return!0}(e)?{}:JSON.parse(e);v=t&&t.discountCode&&t.discountCode.value}let g={associateCart:o,discountCode:v,orderFrom:dz("orderFrom"),...m};p||(["orderFrom"].some(e=>!g[e]&&0!==g[e])&&fT.info("[成单请求参数缺失，请检查]",{data:{...g}}),fT.info("[成单请求参数初始化]",{data:{...g}}));let b=p?await Promise.resolve({data:{seq:p,mark:f}}):await fA.save(e,g);fT.info("[成单请求响应数据]",{data:{...b&&b.data}}),fI.checkout.info({...b&&b.data});let _=!a&&h,w=!!r&&r.spb,C=fL({storeId:r0.get("storeInfo.storeId"),checkoutToken:b.data.checkoutToken,seq:b.data.seq},{query:{...r,spb:_?null:w},abandonedOrderMark:f,associateCart:o});rJ.emit(fE,{data:{event_status:b&&b.data&&b.data.seq?dG.SUCCESS:dG.ERROR,stage:n,isCart:o,products:e,spb:r&&r.spb}}),iu(b.data.seq,c,s,d);let O=`${window.location.protocol}//${window.location.host}`;if(_){let{url:e}=nW(`${O}${fD.SignIn}`,{query:{redirectUrl:C},fullQuery:!1});"function"==typeof u&&u();try{il({report:l})}catch(e){console.error(e)}return Promise.resolve({...b.data,url:e,needLogin:h})}"function"==typeof u&&u();try{il({report:l})}catch(e){fI.checkout.info(e)}return Promise.resolve({url:C,needLogin:!1,abandonedInfo:b.data})}catch(l){rJ.emit(fE,{data:{event_status:0,stage:n,isCart:o,products:e,spb:r&&r.spb}});let{code:c,message:s}=l||{};switch(fT.error(`[成单请求报错]${c?`[code: ${c}`:""}${s?`[msg: ${s}]`:""}`,{error:l,abandonedOrderSeq:i,abandonedOrderMark:a,products:e,extra:t,from:u||fP.STATION}),c){case fk.AMOUNT_EXCEEDS_LIMIT:dq.init({content:rG("cart.checkout.max_amount_limit")});break;case fk.ABANDONED_RISK_CONTROL:dq.init({content:rG("general.abandon.Order.risk")});break;default:dq.init({content:rG(dV.themes[d$.CreateFail])})}return Promise.reject(l)}},fN=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{url:n}=await fj(e,{...t,from:fP.JUMP});window.location.href=n},fB=!1,fF=()=>(window.SL_EventBus.eventNames()||[]).find(e=>"Symbol(ADD_TO_CART)"===e.toString());window.__SL_TRADE_EVENT__=window.__SL_TRADE_EVENT__||{},window.__SL_TRADE_EVENT__.addToCart=window.__SL_TRADE_EVENT__.addToCart||(e=>window.SL_EventBus.emit(fF(),e));var fR={save:fj};let fM=(e,t)=>new Promise(n=>{let r=document.createElement("script");r.src=e,t&&rt(t)&&Object.entries(t).forEach(e=>{let[t,n]=e;r[t]=n});let o=()=>{r.removeEventListener("load",o),n()};r.addEventListener("load",o),document.head&&document.head.appendChild(r)});function fU(e){return Error(`[初始化渲染失败][超时未调用onInit][当前超时时间:${e}ms]`)}let{PAYPAL_CHECKOUT:fH}=dW,fY=tk.pipeOwner({owner:"PayPal",onTag:e=>{switch(e){case"abandonedSeq":case"code":return!0;default:return!1}}}),fq=e=>{let{k:t,v:n}=e;return n?`[${t}: ${n}]`:""},f$=window.location.href,fV="rememberedCb",fW=e=>`https://www.paypal.com/checkoutnow/remembered?callback=${e}`,fG=()=>{},fz=e=>"function"==typeof e,fK={loadingStatus:0,info:{},cbFnList:[]};window["@yy/sl-theme-shared"]={"/utils/logger/sentryReport":{Owner:{MiniCart:"Checkouts.cart.mini",MainCart:"Checkouts.cart.main",Cart:"Checkouts.common.cart",Coupon:"Checkouts.common.coupon",Checkout:"Checkouts.checkout",Processing:"Checkouts.processing",Thankyou:"Checkouts.thankyou",Order:"Checkouts.order",ExpressCallback:"Checkouts.expressCallback",Error:"Checkouts.error"},Action:c},"/utils/logger":{default:tk},"/utils/logger/sentry":{ErrorLevel:tO,Status:tS,default:ny},"/events/data-report/view-content":{default:nS},"/events/data-report/add-to-cart":{default:nP},"/events/data-report/enum":{default:void 0,"*":nw},"/events/data-report/adapters":{default:{on:function(){nT(),nL()}}},"/components/paypal":{default:class{constructor(e){fY.error(`The old PayPal Express Checkout logic has been discontinued.
      Please contact "liminyi" to integrate the new PayPal Express Checkout.`,{config:e,url:window.location.href}),console.error(`The old PayPal Express Checkout logic has been discontinued.
      Please contact "liminyi" to integrate the new PayPal Express Checkout.`);let t="rounded"===rU(document,"body.dataset.button_style",void 0)?"pill":"rect";this.loggerPrefix=`[PayPal][current dom is:${e.domId}]`,this.payMode=e.payMode||"continue",this.config={...this.config,...or,getDataReportReq:e.getDataReportReq,timeout:{switch:!1},commit:r5(e),disableFunding:e.disableFunding,domId:e.domId,pageType:e.pageType,stage:e.stage,needReport:e.needReport,reportParamsExt:e.reportParamsExt,styleOption:{commonStyle:{paypalSPBStyle:{...or.styleOption.commonStyle.paypalSPBStyle,...e.paypalStyle||{},height:this.getDomHeight(e.height),shape:t}}},paypalScriptParams:e.scriptParams||{}};let{switch:n,delay:r}=rq(e.timeout,{});n&&(this.config.timeout.switch=n,this.config.timeout.delay=r&&"number"==typeof r?r:or.initTimeout),this.wrapperClass=e.wrapperClass,this.wrapperStyle=e.wrapperStyle,this.style={height:this.getDomHeight(e.height)},this.products=null,this.dynamic=e.dynamic,this.jsonpCallback=this.jsonpCallback.bind(this),this.onToast=fz(e.onToast)?e.onToast:fG,this.onDynamicNotify=fz(e.onDynamicNotify)?e.onDynamicNotify:fG,this.onInit=fz(e.onInit)?e.onInit:fG,this.beforeCreateOrder=fz(e.beforeCreateOrder)?e.beforeCreateOrder:or.beforeCreateOrder,this.createOrder=fz(e.createOrder)?e.createOrder:fG,this.beforeContinue=fz(e.beforeContinue)?e.beforeContinue:fG,this.onError=fz(e.onError)?e.onError:fG,this.payNowMode=this.payNowMode.bind(this),this.continueMode=this.continueMode.bind(this),this.onCancel=fz(e.onCancel)?e.onCancel:fG,this.configBeforeRender=fz(e.beforeRender)?e.beforeRender:fG,this.afterRender=fz(e.afterRender)?e.afterRender:fG,this.preparePayParams=null}getDomHeight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:45;return e>55?(fY.error(`${this.loggerPrefix}[按钮高度传入异常]`,{height:e}),55):e<25?(fY.error(`${this.loggerPrefix}[按钮高度传入异常]`,{height:e}),25):e}get isContinueMode(){return"continue"===this.payMode}get isVerticalLayout(){return"vertical"===this.config.styleOption.commonStyle.paypalSPBStyle.layout}transProducts(e){return e.map(e=>({productNum:e.num,productSeq:e.spuId,productSku:e.skuId,productPrice:e.price}))}onPayPalError(e,t){let n=e&&e.message;if("caught"!==n){fY.error(`${this.loggerPrefix}[onError]${fq({k:"code",v:e&&e.code})}${fq({k:"message",v:n||e&&e.msg})}`,{...e,code:e&&e.code,message:n});let t=r3(e);this.onToast({message:t})}this.onError(e,t)}async continueMode(){let{originUrl:e,query:t}=nW(this.createOrderParams.returnUrl),{engineType:n,preview:r,themeId:o,ignoreRedirect:i}=t,{url:a}=nW(e,{query:{engineType:n,preview:r,themeId:o,ignoreRedirect:i},fullQuery:!1}),{manualCapture:c,orderFrom:s=null}=r4(),u={payMethod:"Paypal",abandonedOrderInfo:this.preparePayParams,returnUrl:a,extChannelInfo:{manualCapture:c},orderFrom:dz("orderFrom")||s};try{["orderFrom"].some(e=>!u[e]&&0!==u[e])&&fY.info("[预支付请求参数缺失，请检查]",{...u,abandonedSeq:this.abandonedSeq});let{data:e={}}=await o$(u),{chDealId:t,returnUrl:n}=e;return rJ.emit(fH,{data:{event_status:t?1:0,stage:rq(this.config.stage,this.config.pageType),product:this.products}}),f$=n,fY.debug(`${this.loggerPrefix}[唤起弹窗成功][createOrder][拿chDealId][${t?"成功":"失败"}]`,t?{...e}:null),t}catch(e){fY.debug(`${this.loggerPrefix}[唤起弹窗成功][createOrder][拿chDealId][失败]${fq({k:"code",v:e&&e.code})}${fq({k:"message",v:e&&e.msg||e&&e.message})}`,{...e}),rJ.emit(fH,{data:{event_status:0,stage:rq(this.config.stage,this.config.pageType),product:this.products}})}}async payNowMode(){try{let{chDealId:e,returnUrl:t}=await this.createOrder(this.createOrderParams);return f$=t,fY.debug(`${this.loggerPrefix}[唤起弹窗成功][createOrder][拿chDealId][${e?"成功":"失败"}]`,e?{chDealId:e,returnUrl:t}:null),e}catch(t){let e=r3(t);return this.onToast({message:e}),this.onPayPalError(t),Promise.reject({message:e})}}async onUserCancel(e,t){let{redirect:n}=t;fY.info(`${this.loggerPrefix}[用户关闭PayPal弹窗]`,{abandonedSeq:this.abandonedSeq});let r=await this.onCancel(e);r&&n(r)}async onCurrentInit(e,t){this.initTimer&&clearTimeout(this.initTimer),this.initActions=t,fY.debug(`${this.loggerPrefix}[初始化成功]`),this.onInit(e,t)}async onClick(e,t){let n;let{fundingSource:r}=e||{};if(fY.info(`${this.loggerPrefix}[按钮点击][点击了${r}]`),n="[object AsyncFunction]"===Object.prototype.toString.call(this.beforeCreateOrder)?await this.beforeCreateOrder(this).catch(e=>(this.onPayPalError(e),t.reject())):await this.beforeCreateOrder(this),fY.debug(`${this.loggerPrefix}[准备唤起弹窗][beforeCreateOrder][参数拼接完成]`),n&&!1===n.valid)return t.reject();this.initActions.enable(),n=n||{products:this.products},this.createOrderParams=n;let{products:o,...i}=n;if(!o||o.length<=0)return this.onPayPalError({message:`products empty, request aborted: ${o}`}),t.reject();if(this.isContinueMode){this.products=o;try{let{url:e,needLogin:n,abandonedInfo:r}=await fR.save(o,{...i,from:fP.PPINVALIDATE,stage:this.config.stage,query:{...i.query,spb:!0}});if(this.createOrderParams.returnUrl=e,this.preparePayParams=r,n)return window.location.href=e,t.reject()}catch(e){return t.reject()}}}async onCreateOrder(){fY.debug(`${this.loggerPrefix}[唤起弹窗成功][createOrder][拿chDealId]`);try{if(this.isContinueMode)return this.continueMode();return this.payNowMode()}catch{return""}}get abandonedSeq(){return this.isContinueMode?this.preparePayParams&&this.preparePayParams.seq:rU(this.createOrderParams,"abandonedOrderSeqInfo.seq",void 0)}onContinue(){return fY.info(`${this.loggerPrefix}[点击${this.isContinueMode?"继续":"支付"}][准备跳转][onContinue][${f$}]`,{jumpUrl:f$,abandonedSeq:this.abandonedSeq}),fz(this.beforeContinue)&&this.beforeContinue({returnUrl:f$}),window.location.href=f$,fY.info(`${this.loggerPrefix}[点击${this.isContinueMode?"继续":"支付"}][跳转已触发]`,{abandonedSeq:this.abandonedSeq}),!1}setProducts(e){fY.debug(`${this.loggerPrefix}[更新PayPal商品信息]`,{products:e}),this.products=this.transProducts(e)}setDisabled(e){if(this.node){this.disabled=e;try{if(e){this.initActions&&this.initActions.disable(),this.createDisabledStyle(this.node);return}this.initActions&&this.initActions.enable(),this.disabledStyleTag&&this.node.parentElement&&this.node.parentElement.removeChild(this.disabledStyleTag)}catch(e){console.error("The error here does not affect functionality and can be ignored.",e)}}}createStyle(e){let t=document.createElement("div");this.skeleton=t,t.classList.add("paypal__skeleton--animated");let n=document.createElement("style"),r=`
      @keyframes skeleton {
        0% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0 50%;
        }
      }
    `;if(n.innerHTML=this.isContinueMode&&!this.isVerticalLayout?`
      #${this.config.domId} {
        overflow: hidden;
        text-align: center;
        height: ${this.style.height}px;
      }
      /** Background color */
      #${this.config.domId}.paypal__bg::before,
      #${this.config.domId}.paypal__bg::after {
        content:'';
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        width: calc(50% - 3px);
        border-radius: 4px;
        background-color: #ffc439;
      }
      #${this.config.domId}.paypal__bg::after {
        left: unset;
        right: 0;
      }
      [data-button_style=square] .paypal__bg::before,
      [data-button_style=square] .paypal__bg::after{
        border-radius: 0 !important;
      }
      [data-button_style=rounded] .paypal__bg::before,
      [data-button_style=rounded] .paypal__bg::after{
        border-radius: 9999px !important;
      }
    `:`
      #${this.config.domId} {
        min-height: ${this.style.height}px;
      }
      `,n.innerHTML+=`

    #${this.config.domId} {
      position: relative;
      user-select: none;
    }
    #${this.config.domId} .paypal__skeleton--animated {
      margin: 0 auto;
      border-radius: 4px;
      width: 100%;
      height: ${this.style.height}px;
      position: absolute;
    }

    .paypal__skeleton--animated {
      background: linear-gradient(90deg, hsla(0, 0%, 74.5%, 0.2) 25%, hsla(0, 0%, 50.6%, 0.24) 37%, hsla(0, 0%, 74.5%, 0.2) 63%);
      background-size: 400% 100%;
      animation: skeleton 2s linear infinite;
    }

    ${r}
    `,e){if(this.wrapperClass&&e.classList.add(this.wrapperClass),this.wrapperStyle){var o;let t={},n=e.getAttribute("style").replace(/\s+/g,""),r=e=>{let t={};return e.split(";").forEach(e=>{let[n,r]=e.split(":");t[n.replace(/-[^0-9]/g,e=>e.charAt(1).toUpperCase())]=r}),t};"string"==typeof this.wrapperStyle?t={...r(n),...r(this.wrapperStyle)}:"object"==typeof this.wrapperStyle&&(t={...r(n),...this.wrapperStyle}),e.style="object"!=typeof(o=t)?"":Object.entries(o).map(e=>e.join(":")).join(";").replace(/[A-Z]/g,e=>`-${e.charAt(0).toLowerCase()}`)}e.parentElement.insertBefore(n,e),e.appendChild(t)}}createDisabledStyle(e){let t=document.createElement("style");this.disabledStyleTag=t,t.innerHTML=`
      #${this.config.domId||"shopline-paypal"}::before {
        width: 0 !important;
      }
      #${this.config.domId||"shopline-paypal"}::after {
        content: '';
        display: block;
        z-index: 100;
        width: 100% !important;
        height: ${this.style.height}px;
        border-radius: 4px;
        cursor: not-allowed;
        position: absolute;
        top: 0;
        left: 0 !important;
        background: transparent !important;
      }

      #${this.config.domId} {
        opacity: ${this.disabled?.3:1};
      }
    `,e&&e.parentElement.insertBefore(t,e)}removeSkeleton(e){let{skeleton:t}=this;clearTimeout(this.removeSkeletonTimer),this.removeSkeletonTimer=setTimeout(()=>{e&&(e.removeChild(t),this.isContinueMode&&e.classList.add("paypal__bg"))},300)}dynamicNotify(e){let{paypal:t}=e||{};this.isHidePayPalButton=!t,!t&&this.onDynamicNotify&&this.onDynamicNotify({...e,isHidePayPalButton:!t})}jsonpCallback(e){if(fY.debug(`${this.loggerPrefix}[是否有登录cookie][remembered]`,{remembered:e}),fK.info=e,fK.loadingStatus=2,this.dynamicNotify(e),fK.cbFnList)try{fK.cbFnList.forEach(t=>t(e)),fK.cbFnList=[]}catch(e){fK.cbFnList=[]}}async beforeRender(){try{this.configBeforeRender()}catch(e){this.onPayPalError({message:"[beforeRender调用失败]",error:e})}let e={};try{let{data:t}=await oV();e=t||{}}catch(e){this.onPayPalError({message:"[获取paypal配置失败]",error:e})}return{clientKey:ot(e),paypalQueryParams:r8(this.config,{isContinueMode:this.isContinueMode,paypalConfig:e})}}async render(){if(this.dynamic){if(2!==fK.loadingStatus){if(1===fK.loadingStatus){fK.cbFnList.push(this.render.bind(this));return}fK.loadingStatus=1,window[fV]=this.jsonpCallback;try{await fM(fW(fV)),fY.debug(`${this.loggerPrefix}[加载登录态判定 script]: ${fV}`)}catch(e){this.onPayPalError(e)}}else this.dynamicNotify(fK.info)}if(void 0!==this.isHidePayPalButton&&this.isHidePayPalButton||!this.config.domId||this.rendered)return null;let e=document.getElementById(this.config.domId);if(!e)return fY.error(`${this.loggerPrefix}[onError][初始化失败][找不到挂载的DOM]`),null;this.node=e,this.config.timeout&&this.config.timeout.switch&&(t&&(t.disconnect(),t=null),this.initTimer=setTimeout(()=>{throw this.node.innerHTML="",t=new(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)(e=>{e.forEach(()=>{this.node.innerHTML=""})}),e&&t.observe(e,{childList:!0,attributes:!1,subtree:!1}),setTimeout(()=>{t&&(t.disconnect(),t=null)},5e3),this.initError=!0,this.onPayPalError(fU(this.config.timeout.delay),"initRender"),fU(this.config.timeout.delay)},this.config.timeout.delay)),this.createStyle(e);let{clientKey:n,paypalQueryParams:r}=await this.beforeRender(),o={...this.config,paypalQueryParams:r,createOrder:this.onCreateOrder.bind(this),createToken:this.onContinue.bind(this),paypalProps:{onClick:this.onClick.bind(this),onError:this.onPayPalError.bind(this),onInit:this.onCurrentInit.bind(this),onCancel:this.onUserCancel.bind(this)}},i=new nN(n,o);return i&&this.removeSkeleton(e),this.rendered=!0,this.afterRender({dynamicInfo:fK.info}),fY.debug(`${this.loggerPrefix}[初始化SDK]`,{...o}),i}}}}}();
