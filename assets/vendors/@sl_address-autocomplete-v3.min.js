!function(){"use strict";var e,t,n,o,r,i,a,s,u,l,c,d,p,f,h,v,y="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},g={},m=y&&y.__extends||(e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)},function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}),b=y&&y.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a},w=y&&y.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e},_=y&&y.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function k(e){var t=!1;return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];t||(t=!0,e.apply(void 0,w(n)))}}Object.defineProperty(g,"__esModule",{value:!0});var C=function(){function e(e){this.tapIdSeed=0,this.presetTapBucket=new Set,this.tapBuckets=new Map,this.tapOptionsCache=new Map,this.bucketHashcode=e}return e.prototype.exhaust=function(){this.presetTapBucket.clear(),this.tapBuckets.clear(),this.tapOptionsCache.clear()},e.prototype.destroy=function(){this.exhaust()},e.prototype.insertSyncTap=function(e,t){return this.tapping(e,t)},e.prototype.insertAsyncTap=function(e,t){return this.tapping(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=t[t.length-1];try{e.apply(void 0,w(t))}catch(e){o(e)}},t)},e.prototype.insertPromiseTap=function(e,t){return this.tapping(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=t.pop();try{Promise.resolve(e.apply(void 0,w(t))).then(function(e){o(null,e)},function(e){o(e)})}catch(e){o(e)}},t)},e.prototype.invokeSeries=function(e,t){t||(t={}),"function"==typeof t.onComplete&&(t.onComplete=k(t.onComplete)),function e(t,n,o){if(r="function"==typeof t.onComplete?t.onComplete:function(e,t){},!o.length){t.shouldWaterfall?r(null,n[0]):r(null,void 0);return}var r,i=o.shift(),a=Array.from(n),s=w(n,[function(n,i){if(null!=n){r(n);return}if(void 0!==i&&!0===t.shouldBail){r(null,i);return}void 0!==i&&!0===t.shouldWaterfall&&(a[0]=i),e(t,a,o)}]);i.fn.apply(i,w(s))}(t,e,Array.from(this.getBucketTaps(e)))},e.prototype.invokeParallel=function(e,t){t||(t={}),"function"==typeof t.onComplete&&(t.onComplete=k(t.onComplete)),function(e,t,n){if(i="function"==typeof e.onComplete?e.onComplete:function(e,t){},!n.length){i(null,void 0);return}var o,r,i,a=n.length,s=w(t,[function(n,o){if(null!=n){i(n);return}if(void 0!==o&&!0===e.shouldBail){i(null,o);return}if(--a<=0){i(null,t[0]);return}}]);try{for(var u=_(n),l=u.next();!l.done;l=u.next()){var c=l.value;c.fn.apply(c,w(s))}}catch(e){o={error:e}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(o)throw o.error}}}(t,e,Array.from(this.getBucketTaps(e)))},e.prototype.invokeSynchronously=function(e,t){return t||(t={}),function(e,t,n){if(!n.length)return e.shouldWaterfall?t[0]:void 0;var o,r,i=Array.from(t);try{for(var a=_(n),s=a.next();!s.done;s=a.next()){var u=s.value.fn.apply(void 0,w(i));if(void 0!==u&&!0===e.shouldBail)return u;void 0!==u&&!0===e.shouldWaterfall&&(i[0]=u)}}catch(e){o={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return e.shouldWaterfall?i[0]:void 0}(t,e,Array.from(this.getBucketTaps(e)))},e.prototype.getBucketTaps=function(e){var t,n,o=Array.from(this.presetTapBucket),r=[];if("function"==typeof this.bucketHashcode){var i=this.bucketHashcode.apply(this,w(e));this.tapBuckets.has(i)&&(r=Array.from(this.tapBuckets.get(i)))}var a=new Set(w(o,r)),s=new Set;try{for(var u=_(a),l=u.next();!l.done;l=u.next()){var c=l.value;s.add(this.tapOptionsCache.get(c))}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return s},e.prototype.tapping=function(e,t){var n=this,o=this.presetTapBucket;t&&(this.tapBuckets.has(t)||this.tapBuckets.set(t,new Set),o=this.tapBuckets.get(t));var r=this.generateTapId();return this.tapOptionsCache.set(r,{fn:e,bucket:t}),o.add(r),function(){n.popoutTap(r)}},e.prototype.popoutTap=function(e){var t=this.tapOptionsCache.get(e);if(t){var n=t.bucket;n?this.tapBuckets.has(n)&&this.tapBuckets.get(n).delete(e):this.presetTapBucket.delete(e),this.tapOptionsCache.delete(e)}},e.prototype.generateTapId=function(){return"tap:"+ ++this.tapIdSeed+"?"+Date.now()},e}();g.Hook=C;var P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m(t,e),t.prototype.tap=function(e,t){return this.insertSyncTap(e,t)},t}(C);g.SyncTapHook=P;var x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m(t,e),t.prototype.tapAsync=function(e,t){return this.insertAsyncTap(e,t)},t.prototype.tapPromise=function(e,t){return this.insertPromiseTap(e,t)},t}(C);g.AsyncTapHook=x;var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m(t,e),t.prototype.call=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.invokeSynchronously(e)},t}(P),A=g.SyncHook=S,q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m(t,e),t.prototype.call=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.invokeSynchronously(e,{shouldBail:!0})},t}(P),L=g.SyncBailHook=q,D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m(t,e),t.prototype.call=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.invokeSynchronously(e,{shouldWaterfall:!0})},t}(P);g.SyncWaterfallHook=D;var T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m(t,e),t.prototype.callAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.pop();this.invokeParallel(e,{onComplete:function(e){null!=e?n(e):n()}})},t.prototype.callPromise=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new Promise(function(n,o){e.invokeParallel(t,{onComplete:function(e){null!=e?o(e):n()}})})},t}(x);g.AsyncParallelHook=T;var R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m(t,e),t.prototype.callAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.pop();this.invokeParallel(e,{shouldBail:!0,onComplete:n})},t.prototype.callPromise=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new Promise(function(n,o){e.invokeParallel(t,{shouldBail:!0,onComplete:function(e,t){null!=e?o(e):n(t)}})})},t}(x);g.AsyncParallelBailHook=R;var E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m(t,e),t.prototype.callAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.pop();this.invokeSeries(e,{onComplete:function(e){null!=e?n(e):n()}})},t.prototype.callPromise=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new Promise(function(n,o){e.invokeSeries(t,{onComplete:function(e){null!=e?o(e):n()}})})},t}(x);g.AsyncSeriesHook=E;var O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m(t,e),t.prototype.callAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.pop();this.invokeSeries(e,{shouldBail:!0,onComplete:n})},t.prototype.callPromise=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new Promise(function(n,o){e.invokeSeries(t,{shouldBail:!0,onComplete:function(e,t){null!=e?o(e):n(t)}})})},t}(x);g.AsyncSeriesBailHook=O;var B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m(t,e),t.prototype.callAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.pop();this.invokeSeries(e,{shouldWaterfall:!0,onComplete:n})},t.prototype.callPromise=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new Promise(function(n,o){e.invokeSeries(t,{shouldWaterfall:!0,onComplete:function(e,t){null!=e?o(e):n(t)}})})},t}(x);function $(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}g.AsyncSeriesWaterfallHook=B,g.default={SyncHook:S,SyncBailHook:q,SyncWaterfallHook:D,AsyncSeriesHook:E,AsyncSeriesBailHook:O,AsyncSeriesWaterfallHook:B,AsyncParallelHook:T,AsyncParallelBailHook:R},(t=p||(p={}))[t.Disabled=-1]="Disabled",t[t.Google=1]="Google",t[t.Shopline=2]="Shopline",t[t.Loqate=3]="Loqate",t[t.AWS=4]="AWS",(n=f||(f={})).Country="country",n.Province="province",n.City="city",n.District="district",n.Name="name",n.FirstName="firstName",n.LastName="lastName",n.Mobile="mobile",n.Postcode="postcode",n.Company="company",n.Address="address",n.Address2="address2",(o=h||(h={}))[o.NAME=1]="NAME",o[o.FLName=2]="FLName",(r=v||(v={}))[r.Select=1]="Select",r[r.Input=2]="Input";var H=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},j="object"==typeof y&&y&&y.Object===Object&&y,I="object"==typeof self&&self&&self.Object===Object&&self,M=j||I||Function("return this")(),N=/\s/,W=function(e){for(var t=e.length;t--&&N.test(e.charAt(t)););return t},F=/^\s+/,G=M.Symbol,z=Object.prototype,K=z.hasOwnProperty,Q=z.toString,V=G?G.toStringTag:void 0,U=Object.prototype.toString,Z=function(e){var t=K.call(e,V),n=e[V];try{e[V]=void 0;var o=!0}catch(e){}var r=Q.call(e);return o&&(t?e[V]=n:delete e[V]),r},J=G?G.toStringTag:void 0,X=function(e){var t;return"symbol"==typeof e||null!=e&&"object"==typeof e&&"[object Symbol]"==(null==(t=e)?void 0===t?"[object Undefined]":"[object Null]":J&&J in Object(t)?Z(t):U.call(t))},Y=0/0,ee=/^[-+]0x[0-9a-f]+$/i,et=/^0b[01]+$/i,en=/^0o[0-7]+$/i,eo=parseInt,er=function(){return M.Date.now()},ei=function(e){if("number"==typeof e)return e;if(X(e))return Y;if(H(e)){var t,n="function"==typeof e.valueOf?e.valueOf():e;e=H(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=(t=e)?t.slice(0,W(t)+1).replace(F,""):t;var o=et.test(e);return o||en.test(e)?eo(e.slice(2),o?2:8):ee.test(e)?Y:+e},ea=Math.max,es=Math.min,eu=function(e,t,n){var o,r,i,a,s,u,l=0,c=!1,d=!1,p=!0;if("function"!=typeof e)throw TypeError("Expected a function");function f(t){var n=o,i=r;return o=r=void 0,l=t,a=e.apply(i,n)}function h(e){var n=e-u,o=e-l;return void 0===u||n>=t||n<0||d&&o>=i}function v(){var e,n,o,r=er();if(h(r))return y(r);s=setTimeout(v,(e=r-u,n=r-l,o=t-e,d?es(o,i-n):o))}function y(e){return(s=void 0,p&&o)?f(e):(o=r=void 0,a)}function g(){var e,n=er(),i=h(n);if(o=arguments,r=this,u=n,i){if(void 0===s)return l=e=u,s=setTimeout(v,t),c?f(e):a;if(d)return clearTimeout(s),s=setTimeout(v,t),f(u)}return void 0===s&&(s=setTimeout(v,t)),a}return t=ei(t)||0,H(n)&&(c=!!n.leading,i=(d="maxWait"in n)?ea(ei(n.maxWait)||0,t):i,p="trailing"in n?!!n.trailing:p),g.cancel=function(){void 0!==s&&clearTimeout(s),l=0,o=u=r=s=void 0},g.flush=function(){return void 0===s?a:y(er())},g};class el{constructor(e){this.config=e}get $input(){return this.config.$input}get value(){return this.$input.value}get size(){return this.value.length}get activated(){return document.activeElement===this.$input}}class ec{constructor(e){this.params=e}get onPlaceSelected(){return this.params.onPlaceSelected}get $predictionParent(){return this.params.$predictionParent}get $input(){return this.params.$input}get plugins(){return Array.isArray(this.params.plugins)?this.params.plugins:[]}get predictionRequest(){return this.params.prediction.request}get predictionRequestHashcode(){return this.params.prediction.requestHashcode||(e=>e.keyword)}get predictionRequestDebounce(){let e=this.params.prediction;return"number"!=typeof e.requestDebounceMS||e.requestDebounceMS<0?400:e.requestDebounceMS}get predictionKeywordThreshold(){let e=this.params.prediction;return"number"!=typeof e.keywordThreshold||e.keywordThreshold<0?2:e.keywordThreshold}}function ed(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function s(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}u((o=o.apply(e,t||[])).next())})}function ep(e){return!e.list||e.list.length<=0}"function"==typeof SuppressedError&&SuppressedError;var ef={},eh={},ev={},ey=y&&y.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function s(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}u((o=o.apply(e,t||[])).next())})},eg=y&&y.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(ev,"__esModule",{value:!0});var em=new Promise(function(e){});ev.default={zombie:em,resolvable:function(){var e,t=!1;return[new Promise(function(n){t?n():e=n}),function(){t=!0,"function"==typeof e&&e()}]},resolveAfterEventBubbled:function(e,t){return ey(this,void 0,void 0,function(){return eg(this,function(n){return[2,new Promise(function(n){var o=function(r){e.removeEventListener(t,o),n(r)};e.addEventListener(t,o)})]})})},resolveAfterSeconds:function(e){return ey(this,void 0,void 0,function(){return eg(this,function(t){return e<=0?[2,Promise.resolve()]:[2,new Promise(function(t){setTimeout(function(){t()},1e3*e)})]})})},resolveAfterDuration:function(e){return ey(this,void 0,void 0,function(){return eg(this,function(t){return e<=0?[2,Promise.resolve()]:[2,new Promise(function(t){setTimeout(function(){t()},e)})]})})}};var eb={};Object.defineProperty(eb,"__esModule",{value:!0});var ew=function(){function e(e){this.v=e}return Object.defineProperty(e.prototype,"timestamp",{get:function(){return this.v},enumerable:!1,configurable:!0}),e.prototype.add=function(t){return new e(this.v+t)},e.prototype.sub=function(t){return new e(this.v-t)},e.prototype.duration=function(e){return this.v-e.timestamp},e}();function e_(e){return new ew(e)}function ek(){return e_(Date.now())}eb.default={time:e_,now:ek,later:function(e){return ek().add(e)},former:function(e){return ek().sub(e)},Millisecond:1,Second:1e3,Minute:6e4,Hour:36e5,Day:864e5,Week:6048e5};var eC={};Object.defineProperty(eC,"__esModule",{value:!0}),eC.default={errCanceled:"context done with cancellation",errTimeout:"context done with timeout",errDeadline:"context done with deadline",errNotNullableValuer:"valuer is not nullable"};var eP=y&&y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(eh,"__esModule",{value:!0});var ex=eP(ev),eS=eP(eb),eA=eP(eC);function eq(){return{deadline:function(){return null},done:function(){return ex.default.zombie},err:function(){return null},value:function(e){return e?e.defaultGetter():null}}}function eL(e){return e||(e=eT),{deadline:function(){return e.deadline()},done:function(){return e.done()},err:function(){return e.err()},value:function(t){return e.value(t)}}}function eD(e){var t=ex.default.resolvable(),n=t[0],o=t[1],r=null;return[{deadline:function(){return e.deadline()},done:function(){return Promise.race([e.done().then(function(){return e.err()}),n.then(function(){return Error(eA.default.errCanceled)})]).then(function(e){r=e})},err:function(){return r},value:function(t){return e.value(t)}},o]}eh.default={background:function(){return eL(eT)},todo:function(){return eL(eR)},withValue:function(e,t,n){return{deadline:function(){return e.deadline()},done:function(){return e.done()},err:function(){return e.err()},value:function(o){return t===o?n:e.value(o)}}},withCancel:function(e){return eD(e)},withTimeout:function(e,t){var n,o,r;return eD((o=eS.default.later(t),r=ex.default.resolveAfterDuration(t),{deadline:function(){return o},done:function(){return Promise.race([e.done().then(function(){return e.err()}),r.then(function(){return Error(eA.default.errTimeout)})]).then(function(e){n=e})},err:function(){return n},value:function(t){return e.value(t)}}))},withDeadline:function(e,t){var n,o;return eD((n=null,o=ex.default.resolveAfterDuration(t.duration(eS.default.now())),{deadline:function(){return t},done:function(){return Promise.race([e.done().then(function(){return e.err()}),o.then(function(){return Error(eA.default.errDeadline)})]).then(function(e){n=e})},err:function(){return n},value:function(t){return e.value(t)}}))}};var eT=eq(),eR=eq(),eE={},eO=y&&y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(eE,"__esModule",{value:!0});var eB=eO(eC);function e$(e){return Object.defineProperty({},"defaultGetter",{value:e,writable:!1,configurable:!1})}eE.default={newValuer:function(e){return e$(void 0===e?function(){throw Error(eB.default.errNotNullableValuer)}:function(){return e})},newValuerWithGetter:function(e){return"function"!=typeof e&&(e=function(){throw Error(eB.default.errNotNullableValuer)}),e$(e)}},i=y&&y.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},a=y&&y.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),s=y&&y.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)},u=y&&y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Object.defineProperty(ef,"__esModule",{value:!0}),l=u(eh),c=u(eC),d=u(eE),s(eh,ef),s(eE,ef),ef.default=i(i(i({},c.default),l.default),d.default);var eH=ef&&ef.__esModule&&Object.prototype.hasOwnProperty.call(ef,"default")?ef.default:ef;class ej{static getRequestCache(e){return ej.requestCache[e]}static setRequestCache(e,t){t?ej.requestCache[e]=t:delete ej.requestCache[e]}static deleteRequestCache(e){delete ej.requestCache[e]}constructor(e){this.config=e,this.requestQueue=[],this.predictionRequestDisabled=!1,this.hooks={canResponse:new L,responded:new A}}query(e){let t=this.nextHead();this.requestQueue.push(e);let n={keyword:e},o=this.processQuery(n),r=!0;o.then(t=>{if(r&&"function"==typeof this._onResponse){if(t.success&&this.hooks.responded.call({requestParams:n,response:t.data}),t.success&&!ep(t.data))this._onResponse(t.data);else for(let t=this.requestQueue.length-1;t>=0;--t){let o=this.requestQueue[t];if(0!==e.indexOf(o))continue;let r=ej.getRequestCache(this.getRequestCacheKey(n));if(r&&!r.isPolling&&r.response.success&&!ep(r.response.data)){this._onResponse(r.response.data);break}}}}),t.done().finally(()=>{r=!1})}get onResponse(){return this._onResponse}set onResponse(e){this._onResponse=e}nextHead(){"function"==typeof this.cancelHeadResponseCtx&&this.cancelHeadResponseCtx();let[e,t]=eH.withCancel(eH.background());return this.cancelHeadResponseCtx=t,e}getRequestCacheKey(e){return this.config.predictionRequestHashcode(e)}executeRequest(e){return ed(this,void 0,void 0,function*(){return this.predictionRequestDisabled?{success:!0,code:"SUCCESS",data:{type:p.Disabled,list:[]}}:this.config.predictionRequest(e).then(e=>(e.success&&e.data.type===p.Disabled&&(this.predictionRequestDisabled=!0),e))})}processQuery(e){return ed(this,void 0,void 0,function*(){let t=ej.getRequestCache(this.getRequestCacheKey(e));if(t)return t.request;let n=this.executeRequest(e);return ej.setRequestCache(this.getRequestCacheKey(e),{isPolling:!0,params:e,request:n}),n.then(t=>{t.success?this.hooks.canResponse.call(t.data)?ej.setRequestCache(this.getRequestCacheKey(e),{isPolling:!1,params:e,request:n,response:t}):ej.setRequestCache(this.getRequestCacheKey(e),{isPolling:!1,params:e,request:n,response:{success:!1,code:"FA_RESPONSE_CANCELED_WITH_PLUGIN",msg:void 0,traceId:void 0}}):ej.deleteRequestCache(this.getRequestCacheKey(e))}),n})}}ej.requestCache={};class eI{constructor(e){this.config=e,this.$ele=this.config.$predictionParent,this.$ele.classList.add("address-autocomplete__parent"),this.hooks={beforeActivate:new L,activate:new A,deactivate:new A}}activate(e){!1!==this.hooks.beforeActivate.call(e)&&this.hooks.activate.call(e)}deactivate(){this.hooks.deactivate.call()}}function eM(e){return document.createRange().createContextualFragment(e.toString().replace(/\s\s+/g," ").trim())}$('.address-autocomplete__parent {\n  position: relative;\n}\n\n.address-autocomplete {\n  position: absolute;\n  width: 100%;\n  top: 100%;\n  z-index: 100;\n  background-color: #fff;\n  border: 1px solid #ddddd8;\n  box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.25);\n  border-radius: 4px;\n  box-sizing: border-box;\n}\n.address-autocomplete--hidden {\n  display: none !important;\n}\n.address-autocomplete__header {\n  position: relative;\n  height: 33px;\n  line-height: 33px;\n  color: #787878;\n  font-size: 12px;\n  padding: 0 11px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.address-autocomplete__close {\n  width: 12px;\n  height: 12px;\n  background-image: url("data:image/svg+xml,%3Csvg width%3D%2212%22 height%3D%2213%22 viewBox%3D%220 0 12 13%22 fill%3D%22none%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath fill-rule%3D%22evenodd%22 clip-rule%3D%22evenodd%22 d%3D%22M1.44122 0.750678C1.11174 0.416441 0.577557 0.416441 0.248083 0.750678C-0.0813916 1.08491 -0.0813925 1.62682 0.248082 1.96106L4.80752 6.5864L0.418422 11.0389C0.0889478 11.3732 0.0889488 11.9151 0.418423 12.2493C0.747898 12.5836 1.28208 12.5836 1.61156 12.2493L6.00065 7.79678L10.3897 12.2493C10.7192 12.5835 11.2534 12.5835 11.5828 12.2493C11.9123 11.915 11.9123 11.3731 11.5828 11.0389L7.19378 6.5864L11.7532 1.9611C12.0827 1.62686 12.0827 1.08496 11.7532 0.750718C11.4237 0.416481 10.8895 0.416481 10.56 0.750718L6.00065 5.37602L1.44122 0.750678Z%22 fill%3D%22%23737373%22%2F%3E%3C%2Fsvg%3E");\n  cursor: pointer;\n}\n.address-autocomplete__close::after {\n  left: -10px;\n  right: -10px;\n  top: -10px;\n  bottom: -10px;\n  position: absolute;\n  display: block;\n  content: "";\n}\n.address-autocomplete__footer__google {\n  display: none;\n}\n.address-autocomplete[data-prediction-type="1"] > .address-autocomplete__footer__google {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 8px 11px;\n  color: #787878;\n  background: rgba(221, 221, 216, 0.2);\n}\n.address-autocomplete__list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.address-autocomplete__list li {\n  cursor: pointer;\n  height: 41px;\n  line-height: 17px;\n  padding: 11px;\n  color: #2c2c2c;\n  font-size: 12px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.address-autocomplete__list li:hover {\n  background: rgba(221, 221, 216, 0.5);\n}');class eN{apply(e){let t=!1;e.predictionRequest.hooks.canResponse.tap(e=>{if(this.shouldActivate(e))return!0}),e.predictionList.hooks.activate.tap(n=>{if(this.shouldActivate(n)){t||(t=!0,e.predictionList.$ele.appendChild(this.$container)),this.activate(e,n);let o=e.predictionList.hooks.beforeActivate.tap(t=>{if(this.shouldActivate(t))return this.activate(e,t),!1;o(),this.deactivate()}),r=e.predictionList.hooks.deactivate.tap(()=>{o(),r(),this.deactivate()})}})}deactivate(){this.toggleContainer(!1)}toggleContainer(e){e?this.$container.classList.remove("address-autocomplete--hidden"):this.$container.classList.add("address-autocomplete--hidden")}}$('.address-autocomplete__loqate .address-autocomplete__list {\n  max-height: 200px;\n  overflow-y: auto;\n}\n.address-autocomplete__loqate .address-autocomplete__list li {\n  display: flex;\n  align-items: baseline;\n}\n.address-autocomplete__loqate__desc {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  flex-grow: 1;\n}\n.address-autocomplete__loqate__container_arrow {\n  flex-grow: 0;\n  flex-shrink: 0;\n  width: 16px;\n  height: 10px;\n  background-image: url("data:image/svg+xml,%3Csvg width%3D%226%22 height%3D%2210%22 viewBox%3D%220 0 6 10%22 fill%3D%22none%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E    %3Cpath fill-rule%3D%22evenodd%22 clip-rule%3D%22evenodd%22 d%3D%22M0.46967 0.96967C0.176777 1.26256 0.176777 1.73744 0.46967 2.03033L3.43934 5L0.46967 7.96967C0.176777 8.26256 0.176777 8.73744 0.46967 9.03033C0.762563 9.32322 1.23744 9.32322 1.53033 9.03033L5.03033 5.53033C5.32322 5.23744 5.32322 4.76256 5.03033 4.46967L1.53033 0.96967C1.23744 0.676777 0.762563 0.676777 0.46967 0.96967Z%22 fill%3D%22%232C2C2C%22 fill-opacity%3D%220.5%22%2F%3E%3C%2Fsvg%3E");\n  background-repeat: no-repeat;\n  background-position: center;\n  margin-left: 6px;\n}'),window["@sl/address-autocomplete-v3"]={Autocomplete:class{static shouldBind(e,t){return!!e&&!!t&&("JP"===e?t===f.Postcode:t===f.Address)}constructor(e){if(this.destroy=()=>{"function"==typeof this.cancel&&this.cancel()},this.selectPlace=e=>{this.config.onPlaceSelected(e),this.togglePredictionList(!1)},!e.prediction.requestHashcode){let t=`${Date.now()}`;e.prediction.requestHashcode=e=>`${t}_${e.keyword}`}this.config=new ec(e),this.keywordInput=new el(this.config),this.predictionRequest=new ej(this.config),this.predictionList=new eI(this.config),this.init()}init(){this.config.plugins.forEach(e=>{try{e.apply(this)}catch(e){}}),this.togglePredictionList(this.shouldActivatePredictionList())}togglePredictionList(e){let t=this.nextTask();e?(this.activatePredictionList(t),this.onPredictionListDeactivated(t)):this.onPredictionListActivated(t)}shouldActivatePredictionList(){return this.keywordInput.activated&&this.keywordInput.size>=this.config.predictionKeywordThreshold}onPredictionListActivated(e){let t=()=>{this.shouldActivatePredictionList()&&this.togglePredictionList(!0)},n=()=>{this.shouldActivatePredictionList()&&this.togglePredictionList(!0)};this.keywordInput.$input.addEventListener("focus",t),this.keywordInput.$input.addEventListener("input",n),e.done().finally(()=>{this.keywordInput.$input.removeEventListener("focus",t),this.keywordInput.$input.removeEventListener("input",n)})}onPredictionListDeactivated(e){let t=!1,n=()=>{t=!0,setTimeout(()=>{t=!1},0)},o=()=>{t||this.togglePredictionList(!1)};this.predictionList.$ele.addEventListener("mousedown",n),this.keywordInput.$input.addEventListener("blur",o),e.done().finally(()=>{this.predictionList.$ele.removeEventListener("mousedown",n),this.keywordInput.$input.removeEventListener("blur",o)})}activatePredictionList(e){let t=eu(()=>{let{value:e}=this.keywordInput;e.length>=this.config.predictionKeywordThreshold&&this.predictionRequest.query(e)},this.config.predictionRequestDebounce),n=()=>{t()},o=e=>{this.predictionList.activate(e)};this.keywordInput.$input.addEventListener("input",n),this.predictionRequest.onResponse=o,t(),e.done().finally(()=>{this.predictionRequest.onResponse===o&&(this.predictionRequest.onResponse=void 0),this.keywordInput.$input.removeEventListener("input",n),this.predictionList.deactivate()});let r=this.keywordInput.$input.getAttribute("autocomplete");this.keywordInput.$input.setAttribute("autocomplete","none"),e.done().finally(()=>{this.keywordInput.$input.setAttribute("autocomplete",r||"on")})}nextTask(){"function"==typeof this.cancel&&this.cancel();let[e,t]=eH.withCancel(eH.background());return this.cancel=t,e}},"/plugins":{ShoplinePredictionService:class extends eN{constructor(e){super(),this.props=e,this.hooks={beforePlaceSelect:new A,placeSelected:new A};let t=eM(`
    <div class="address-autocomplete">
      <div class="address-autocomplete__header">
        SUGGESTIONS
        <div class="address-autocomplete__close"></div>
      </div>
      <ul class="address-autocomplete__list"></ul>
      <div class="address-autocomplete__footer__google">powered by Google</div>
    </div>
  `).cloneNode(!0);this.$container=t.firstChild;let n=this.$container.querySelector(".address-autocomplete__close");n&&n.addEventListener("click",()=>{this.deactivate()})}shouldActivate(e){return function(e,...t){for(let n=0;n<t.length;++n)if(e.type===t[n])return!0;return!1}(e,p.Google,p.Shopline,p.AWS)}activate(e,t){var n;this._changeExtDomByType(t);let o=this.$container.querySelector("ul"),r=null==o?void 0:o.cloneNode(!1);t.list.forEach((n,o)=>{var i;let a=eM(`<li>${n.description||""}</li>`).cloneNode(!0);null===(i=null==a?void 0:a.firstChild)||void 0===i||i.addEventListener("click",r=>{this.hooks.beforePlaceSelect.call({cursor:{prediction:t,index:o}}),this.deactivate(),this.props.placeDetailRequest({type:t.type,placeId:n.placeId}).then(n=>{if(n.success){let[r,i]=function(e){let t=e.detail,n={};return Array.isArray(t.province)&&(n[f.Province]=t.province),Array.isArray(t.city)&&(n[f.City]=t.city),Array.isArray(t.district)&&(n[f.District]=t.district),t.zip&&(n[f.Postcode]=[t.zip]),t.address2&&(n[f.Address2]=[t.address2]),t.company&&(n[f.Company]=[t.company]),[t.address1||null,n]}(n.data);null!==r&&(i[f.Address]=[r]),this.hooks.placeSelected.call({cursor:{prediction:t,index:o},placeDetail:n.data,formattedPlaceDetail:i}),e.selectPlace({candidates:i})}})}),null==r||r.appendChild(a)}),null===(n=null==o?void 0:o.parentElement)||void 0===n||n.replaceChild(r,o),this.toggleContainer(!0)}_changeExtDomByType(e){this.$container.setAttribute("data-prediction-type",`${e.type}`)}}}}}();
