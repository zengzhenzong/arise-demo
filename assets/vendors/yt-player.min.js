!function(){"use strict";function e(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function t(e){return"function"==typeof e}function s(e){return"object"==typeof e&&null!==e}e.EventEmitter=e,e.prototype._events=void 0,e.prototype._maxListeners=void 0,e.defaultMaxListeners=10,e.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},e.prototype.emit=function(e){var i,r,n,a,o,h;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(i=arguments[1],i instanceof Error)throw i;var l=Error('Uncaught, unspecified "error" event. ('+i+")");throw l.context=i,l}if(void 0===(r=this._events[e]))return!1;if(t(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(s(r))for(o=0,a=Array.prototype.slice.call(arguments,1),n=(h=r.slice()).length;o<n;o++)h[o].apply(this,a);return!0},e.prototype.addListener=function(i,r){var n;if(!t(r))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",i,t(r.listener)?r.listener:r),this._events[i]?s(this._events[i])?this._events[i].push(r):this._events[i]=[this._events[i],r]:this._events[i]=r,s(this._events[i])&&!this._events[i].warned&&(n=void 0===this._maxListeners?e.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[i].length>n&&(this._events[i].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[i].length),"function"==typeof console.trace&&console.trace()),this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(e,s){if(!t(s))throw TypeError("listener must be a function");var i=!1;function r(){this.removeListener(e,r),i||(i=!0,s.apply(this,arguments))}return r.listener=s,this.on(e,r),this},e.prototype.removeListener=function(e,i){var r,n,a,o;if(!t(i))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(r=this._events[e]).length,n=-1,r===i||t(r.listener)&&r.listener===i)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,i);else if(s(r)){for(o=a;o-- >0;)if(r[o]===i||r[o].listener&&r[o].listener===i){n=o;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,i)}return this},e.prototype.removeAllListeners=function(e){var s,i;if(!this._events)return this;if(!this._events.removeListener)return 0==arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0==arguments.length){for(s in this._events)"removeListener"!==s&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events={},this}if(t(i=this._events[e]))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},e.prototype.listeners=function(e){return this._events&&this._events[e]?t(this._events[e])?[this._events[e]]:this._events[e].slice():[]},e.prototype.listenerCount=function(e){if(this._events){var s=this._events[e];if(t(s))return 1;if(s)return s.length}return 0},e.listenerCount=function(e,t){return e.listenerCount(t)};let i=e.EventEmitter,r="https://www.youtube.com/iframe_api",n={"-1":"unstarted",0:"ended",1:"playing",2:"paused",3:"buffering",5:"cued"},a={INVALID_PARAM:2,HTML5_ERROR:5,NOT_FOUND:100,UNPLAYABLE_1:101,UNPLAYABLE_2:150},o=[];var h,l=(h=class extends i{constructor(e,t){super();let s="string"==typeof e?document.querySelector(e):e;s.id?this._id=s.id:this._id=s.id="ytplayer-"+Math.random().toString(16).slice(2,8),this._opts=Object.assign({width:640,height:360,autoplay:!1,captions:void 0,controls:!0,keyboard:!0,fullscreen:!0,annotations:!0,modestBranding:!1,related:!0,timeupdateFrequency:1e3,playsInline:!0,start:0},t),this.videoId=null,this.destroyed=!1,this._api=null,this._autoplay=!1,this._player=null,this._ready=!1,this._queue=[],this._interval=null,this._startInterval=this._startInterval.bind(this),this._stopInterval=this._stopInterval.bind(this),this.on("playing",this._startInterval),this.on("unstarted",this._stopInterval),this.on("ended",this._stopInterval),this.on("paused",this._stopInterval),this.on("buffering",this._stopInterval),this._loadIframeAPI((e,t)=>{if(e)return this._destroy(Error("YouTube Iframe API failed to load"));this._api=t,this.videoId&&this.load(this.videoId,this._autoplay,this._start)})}load(e,t=!1,s=0){if(!this.destroyed&&(this.videoId=e,this._autoplay=t,this._start=s,this._api)){if(!this._player){this._createPlayer(e);return}this._ready&&(t?this._player.loadVideoById(e,s):this._player.cueVideoById(e,s))}}play(){this._ready?this._player.playVideo():this._queueCommand("play")}pause(){this._ready?this._player.pauseVideo():this._queueCommand("pause")}stop(){this._ready?this._player.stopVideo():this._queueCommand("stop")}seek(e){this._ready?this._player.seekTo(e,!0):this._queueCommand("seek",e)}setVolume(e){this._ready?this._player.setVolume(e):this._queueCommand("setVolume",e)}getVolume(){return this._ready&&this._player.getVolume()||0}mute(){this._ready?this._player.mute():this._queueCommand("mute")}unMute(){this._ready?this._player.unMute():this._queueCommand("unMute")}isMuted(){return this._ready&&this._player.isMuted()||!1}setSize(e,t){this._ready?this._player.setSize(e,t):this._queueCommand("setSize",e,t)}setPlaybackRate(e){this._ready?this._player.setPlaybackRate(e):this._queueCommand("setPlaybackRate",e)}setPlaybackQuality(e){this._ready?this._player.setPlaybackQuality(e):this._queueCommand("setPlaybackQuality",e)}getPlaybackRate(){return this._ready&&this._player.getPlaybackRate()||1}getAvailablePlaybackRates(){return this._ready&&this._player.getAvailablePlaybackRates()||[1]}getDuration(){return this._ready&&this._player.getDuration()||0}getProgress(){return this._ready&&this._player.getVideoLoadedFraction()||0}getState(){return this._ready&&n[this._player.getPlayerState()]||"unstarted"}getCurrentTime(){return this._ready&&this._player.getCurrentTime()||0}destroy(){this._destroy()}_destroy(e){!this.destroyed&&(this.destroyed=!0,this._player&&(this._player.stopVideo&&this._player.stopVideo(),this._player.destroy()),this.videoId=null,this._id=null,this._opts=null,this._api=null,this._player=null,this._ready=!1,this._queue=null,this._stopInterval(),this.removeListener("playing",this._startInterval),this.removeListener("paused",this._stopInterval),this.removeListener("buffering",this._stopInterval),this.removeListener("unstarted",this._stopInterval),this.removeListener("ended",this._stopInterval),e&&this.emit("error",e))}_queueCommand(e,...t){this.destroyed||this._queue.push([e,t])}_flushQueue(){for(;this._queue.length;){let e=this._queue.shift();this[e[0]].apply(this,e[1])}}_loadIframeAPI(e){if(window.YT&&"function"==typeof window.YT.Player)return e(null,window.YT);o.push(e),!Array.from(document.getElementsByTagName("script")).some(e=>e.src===r)&&new Promise((e,t)=>{let s=document.createElement("script");for(let[e,t]of(s.async=!0,s.src=r,Object.entries({})))s.setAttribute(e,t);s.onload=()=>{s.onerror=s.onload=null,e(s)},s.onerror=()=>{s.onerror=s.onload=null,t(Error(`Failed to load ${r}`))},(document.head||document.getElementsByTagName("head")[0]).appendChild(s)}).catch(e=>{for(;o.length;)o.shift()(e)});let t=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{for("function"==typeof t&&t();o.length;)o.shift()(null,window.YT)}}_createPlayer(e){if(this.destroyed)return;let t=this._opts;this._player=new this._api.Player(this._id,{width:t.width,height:t.height,videoId:e,host:t.host,playerVars:{autoplay:t.autoplay?1:0,cc_load_policy:null!=t.captions?!1!==t.captions?1:0:void 0,hl:null!=t.captions&&!1!==t.captions?t.captions:void 0,cc_lang_pref:null!=t.captions&&!1!==t.captions?t.captions:void 0,controls:t.controls?2:0,disablekb:t.keyboard?0:1,enablejsapi:1,fs:t.fullscreen?1:0,iv_load_policy:t.annotations?1:3,modestbranding:t.modestBranding?1:0,origin:window.location.origin,playsinline:t.playsInline?1:0,rel:t.related?1:0,wmode:"opaque",start:t.start},events:{onReady:()=>this._onReady(e),onStateChange:e=>this._onStateChange(e),onPlaybackQualityChange:e=>this._onPlaybackQualityChange(e),onPlaybackRateChange:e=>this._onPlaybackRateChange(e),onError:e=>this._onError(e)}})}_onReady(e){this.destroyed||(this._ready=!0,this.load(this.videoId,this._autoplay,this._start),this._flushQueue())}_onStateChange(e){if(this.destroyed)return;let t=n[e.data];if(t)["paused","buffering","ended"].includes(t)&&this._onTimeupdate(),this.emit(t),["unstarted","playing","cued"].includes(t)&&this._onTimeupdate();else throw Error("Unrecognized state change: "+e)}_onPlaybackQualityChange(e){this.destroyed||this.emit("playbackQualityChange",e.data)}_onPlaybackRateChange(e){this.destroyed||this.emit("playbackRateChange",e.data)}_onError(e){if(this.destroyed)return;let t=Number(e.data);if(t!==a.HTML5_ERROR){if(t===a.UNPLAYABLE_1||t===a.UNPLAYABLE_2||t===a.NOT_FOUND||t===a.INVALID_PARAM)return this.emit("unplayable",this.videoId);this._destroy(Error("YouTube Player Error. Unknown error code: "+t))}}_onTimeupdate(){this.emit("timeupdate",this.getCurrentTime())}_startInterval(){this._interval=setInterval(()=>this._onTimeupdate(),this._opts.timeupdateFrequency)}_stopInterval(){clearInterval(this._interval),this._interval=null}}).__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h;window["yt-player"]={default:l}}();
